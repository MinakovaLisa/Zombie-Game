{"version":3,"sources":["features/MoveControls.tsx","features/Dice.tsx","components/CommonCard/brain_4.png","components/CommonCard/CommonCard.tsx","components/Health/health.png","components/Health/Health.tsx","components/Player/player.png","components/Player/player2.png","components/Player/player3.png","components/Player/player4.png","components/Player/Player.tsx","components/Enemy/zombie.png","components/Enemy/zombie_defeated.png","components/Enemy/Enemy.tsx","components/Boards/boards.png","components/Boards/BoardsCard.tsx","components/Weapon/weapon.png","components/Weapon/WeaponCard.tsx","features/PlayGrid/getCards.tsx","features/PlayGrid/getPlayersList.tsx","features/PlayGrid/getEnemyList.tsx","business/phases/common/getNextPlayerCoord.ts","business/phases/common/getNeighboringCellList.ts","assets/door2.png","assets/window2.png","features/PlayGrid/Barrier.tsx","assets/door.png","assets/window.png","features/PlayGrid/getFilledPlayGrid.tsx","features/PlayGrid/index.tsx","features/PlayGrid/house_2.png","components/HealthSlots.tsx","components/Inventory.tsx","features/PlayerStatus.tsx","features/StatusList.tsx","pages/EndScreen.tsx","features/PlayersStatusList.tsx","pages/StartScreen.tsx","business/initialState/getGameField/getFieldCells.ts","business/initialState/getGameField/spreadCards.ts","business/initialState/getGameField/index.ts","business/initialState/getPlayers.ts","business/initialState/getEnemies.ts","business/initialState/index.ts","shared/config/prodConfig.ts","shared/config/walls.ts","business/phases/waitingStart/index.ts","business/phases/common/getNextPlayerNumber.ts","business/phases/common/getStateCardSelected.ts","business/phases/common/checkCellHasWall.ts","business/phases/gameStarted/playerMove/checkCanTakeCell.ts","business/phases/gameStarted/playerMove/getAvailableCells.ts","business/phases/gameStarted/playerMove/getStatePlayerMoved.ts","business/phases/gameStarted/playerMove/changePlayerCoord.ts","business/phases/gameStarted/playerMove/index.ts","business/phases/gameStarted/playerMove/getPlayerMoveResult.ts","business/phases/gameStarted/takeCard/index.ts","business/phases/gameStarted/takeCard/openCard.ts","business/phases/gameStarted/takeCard/deleteCard.ts","business/phases/gameStarted/rollDice/index.ts","business/phases/interactWithEnemy/getBattleResult.ts","business/phases/common/deleteSelectedCard.ts","business/phases/interactWithEnemy/thrownBattleDice.ts","business/phases/interactWithEnemy/selectCard.ts","business/phases/interactWithEnemy/changeSelectedCard.ts","business/phases/interactWithEnemy/index.ts","business/phases/interactWithEnemy/getStateClickedEnemy.ts","business/phases/interactWithEnemy/removeEnemyCard.ts","business/phases/interactWithEnemy/checkCardApperance.ts","business/phases/interactWithEnemy/openEnemyCard.ts","business/phases/gameStarted/applyCard/getStateGiveCard.ts","business/phases/gameStarted/applyCard/changeHealth.ts","business/phases/gameStarted/applyCard/getStateClickedContextMenu.ts","business/phases/gameStarted/applyCard/getStateHealAnotherPlayer.ts","business/phases/common/canInteractWithCell.ts","business/phases/gameStarted/applyCard/getStateClickedPlayer.ts","business/phases/gameStarted/applyCard/getStateHealCurrPlayer.ts","business/phases/gameStarted/applyCard/index.ts","business/phases/gameStarted/applyCard/getStateHoleFilled.ts","business/phases/gameStarted/applyCard/getAvailableCards.ts","business/phases/endGame/index.ts","business/phases/gameStarted/getPlayersOrder/index.ts","business/phases/enemyMove/checkCanTakeCell.ts","business/phases/enemyMove/getAvailableCells.ts","business/phases/enemyMove/index.ts","business/phases/enemyMove/getStateEnemySelected.ts","business/phases/enemyMove/getStateEnemyMoved.ts","business/phases/enemyMove/getEnemyMoveResult.ts","business/phases/enemyMove/getStateSwitchPlayer.ts","business/store.ts","business/reducer.ts","App.tsx","business/effects/useOpenCard.ts","business/effects/usePlayerMove.ts","business/effects/useEndScreen.ts","business/effects/useInteractWithEnemy.ts","business/effects/useApplyCard.ts","reportWebVitals.ts","index.tsx"],"names":["Arrow","styled","div","props","direction","ArrowContainer","MoveControls","dispatch","useDispatch","renderArrow","onClick","type","payload","DiceWrap","DiceButton","button","DiceNumber","Dice","useSelector","state","dice","diceNumber","Math","floor","random","StyledCommonCard","css","img","StyledHealthCard","apperance","Health","PLayersPortal","Number","coordX","coordY","ContextMenuPortal","PlayerCard","image","isCurrent","needHighlightning","PlayerCardList","needReverseCards","needSplitCards","ContextMenu","coord","x","y","Button","PlayerList","playerImageList","player","player2","player3","player4","playerListOnCell","playerList","numberOfPlayer","gameState","length","findIndex","playerCard","orderNumber","playerCardList","map","playerCardItem","index","coordOfAvailableCards","id","activePlayerCoord","typeOfChosedCard","inventory","cardSelected","calculateHighlightning","contextMenu","className","card","buttonType","showContextMenu","console","log","activePLayerCoord","currplayerCoord","contextMenuCoord","getContextMenuCoord","split","hor","vert","fieildElem","document","getElementById","portal","ReactDOM","createPortal","String","Fragment","isActivePlayer","includes","horActive","vertActive","horCurrent","vertCurrent","differenceHor","getNewCoordHor","differenceVert","getNewCoordVert","firstNumber","secondNUmber","difference","EnemyCard","zombie_defeated","zombie","EnemyCardList","EnemyList","enemyArray","list","deadPlayerList","activePlayerNumber","enemyListOnCell","enemyItem","firstItemIsClosed","enemyCard","StyledBoardsCard","BoardsCard","StyledWeaponCard","WeaponCard","getCards","cell","healthCardItem","cardItem","find","name","boardsCardItem","weaponCardItem","getPlayersList","playersList","Object","entries","filter","playerItem","getEnemyList","enemiesList","filteredEnemiesArr","getNextPlayerCoord","currentCoord","currPlayerHor","currPlayerVert","nextPlayerVert","parseInt","nextPlayerHor","prevPlayerVert","prevPlayerHor","MOVE_DIRECTION_LIST","getNeighboringCellList","prevPlayerCoord","gameField","directionItem","cellItem","values","CommonWall","barrierItem","isOpen","highlightningList","item","WallImage","closedDoor","closedWindow","Wall","Barrier","_config","orderIndex","cellValues","isCurrPlayerAlive","barrierList","barrier","getWallItem","mode","onClickHandler","playGridMode","currPlayerCoord","neighboringCellList","needCheckHighlightning","concat","getHighlightningList","getHigtlightningDirection","cellType","currCoord","currCell","availableCellList","currCellHasHole","checkCellOnHole","nextCell","oppositeDirection","getOppositeDirection","nextCellHasHole","availableCell","cellHasWindow","cellHasDoor","Wrap","CellItem","UnderlayerItem","CardsPortal","CardsWrap","getFilledPlayGrid","enemyList","orderGameCells","order","cardList","cardListWithoutInventoryCards","inventoryElement","cardsOnCell","getCardsOnCell","enemiyList","hasPlayerOncell","hasCardOnCell","enemyOnCell","hasEnemyOnCell","amountEnemyOnCell","phaseInteractWithEnemy","checkNeedSplitCards","availableCells","coordOfAvailableCells","playerX","playerY","GridItem","PlayGrid","config","height","finishCoord","HealthSlotList","HealthSlot","isFilled","HealthSlots","getHealthSlot","healthSlotFilled","playerHealth","getPlayerHealth","Array","fill","reduce","prev","currSlot","health","InventoryWrap","InwentoryRow","Image","boards","weapon","highlighting","Counter","Inventory","PlayerStatusCard","CharacterAvatar","Status","HealthStatus","InventoryStatus","Row","PlayerStatus","avatar","StatusList","useState","status","updateStatus","doEffect","gameResult","newStatus","getTextStatus","useEffect","GameScore","amount","EndScreen","StartButton","StartScreen","createEmptyFieldCells","cellList","emptyFieldItem","newEmptyGameField","forEach","getOrganizedFieldCells","emptyField","startIndex","startCoord","finishIndex","getCellsWalls","cellsWithBarrierList","cellsBarrierList","cellBarrier","cellIndex","cellWithoutBarrier","cellsWithBarriers","fromEntries","setCards","currCardSet","cellListWithCards","cellWithCards","getListForCards","emptyCellsList","AMOUNT_EMPTY_CELLS","amoutCurrentCards","canSetAllCards","afforableAmountCards","cardName","error","prevkeyList","randomNumber","getRandomNumber","keyItem","arrNumber","maxNumber","number","getGameField","getCellOrder","gameFieldCells","cellsWithAllCards","cardApperance","amountHealthItems","amountBoardsItems","amountWeaponsItems","getCardList","filled–°ells","gameFieldCellsWithPrevios","cellsForCards","filledWithCardsFieldCells","spreadCards","emptyFieldCells","fieldCellsWithWalls","getFieldCells","width","orderList","push","getPlayers","amountPlayers","initialPlayerHealth","getEnemies","getEmptyList","enemiesCoords","getListOfIndexes","getListOfEnemy","amountEnemies","power","initialState","gameFieldWithoutEnemy","getInitialState","PROD_CONFIG","DEV_CONFIG","getConfig","waitingStart","action","getNextPlayerNumber","attackInitiator","commonPlayerList","maxPlayerNumber","nextPlayerNumber","getStateCardSelected","typeOfSelect","checkCardNonZero","newPlayerList","changeSelectedCard","selectedCard","stateWithSelectedCard","stateWithoutSelectedCard","newInventoryCardUnSelected","newInventoryCardSelected","checkCellHasWall","newPlayerCoord","enemyIndex","currCellCoord","currCellHasBarrier","checkCellOnBarrier","nextCellHasBarrier","cellHasWall","cellHasClosedHole","checkNextCellOccupied","newCoord","some","getAvailableCells","nextPlayerCoord","metBarrier","isLastStepOfMove","isNextCellOcupied","checkCanTakeCell","getStatePlayerMoved","changePlayerCoord","playerMove","newCellWithPlayer","takeFinish","takeCard","hasCurrCoordEnemy","metEnemyCard","newGameState","newPlayerNumber","getPlayerMoveResult","typeofCard","checkInventoryCardApperance","getStateOpenCard","getStateCardTaken","getStateDeletedCard","playerCoordIndex","cellWithOpenCard","cardItemWithOpenCard","openCard","newGameField","cardItems","emptyInventory","structuredCardItems","prevItem","currentItem","newInventory","newPlayer","cellWithoutCard","deleteCard","cardItemList","rollDice","getStatePlayerCanFight","getStatePlayerRunsAway","getStatePlayetLoseHealth","newPlayerListObj","newDeadPlayerList","deleteSelectedCard","currInventory","removedCardType","thrownBattleDice","selectCard","currPlayerInventory","isChosenCardWeapon","hasWeapon","newSelectType","hasAnyCardSelected","interactWithEnemy","currEnemy","currEnemyCoord","playerCanFight","currEnemyIndex","keys","key","defeatedEnemy","newEnemyList","getStateClickedEnemy","newEnemyArray","removeEnemyCard","isNeedOpenEnemyCard","checkCardApperance","join","openEnemyCard","getBattleResult","getStateGiveCard","recipientPlayerNumber","indexCurrPlayer","currentPlayerInventory","recepientPlayerInventory","sharedCardType","newCurrentPlayerInventory","newRecepientPlayerInventory","changeHealth","indexTarget","getStateClickedContextMenu","typeOfAction","newState","indexChosenPlayer","newHealth","getStateHealAnotherPlayer","closeContextMenu","canInteractWithCell","getStateClickedPlayer","clickedPlayerCard","currPlayer","isCurrentPlayer","canInteractWithPlayer","getCellsForInteract","getStateHealCurrPlayer","clickedPlayerCardNumber","openContextMenu","availableCellsCoords","applyCard","cellWithChosedHole","barriersWithClosedHole","getStateHoleFilled","getAvailableCards","endGame","getPlayersOrder","numberCurrPlayer","nextPlayersNumber","deadPLayerCoord","enemyMove","currEnemyCard","hasEnemyCard","isOpenEnemyCard","newDeadPLayerList","getStateEnemySelected","prevEnemyCoord","nextEnemyCoord","enemyListArray","enemy","getStateEnemyMoved","indexMetPlayerCard","deadPlayerItem","getEnemyMoveResult","getStateSwitchPlayer","store","createStore","phaseOuter","phaseInner","window","__REDUX_DEVTOOLS_EXTENSION__","Field","Game","RightPanel","LeftPanel","GameControls","GetApp","timerOpen","setTimeout","clearTimeout","timerTakeCard","timerChangePlayerHealth","timerDeleteCard","useOpenCard","timerMoveResult","usePlayerMove","timer","useEndScreen","timerGetResult","timerRemoveEnemy","useInteractWithEnemy","useApplyCard","getGameScreen","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","render","StrictMode"],"mappings":"yUAWMA,GAAQC,KAAOC,IAAV,2DAAGD,CAAH,uPAaI,SAACE,GACZ,OAAQA,EAAMC,WACZ,IAAK,MACH,MAAO,iBACT,IAAK,SACH,MAAO,gBACT,IAAK,OACH,MAAO,sBAIA,SAACD,GACZ,OAAQA,EAAMC,WACZ,IAAK,MACH,MAAO,aACT,IAAK,SACH,MAAO,eACT,IAAK,OACH,MAAO,aACT,IAAK,QACH,MAAO,kBAKTC,GAAiBJ,KAAOC,IAAV,oEAAGD,CAAH,wRAePK,GAAe,WAC1B,IAAMC,EAAWC,eAEXC,EAAc,SAACL,GACnB,OACE,eAACJ,GAAD,CACEI,UAAWA,EACXM,QAAS,WACPH,EAAS,CAAEI,KAAM,sBAAuBC,QAASR,KAHrD,gBAWJ,OACE,gBAACC,GAAD,WACGI,EAAY,OACZA,EAAY,SACZA,EAAY,QACZA,EAAY,c,QC9EbI,GAAWZ,KAAOC,IAAV,+DAAGD,CAAH,8IAQRa,GAAab,KAAOc,OAAV,iEAAGd,CAAH,oEAKVe,GAAaf,KAAOC,IAAV,iEAAGD,CAAH,0FAQHgB,GAAO,WAClB,IAAMV,EAAWC,eACjB,EAAqBU,cAAY,SAACC,GAAD,MAAkB,CAACA,EAAMC,SAAnDC,EAAP,qBAOA,OACE,gBAACR,GAAD,WACE,eAACG,GAAD,UAAaK,IACb,eAACP,GAAD,CACEJ,QAAS,WACPH,EAAS,CACPI,KAAM,aACNC,QAVDU,KAAKC,MARE,EAQID,KAAKE,SAAuB,MAM5C,2FCxCS,OAA0B,oCCG5BC,GAAmBC,aAAH,2MAIHC,ICPX,OAA0B,mCCS5BC,GAAmB3B,KAAOC,IAAV,sEAAGD,CAAH,yFACzBwB,IACkB,SAACtB,GACnB,GAAwB,SAApBA,EAAM0B,UACR,MAAO,WAIS,SAAC1B,GACnB,GAAwB,SAApBA,EAAM0B,UACR,MAAM,OAAN,OAAcF,GAAd,QAKOG,GAAS,SAAC3B,GACrB,OAAO,eAACyB,GAAD,gBAAsBzB,KCzBhB,OAA0B,mCCA1B,OAA0B,oCCA1B,OAA0B,oCCA1B,OAA0B,oCCyCnC4B,GAAgB9B,KAAOC,IAAV,mEAAGD,CAAH,sGAGT,SAACE,GACP,MAAM,GAAN,OAAiC,GAAvB6B,OAAO7B,EAAM8B,QAAvB,SAGQ,SAAC9B,GACT,MAAM,GAAN,OAAiC,GAAvB6B,OAAO7B,EAAM+B,QAAe,GAAtC,SAIEC,GAAoBlC,KAAOC,IAAV,uEAAGD,CAAH,sGAGb,SAACE,GACP,MAAM,GAAN,OAAiC,GAAvB6B,OAAO7B,EAAM8B,QAAe,IAAtC,SAGQ,SAAC9B,GACT,MAAM,GAAN,OAAiC,GAAvB6B,OAAO7B,EAAM+B,QAAvB,SAIEE,GAAanC,KAAOC,IAAV,gEAAGD,CAAH,kwBAaM,SAACE,GACnB,MAAM,OAAN,OAAcA,EAAMkC,MAApB,QAGS,SAAClC,GACV,OAAIA,EAAMmC,UACD,IAEA,OAWC,SAACnC,GACT,GAAIA,EAAMmC,UACR,MAAO,uBAkBD,SAACnC,GACT,GAAIA,EAAMoC,kBACR,MAAO,oCAUTC,GAAiBvC,KAAOC,IAAV,oEAAGD,CAAH,sNAMA,SAACE,GACjB,OAAIA,EAAMsC,iBACD,cAEA,SAKG,SAACtC,GACX,GAAIA,EAAMuC,eACR,MAAO,yBAID,SAACvC,GACT,GAAIA,EAAMuC,eACR,MAAO,aAUTC,GAAc1C,KAAOC,IAAV,iEAAGD,CAAH,yTAWP,SAACE,GAAW,IAAD,EACG,EAApB,iBAAIA,EAAMyC,aAAV,aAAI,EAAaC,GACT,GAAN,iBAAU1C,EAAMyC,aAAhB,aAAU,EAAaC,EAAvB,MAEO,SAGJ,SAAC1C,GAAW,IAAD,EAChB,MAAM,GAAN,iBAAUA,EAAMyC,aAAhB,aAAU,EAAaE,EAAvB,SAIEC,GAAS9C,KAAOc,OAAV,4DAAGd,CAAH,8DAKC+C,GAAa,SAAC7C,GACzB,IAAMI,EAAWC,eAEXyC,EAAkB,CAACC,GAAQC,GAASC,GAASC,IAE3CC,EAA4DnD,EAA5DmD,iBAAkBC,EAA0CpD,EAA1CoD,WAAYC,EAA8BrD,EAA9BqD,eAAgBC,EAActD,EAAdsD,UAEhDf,EAAiBY,EAAiBI,OAAS,EAS3CjB,EAAyC,IAJrBa,EAAiBK,WAAU,SAACC,GACpD,OAAOA,EAAWC,cAAgBL,MAGgBd,EAE9CoB,EACJ,eAACtB,GAAD,CACEE,eAAgBA,EAChBD,iBAAkBA,EAFpB,SAIGa,EAAiBS,KAAI,SAACC,EAAgBC,GACrC,IAAMC,EAAwBT,EAAUS,sBAGxC,SAF4BX,EAAWC,IAGrC,KAAK,EACH,OACE,eAACpB,GAAD,CACE+B,GAAE,gBAAWH,EAAeH,aAE5BxB,MAAOY,EAAgBe,EAAeH,aACtCvB,UAAWkB,IAAmBQ,EAAeH,YAC7CtB,mBAAmB,EACnB7B,QAAS,kBACPH,EAAS,CACPI,KAAM,gBACNC,QAASoD,MAPRC,GAaX,KAAK,EACH,IAAMG,EAAoBb,EAAWC,GAAgBZ,MAE/CyB,EADad,EAAWC,GACMc,UAAUC,aAExCX,EACJ,eAACxB,GAAD,CACE+B,GAAE,gBAAWH,EAAeH,aAE5BxB,MAAOY,EAAgBe,EAAeH,aACtCvB,UAAWkB,IAAmBQ,EAAeH,YAC7CtB,kBAAmBiC,GACjBN,EACAG,EACAL,EACAI,GAEF1D,QAAS,kBACPH,EAAS,CACPI,KAAM,gBACNC,QAASoD,MAZRC,GAkBHQ,EACJ,gBAAC9B,GAAD,CAEEwB,GAAI,cACJO,UAAW,cAHb,UAKE,eAAC3B,GAAD,CACErC,QAAS,WACPH,EAAS,CACPI,KAAM,qBACNC,QAAS,CACP+D,KAAMX,EACNY,WAAY,YANpB,8DAaA,eAAC7B,GAAD,CACErC,QAAS,WACPH,EAAS,CACPI,KAAM,qBACNC,QAAS,CAAE+D,KAAMX,EAAgBY,WAAY,WAJnD,oDAjBI,eA8BR,OAAQZ,EAAea,iBACrB,KAAK,EACHC,QAAQC,IAAIvB,GACZ,IAAMwB,EAAoBzB,EAAWC,GAAgBZ,MAC/CqC,EAAkBjB,EAAepB,MAEjCsC,EAAmBC,GACvBH,EACAC,GAGFH,QAAQC,IAAIG,GAEZ,MAAoBA,EAAiBE,MAAM,KAA3C,oBAAOC,EAAP,KAAYC,EAAZ,KACMC,EAAaC,SAASC,eAAe,SAE3C,OAAQF,GACN,KAAK,KACH,OAAO3B,EAGT,QACE,IAAM8B,EAASC,KAASC,aACtB,eAACzD,GAAD,CACEF,OAAQ4D,OAAOR,GACfnD,OAAQ2D,OAAOP,GAFjB,SAKGb,GAFG,UAINc,GAEF,OACE,gBAAC,KAAMO,SAAP,WACGlC,EACA8B,IAFiB,YAS5B,QACE,OAAO9B,SASrB,OAAQlB,GACN,KAAK,EACH,OAAOoB,EAET,KAAK,EACH,IAAMyB,EAAaC,SAASC,eAAe,SAC3C,OAAQF,GACN,KAAK,KACH,OAAOzB,EAGT,QACE,MAAoBR,EAAiB,GAAGV,MAAMwC,MAAM,KAApD,oBAAOC,EAAP,KAAYC,EAAZ,KAOA,OANeK,KAASC,aACtB,eAAC7D,GAAD,CAAeE,OAAQoD,EAAKnD,OAAQoD,EAApC,SACGxB,IAEHyB,MASNf,GAAyB,SAC7BN,EACAG,EACAL,EACAI,GAEA,IAAM2B,EAAiB3B,IAAsBJ,EAAepB,MAC5D,OAAQsB,GACN,KAAK,KACH,OAAO,EAET,QAKE,OAJ8BA,EAAsB8B,SAClDhC,EAAepB,QAIf,KAAK,EACH,OAAQyB,GACN,IAAK,SACH,OAAO,EAGT,IAAK,SACL,IAAK,SACH,QAAS0B,GACP,KAAK,EACH,OAAO,EAET,KAAK,EAGL,QACE,OAAO,EAKb,QACE,OAAO,EAIb,KAAK,EACH,OAAO,KAOXZ,GAAsB,SAC1BH,EACAC,GAEA,MAAgCD,EAAkBI,MAAM,KAAxD,oBAAOa,EAAP,KAAkBC,EAAlB,KACA,EAAkCjB,EAAgBG,MAAM,KAAxD,oBAAOe,EAAP,KAAmBC,EAAnB,KAEMC,EAAgBC,GAAeH,EAAYF,GAC3CM,EAAiBC,GAAgBJ,EAAaF,GACpD,MAAM,GAAN,OAAUG,EAAV,YAA2BE,IAGvBD,GAAiB,SAACG,EAAqBC,GAC3C,IAAMC,EAAa3E,OAAOyE,GAAezE,OAAO0E,GAChD,OAAIC,EAAa,EACR3E,OAAO0E,GACLC,EAAa,EACf3E,OAAO0E,GAAgB,EAEvB1E,OAAO0E,IAIZF,GAAkB,SAACC,EAAqBC,GAC5C,IAAMC,EAAa3E,OAAOyE,GAAezE,OAAO0E,GAChD,OAAIC,EAAa,EACR3E,OAAO0E,GAAgB,EAEvB1E,OAAO0E,GAAgB,GClcnB,OAA0B,mCCA1B,OAA0B,4CCyBnCE,GAAY3G,KAAOC,IAAV,gEAAGD,CAAH,miBACXwB,IAUkB,SAACtB,GACnB,GAAwB,SAApBA,EAAM0B,WAA4C,aAApB1B,EAAM0B,UACtC,MAAO,WAID,SAAC1B,GACT,MAAwB,WAApBA,EAAM0B,UACD,UAEA,aAIS,SAAC1B,GACnB,OAAQA,EAAM0B,WACZ,IAAK,WACH,MAAM,OAAN,OAAcgF,GAAd,KAEF,IAAK,OACH,MAAM,OAAN,OAAcC,GAAd,SAKK,SAAC3G,GACV,OAAQA,EAAMmC,WACZ,KAAK,EACH,MAAO,IAET,KAAK,EACH,OAAQnC,EAAM0B,WACZ,IAAK,OACH,MAAO,IAET,QACE,MAAO,IAIb,QACE,MAAO,QAeD,SAAC1B,GACT,GAAIA,EAAMmC,UACR,MAAO,uBAMTyE,GAAgB9G,KAAOC,IAAV,oEAAGD,CAAH,wOAMC,SAACE,GACjB,OAAIA,EAAMsC,iBACD,cAEA,SAID,SAACtC,GACT,GAAIA,EAAMuC,eACR,MAAO,sBAKG,SAACvC,GACX,GAAIA,EAAMuC,eACR,MAAO,yBAID,SAACvC,GACT,GAAIA,EAAMuC,eACR,MAAO,aAMFsE,GAAY,SAAC7G,GACxB,IAAMI,EAAWC,eACHyG,EAA0D9G,EAAhE+G,KAAkBC,EAA8ChH,EAA9CgH,eAAgBC,EAA8BjH,EAA9BiH,mBAEpCC,GAFkElH,EAAVyC,MAEtCqE,EAAWlD,KAAI,SAACuD,GAEtC,OADA,aAAsBA,EAAtB,UAII5E,EAAiB2E,EAAgB3D,OAAS,EAE1C6D,EAAqD,WAAjCF,EAAgB,GAAGxF,UAUvCY,EACmB,IATCwE,EAAWtD,WAAU,YAAyB,IAAD,oBAAtBM,EAAsB,UACrE,OAAIkD,GAAkBA,EAAeC,GAC5BpF,OAAOiC,KAAWjC,OAAOmF,EAAeC,GAAoBnD,QAE3D,MAKkBvB,GAC3B6E,GAAqB7E,EAExB,OACE,eAACqE,GAAD,CACErE,eAAgBA,EAChBD,iBAAkBA,EAFpB,SAIGwE,EAAWlD,KAAI,YAAyB,IAAD,oBAAtBE,EAAsB,KAAfuD,EAAe,KACtC,IAAIL,EA0CF,OACE,eAACP,GAAD,6BAEMY,GAFN,IAGElF,WAAW,EACX5B,QAAS,WACPH,EAAS,CACPI,KAAM,eACNC,QAAS,CAAE4G,UAAWA,QANrBvD,GAvCT,SAJ2BkD,EAAeC,IAKxC,KAAK,EACH,OACE,eAACR,GAAD,6BAEMY,GAFN,IAGElF,WAAW,EACX5B,QAAS,WACPH,EAAS,CACPI,KAAM,eACNC,QAAS,CAAE4G,UAAWA,QANrBvD,GAaX,KAAK,EACH,OACE,eAAC2C,GAAD,6BAEMY,GAFN,IAGElF,UACEN,OAAOmF,EAAeC,GAAoBnD,SAC1CjC,OAAOiC,GAETvD,QAAS,WACPH,EAAS,CACPI,KAAM,eACNC,QAAS,CAAE4G,UAAWA,QATrBvD,UC/LR,OAA0B,mCCQnCwD,GAAmBxH,KAAOC,IAAV,uEAAGD,CAAH,iHAClBwB,IACkB,SAACtB,GACnB,GAAwB,SAApBA,EAAM0B,UACR,MAAO,WAIS,SAAC1B,GACnB,GAAwB,SAApBA,EAAM0B,UACR,MAAM,OAAN,OAAcF,GAAd,QAIY,SAACxB,GACf,GAAwB,SAApBA,EAAM0B,UACR,MAAO,UAKA6F,GAAa,SAACvH,GACzB,OACE,eAACsH,GAAD,gBAAsBtH,KC/BX,OAA0B,mCCQnCwH,GAAmB1H,KAAOC,IAAV,sEAAGD,CAAH,+GAClBwB,IACkB,SAACtB,GACnB,GAAwB,SAApBA,EAAM0B,UACR,MAAO,WAIK,SAAC1B,GACf,GAAwB,SAApBA,EAAM0B,UACR,MAAO,UAGS,SAAC1B,GACnB,GAAwB,SAApBA,EAAM0B,UACR,MAAM,OAAN,OAAcF,GAAd,QAKOiG,GAAa,SAACzH,GACzB,OACE,eAACwH,GAAD,gBAAsBxH,KC3Bb0H,GAAW,SAACC,EAAgBzC,EAAaC,GACpD,IAAMyC,EAAiBD,EAAKE,SAASC,MACnC,SAACD,GAAD,MAAiC,YAAX,OAARA,QAAQ,IAARA,OAAA,EAAAA,EAAUE,SAGpBC,EAAiBL,EAAKE,SAASC,MACnC,SAACD,GAAD,MAAiC,YAAX,OAARA,QAAQ,IAARA,OAAA,EAAAA,EAAUE,SAEpBE,EAAiBN,EAAKE,SAASC,MACnC,SAACD,GAAD,MAAiC,YAAX,OAARA,QAAQ,IAARA,OAAA,EAAAA,EAAUE,SAG1B,OACE,uCACGH,EACC,eAAC,GAAD,CACElG,UAAWkG,EAAelG,UAC1B6C,UAAW,IAFb,UAGUW,EAHV,YAGiBC,EAHjB,YAKE,KACH6C,EACC,eAAC,GAAD,CACEtG,UAAWsG,EAAetG,WAD5B,UAEUwD,EAFV,YAEiBC,EAFjB,YAIE,KACH8C,EACC,eAAC,GAAD,CACEvG,UAAWuG,EAAevG,WAD5B,UAEUwD,EAFV,YAEiBC,EAFjB,YAIE,SC/BG+C,GAAiB,SAC5BpE,EACAqE,EACA9E,EACAC,GAEA,IAEMH,EAFiBiF,OAAOC,QAAQF,GAGnCG,QAAO,SAACC,GACP,IAAS9E,EAAT,aAAuB8E,EAAvB,MACA,OAAO9E,EAAWhB,QAAUqB,GAA6B,WAApBL,EAAWsE,QAEjDnE,KAAI,SAAC2E,GAEJ,OADA,aAAuBA,EAAvB,SAMJ,OAFwBpF,EAAiBI,OAAS,GAGhD,KAAK,EACH,OACE,eAAC,GAAD,CACEJ,iBAAkBA,EAClBC,WAAY+E,EACZ9E,eAAgBA,EAChBC,UAAWA,IAIjB,KAAK,EACH,OAAO,OC5BAkF,GAAe,SAC1B1E,EACA2E,EACAzB,EACAC,GAKA,IAAMyB,EAAqBN,OAAOC,QAAQI,GAAaH,QACrD,qDAAmC7F,QAAUqB,KAG/C,OAAI4E,EAAmBnF,OAAS,EAE5B,eAAC,GAAD,CACEwD,KAAM2B,EACNzB,mBAAoBA,EACpBD,eAAgBA,EAChBvE,MAAOqB,IAGC,MCrBH6E,GAAqB,SAChCC,EACA3I,GAGA,MAAwC2I,EAAa3D,MAAM,KAA3D,oBAAO4D,EAAP,KAAsBC,EAAtB,KACMC,EAAiBC,SAASF,GAAkB,EAC5CG,EAAgBD,SAASH,GAAiB,EAC1CK,EAAiBF,SAASF,GAAkB,EAC5CK,EAAgBH,SAASH,GAAiB,EAEhD,OAAQ5I,GACN,IAAK,MACH,MAAM,GAAN,OAAU4I,EAAV,YAA2BE,GAG7B,IAAK,SACH,MAAM,GAAN,OAAUF,EAAV,YAA2BK,GAG7B,IAAK,OACH,MAAM,GAAN,OAAUC,EAAV,YAA2BL,GAG7B,IAAK,QACH,MAAM,GAAN,OAAUG,EAAV,YAA2BH,GAG7B,QACE,MAAM,GAAN,OAAUD,EAAV,YAA2BC,KC/BpBM,GAAyC,CACpD,MACA,QACA,SACA,QAMWC,GAAyB,SACpCC,EACAC,GAoBA,OAlBqDH,GAAoBxF,KACvE,SAAC4F,GACC,MAAO,CACLvJ,UAAWuJ,EACX/G,MAAOkG,GAAmBW,EAAiBE,OASzBlB,QAAO,SAACmB,GAC5B,IAAQhH,EAAUgH,EAAVhH,MACR,OAAO8G,EAAUG,OAAOjH,OCpCf,OAA0B,kCCA1B,OAA0B,oCCmCnCkH,GAAa7J,KAAOC,IAAV,iEAAGD,CAAH,+MACI,SAACE,GAKd,IAAD,EAJF,OACEA,EAAM4J,aACqB,SAA3B5J,EAAM4J,YAAY7B,MAClB/H,EAAM4J,YAAYC,SAEK,UAAG7J,EAAM8J,yBAAT,aAAG,EAAyBhC,MAAK,SAACiC,GACvD,MAAgB,WAATA,GAAqB,WAGrB,UAKF,UAID,SAAC/J,GAAW,IAAD,EACnB,iBAAQA,EAAM4J,mBAAd,aAAQ,EAAmB7B,MACzB,IAAK,OACH,MAAO,UAET,IAAK,OAGL,IAAK,SACH,MAAO,UAET,QACE,MAAO,cAcTiC,GAAYlK,aAAO6J,IAAV,gEAAG7J,CAAH,gcACA,SAACE,GAAW,IAAD,EACtB,iBAAQA,EAAM4J,mBAAd,aAAQ,EAAmB3J,WACzB,IAAK,OACH,MAAO,gBAET,QACE,MAAO,WAOD,SAACD,GAAW,IAAD,EACnB,iBAAQA,EAAM4J,mBAAd,aAAQ,EAAmB3J,WACzB,IAAK,SACH,MAAO,QAET,IAAK,OACH,MAAO,QAET,QACE,MAAO,WAKL,SAACD,GAAW,IAAD,EACjB,iBAAQA,EAAM4J,mBAAd,aAAQ,EAAmB3J,WACzB,IAAK,OACH,MAAO,QAET,QACE,MAAO,WAMO,SAACD,GAAW,IAAD,IAC7B,OACEA,EAAM4J,aACqB,SAA3B5J,EAAM4J,YAAY7B,MAClB/H,EAAM4J,YAAYC,QAElB,KAAK,EACH,iBAAQ7J,EAAM4J,mBAAd,aAAQ,EAAmB7B,MACzB,IAAK,OACH,MAAM,OAAN,OClIC,qwIDkID,KAEF,IAAK,SACH,MAAM,OAAN,OErIC,qwIFqID,KAEF,QACE,MAAO,QAIb,KAAK,EACH,iBAAQ/H,EAAM4J,mBAAd,aAAQ,EAAmB7B,MACzB,IAAK,OACH,MAAM,OAAN,OAAckC,GAAd,KAEF,IAAK,SACH,MAAM,OAAN,OAAcC,GAAd,KAEF,QACE,MAAO,aAgBV,SAAClK,GAAW,IAAD,EAChB,GAAqC,UAAjC,UAAAA,EAAM4J,mBAAN,eAAmB3J,WACrB,MAAO,UAIF,SAACD,GAAW,IAAD,EAClB,GAAqC,UAAjC,UAAAA,EAAM4J,mBAAN,eAAmB3J,WACrB,MAAO,UAID,SAACD,GAAW,IAAD,IACnB,GACmC,YAAjC,UAAAA,EAAM4J,mBAAN,eAAmB3J,YACc,UAAjC,UAAAD,EAAM4J,mBAAN,eAAmB3J,WAEnB,MAAO,UAID,SAACD,GAAW,IAAD,EACnB,GAAqC,YAAjC,UAAAA,EAAM4J,mBAAN,eAAmB3J,WACrB,MAAO,WAIH,SAACD,GAAW,IAAD,EACjB,GAAqC,UAAjC,UAAAA,EAAM4J,mBAAN,eAAmB3J,WACrB,MAAO,WAIS,SAACD,GAKhB,IAAD,EAJF,GACEA,EAAM4J,aACqB,SAA3B5J,EAAM4J,YAAY7B,MAClB/H,EAAM4J,YAAYC,OAKlB,OAHuB,UAAG7J,EAAM8J,yBAAT,aAAG,EAAyBhC,MAAK,SAACiC,GACvD,MAAgB,WAATA,GAAqB,WAGrB,YAEA,UAOXI,GAAOrK,aAAO6J,IAAV,2DAAG7J,CAAH,gZAGI,SAACE,GAAW,IAAD,EACnB,GAAqC,YAAjC,UAAAA,EAAM4J,mBAAN,eAAmB3J,WAsBhB,OACLD,EAAM4J,aAC0B,SAAhC5J,EAAM4J,YAAY3J,WACS,OAA3BD,EAAM4J,YAAY7B,KAEX,OAEE/H,EAAM4J,aAA0C,OAA3B5J,EAAM4J,YAAY7B,KACzC,MAEA,MA/BP,GACE/H,EAAM4J,aACqB,SAA3B5J,EAAM4J,YAAY7B,OACW,IAA7B/H,EAAM4J,YAAYC,OAElB,MAAO,OAEP,OAAQ7J,EAAM4J,YAAY7B,MACxB,IAAK,OACH,MAAO,MAET,IAAK,OAGL,IAAK,SACH,MAAO,MAET,QACE,MAAO,UAiBR,SAAC/H,GAAW,IAAD,EAClB,GAAqC,UAAjC,UAAAA,EAAM4J,mBAAN,eAAmB3J,WAuBrB,MAAO,OAtBP,GACED,EAAM4J,aACqB,SAA3B5J,EAAM4J,YAAY7B,OACW,IAA7B/H,EAAM4J,YAAYC,OAElB,MAAO,OAEP,OAAQ7J,EAAM4J,YAAY7B,MACxB,IAAK,OACH,MAAO,OAET,IAAK,OAGL,IAAK,SACH,MAAO,MAET,QACE,MAAO,UAQG,SAAC/H,GAAW,IAAD,EAC7B,KACGA,EAAM4J,aAA0C,SAA3B5J,EAAM4J,YAAY7B,MACvC/H,EAAM4J,aAAe5J,EAAM4J,YAAYC,QA0BnC,OAAkC,KAA9B,UAAA7J,EAAM4J,mBAAN,eAAmBC,QACrB,WAEA,OA5BN,IAAD,EACMzH,EAAiB,UAAGpC,EAAM8J,yBAAT,aAAG,EAAyBhC,MAAK,SAACiC,GACvD,MAAgB,WAATA,GAAqB,UAE9B,OAAQ/J,EAAM4J,YAAY7B,MACxB,IAAK,OACH,MAAO,WAET,IAAK,OACH,OAAI3F,EACK,UAEA,YAGX,IAAK,SACH,OAAIA,EACK,UAEA,YAGX,QACE,MAAO,cAkBR,SAACpC,GAAW,IAAD,EAChB,GAAqC,UAAjC,UAAAA,EAAM4J,mBAAN,eAAmB3J,WACrB,MAAO,OAID,SAACD,GAAW,IAAD,EACnB,GAAqC,YAAjC,UAAAA,EAAM4J,mBAAN,eAAmB3J,YAA0BD,EAAM4J,YACrD,MAAO,UAIF,SAAC5J,GAAW,IAAD,EAClB,GAAqC,UAAjC,UAAAA,EAAM4J,mBAAN,eAAmB3J,WACrB,MAAO,UAID,SAACD,GAAW,IAAD,EACnB,GAAqC,YAAjC,UAAAA,EAAM4J,mBAAN,eAAmB3J,WACrB,MAAO,WAIH,SAACD,GAAW,IAAD,EACjB,GAAqC,UAAjC,UAAAA,EAAM4J,mBAAN,eAAmB3J,WACrB,MAAO,WAIS,SAACD,GAKhB,IAAD,EAJF,GACEA,EAAM4J,aACqB,SAA3B5J,EAAM4J,YAAY7B,MAClB/H,EAAM4J,YAAYC,OAKlB,OAHuB,UAAG7J,EAAM8J,yBAAT,aAAG,EAAyBhC,MAAK,SAACiC,GACvD,MAAgB,WAATA,GAAqB,WAGrB,YAEA,UAOJK,GAAU,SAACpK,GACtB,IAAMI,EAAWC,eACjB,EACEU,cAAY,SAACC,GAAD,uBACPA,MAFCuI,EAAR,EAAQA,UAAWnG,EAAnB,EAAmBA,WAAY6D,EAA/B,EAA+BA,mBAAoB3D,EAAnD,EAAmDA,UAAW+G,EAA9D,EAA8DA,QAKxDC,EAAatK,EAAMsK,WACnBC,EAAahB,EAAUG,OAAOY,GAC9BE,IAAoBpH,EAAW6D,GAErC,OAAQsD,EAAWxC,MACjB,IAAK,aAAe,IAAD,EACX0C,EAAW,UAAGF,EAAWE,mBAAd,aAAG,EAAwB7G,KAAI,SAAC8G,GAC/C,IAAMC,EAAc,SAClBD,EACAE,EACAd,EACAe,GAEA,OAAQD,GACN,IAAK,WACH,OACE,eAACT,GAAD,CAEEP,YAAac,EACbZ,kBACEA,EAAoBA,IAAsB,KAE5CvJ,QAAS,kBAAMsK,MALVH,EAAQzK,WASnB,IAAK,QACH,OACE,eAAC+J,GAAD,CAEEJ,YAAac,EACbZ,kBACEA,EAAoBA,IAAsB,KAE5CvJ,QAAS,kBAAMsK,MALVH,EAAQzK,aAWvB,OAAQuK,GACN,KAAK,EACH,OAAOG,EAAYD,EAASL,EAAQS,aAAc,KAAM,MAG1D,KAAK,EACH,IAAMC,EAAkB3H,EAAW6D,GAAoBxE,MAEjDuI,EAAsB3B,GAC1B0B,EACAxB,GAYI0B,EAT2BD,EAAoBpH,KACnD,SAAC6F,GACC,OAAOA,EAAShH,SAKOyI,OAAOH,GAEgBjD,MAChD,SAACrF,GAAD,OAAW6H,IAAe7H,KAGtBqH,EAAoBqB,GACxBH,EACAzB,EACAwB,EACAzH,EACAF,EACA6D,GAqCF,OAAO0D,EACLD,EACAL,EAAQS,cApCuB,WAC/B,OAAOG,EACHG,GACEtB,EACAQ,EACAI,EAAQzK,WAEV,QAGiB,WAWrB,MAVqB6J,EAAkBhC,MAAK,SAACuD,GAC3C,OACU,OAARA,QAAQ,IAARA,OAAA,EAAAA,EAAU5I,SAAU6H,IACZ,OAARe,QAAQ,IAARA,OAAA,EAAAA,EAAUpL,aAAcyK,EAAQzK,WACf,SAAjByK,EAAQ3C,OACW,IAAnB2C,EAAQb,UAcV,OAAO,KARPzJ,EAAS,CACPI,KAAM,eACNC,QAAS,CACPgC,MAAO6H,EACPrK,UAAWyK,EAAQzK,oBAiBjC,OAAO,qCAAGwK,IAEZ,QACE,OAAO,OAKPW,GAA4B,SAChCtB,EACAQ,EACArK,GAeA,OAbiB6J,EAAkBxB,QAAO,SAACmB,GACzC,OAAe,OAARA,QAAQ,IAARA,OAAA,EAAAA,EAAUhH,SAAU6H,IAAsB,OAARb,QAAQ,IAARA,OAAA,EAAAA,EAAUxJ,aAAcA,KAGnC2D,KAAI,SAAC6F,GACnC,OAAIA,EACoBA,EAAdxJ,UAGD,SAWPkL,GAAuB,SAC3BH,EACAzB,EACA+B,EACAhI,EACAF,EACAC,GAEA,IAAMkI,EAAWhC,EAAUG,OAAO4B,GAE5BE,EAAoBR,EACvBpH,KAAI,SAAC6F,GACJ,IAAQxJ,EAAqBwJ,EAArBxJ,UAAWwC,EAAUgH,EAAVhH,MACbgJ,EAAkBC,GAAgBH,EAAUtL,GAC5C0L,EAAWpC,EAAUG,OAAOjH,GAC5BmJ,EAAoBC,GAAqB5L,GACzC6L,EAAkBJ,GAAgBC,EAAUC,GAClD,OAAIH,EAC0C,CAC1CxL,YACAwC,MAAO6I,GAIAQ,EACmC,CAC1C7L,UAAW2L,EACXnJ,SAIK,QAGV6F,QAAO,SAACyD,GAAD,OAAqC,OAAlBA,KAE7B,OAAQzI,EAAU9C,MAChB,IAAK,wBAIH,MAA2B,WAHN4C,EAAWC,GAAgBc,UACRC,aAG/BoH,EAEA,GAGX,QACE,MAAO,KAIPE,GAAkB,SAAC/D,EAAgB1H,GACvC,GAAkB,eAAd0H,EAAKI,KAAuB,CAC9B,GAAkB,SAAd9H,GAAsC,WAAdA,EAAwB,CAAC,IAAD,IAC5C+L,KAAgB,UAAArE,EAAK8C,mBAAL,eAAkB3C,MACtC,SAAC4C,GAAD,MAA8B,WAAjBA,EAAQ3C,SAIjBkE,KAAc,UAAAtE,EAAK8C,mBAAL,eAAkB3C,MACpC,SAAC4C,GAAD,MAA8B,SAAjBA,EAAQ3C,SAKvB,OADoBiE,GAAiBC,EAGrC,OAAO,EAGX,OAAO,GAGHJ,GAAuB,SAAC5L,GAC5B,OAAQA,GACN,IAAK,MACH,MAAO,SAET,IAAK,SACH,MAAO,MAET,IAAK,OACH,MAAO,QAET,IAAK,QACH,MAAO,SGnlBPiM,GAAOpM,KAAOC,IAAV,2DAAGD,CAAH,oDAIJqM,GAAWrM,KAAOC,IAAV,+DAAGD,CAAH,iPAWF,SAACE,GACT,GAAmB,aAAfA,EAAM4K,KACR,MAAO,yBAIS,SAAC5K,GACnB,GAAIA,EAAMoC,kBACR,MAAO,0BAKPgK,GAAiBtM,KAAOC,IAAV,qEAAGD,CAAH,0hBAaV,SAACE,GACP,MAAM,GAAN,OAAiC,GAAvB6B,OAAO7B,EAAM8B,QAAe,GAAtC,SAGQ,SAAC9B,GACT,MAAM,GAAN,OAAiC,GAAvB6B,OAAO7B,EAAM+B,QAAe,GAAtC,SAqBEsK,GAAcvM,KAAOC,IAAV,kEAAGD,CAAH,sGAGP,SAACE,GACP,MAAM,GAAN,OAAiC,GAAvB6B,OAAO7B,EAAM8B,QAAvB,SAGQ,SAAC9B,GACT,MAAM,GAAN,OAAiC,GAAvB6B,OAAO7B,EAAM+B,QAAe,GAAtC,SAIEuK,GAAYxM,KAAOC,IAAV,gEAAGD,CAAH,2TA6GFyM,GAAoB,SAACvL,GAChC,IACEuI,EAOEvI,EAPFuI,UACAnG,EAMEpC,EANFoC,WACA6D,EAKEjG,EALFiG,mBACA3D,EAIEtC,EAJFsC,UACAkJ,EAGExL,EAHFwL,UACAxF,EAEEhG,EAFFgG,eACAqD,EACErJ,EADFqJ,QAEIoC,EAAiBlD,EAAUmD,MAE3BlC,IAAoBpH,EAAW6D,GAsNrC,OApNuBwF,EAAe7I,KAAI,SAAC0G,GACzC,IAAMC,EAAahB,EAAUG,OAAOY,GACpC,EAAoBA,EAAWrF,MAAM,KAArC,oBAAOC,EAAP,KAAYC,EAAZ,KAIMwH,EACJ,uCACGzE,GAAeoC,EAAYlH,EAAY6D,EAAoB3D,GAC3DkF,GACC8B,EACAkC,EACAxF,EACAC,GAEDS,GAAS6C,EAAYrF,EAAKC,MAIzByH,EACJ,uCACG1E,GAAeoC,EAAYlH,EAAY6D,EAAoB3D,GAC3DkF,GACC8B,EACAkC,EACAxF,EACAC,MAKA4F,EAAmB,qCAAGnF,GAAS6C,EAAYrF,EAAKC,KAUhD2H,EAzFa,SACrBvK,EACAoK,EACArC,GAEA,OAAQ/H,GACN,KAAK,EACH,OAAOoK,EAET,KAAK,EACH,IAAMvH,EAAaC,SAASC,eAAe,SAC3C,OAAQF,GACN,KAAK,KACH,OAAOuH,EAET,QACE,MAAoBrC,EAAWrF,MAAM,KAArC,oBAAOC,EAAP,KAAYC,EAAZ,KAQA,OANeK,KAASC,aACtB,eAAC4G,GAAD,CAAavK,OAAQoD,EAAKnD,OAAQoD,EAAlC,SACE,eAACmH,GAAD,UAAYK,MAEdvH,GAMR,QACE,OAAO,MA4DW2H,CAnJI,SAC1B3J,EACAkH,EACA3C,EACAqF,EACA1J,GAEA,IAYM2J,EAA8C,IAZ7B7E,OAAOC,QAAQjF,GAGnCkF,QAAO,SAACC,GACP,IAAS9E,EAAT,aAAuB8E,EAAvB,MACA,OAAO9E,EAAWhB,QAAU6H,GAAkC,WAApB7G,EAAWsE,QAEtDnE,KAAI,SAAC2E,GAEJ,OADA,aAAuBA,EAAvB,SAIqChF,OAEnC2J,EAAyC,IAAzBvF,EAAKE,SAAStE,OAE9B4J,EAAc/E,OAAOC,QAAQ2E,GAAY1E,QAC7C,qDAAmC7F,QAAU6H,KAEzC8C,EAAwC,IAAvBD,EAAY5J,OAC7B8J,EAAoBF,EAAY5J,OAEhC+J,EAAyBhK,EAAU9C,KAAKqF,SAAS,qBAavD,QAAQ,GACN,KANAuH,GACAH,GACAC,GACAI,EAIE,OAAO,EAGT,KAjBwC,IAAtBD,EAkBlB,KAfAD,GAAkBH,IAAoBK,EAgBtC,KAfsBF,GAAkBF,EAgBtC,OAAO,EAET,QACE,OAAO,GAsFcK,CACrBnK,EACAkH,EACAC,EACAiC,EACAlJ,GAGiDqJ,EAAUrC,GAEvDkD,EAAiBxM,EAAMsC,UAAUmK,sBAEjCrL,EAAiB,OAAGoL,QAAH,IAAGA,OAAH,EAAGA,EAAgB3H,SAASyE,GAEnD,OAAQE,GACN,KAAK,EACH,OACE,gBAAC0B,GAAD,WACE,gBAACC,GAAD,CACE/J,kBAAmBA,EACnBwI,KAAMP,EAAQS,aAFhB,UAIGgC,EAEyB,aAAzBzC,EAAQS,aAAR,UAAyC5F,EAAzC,YAAgDC,GAAS,QAEvC,eAApBoF,EAAWxC,KACV,eAAC,GAAD,CAASuC,WAAYA,IACnB,OAXN,UAAcpF,EAAd,YAAqBC,IAezB,KAAK,EACH,IACA,EADwB/B,EAAW6D,GAAoBxE,MACZwC,MAAM,KAAjD,oBAAOyI,EAAP,KAAgBC,EAAhB,KAUA,QAPErK,EAAU9C,KAAKqF,SAAS,sBACL,yBAAnBvC,EAAU9C,OAIqBkN,IAAYxI,GAAOyI,IAAYxI,GAG9D,KAAK,EACH,IAAMC,EAAaC,SAASC,eAAe,SAE3C,OAAQF,GACN,KAAK,KACH,OAAO,KAGT,QACE,IAGMgI,EAAwC,IAH1BhF,OAAOC,QAAQmE,GAAWlE,QAC5C,qDAAmC7F,QAAU6H,KAEZ/G,OAiB7B0J,EAA8C,IAf7B7E,OAAOC,QAAQjF,GAGnCkF,QAAO,SAACC,GACP,IAAS9E,EAAT,aAAuB8E,EAAvB,MACA,OACE9E,EAAWhB,QAAU6H,GACD,WAApB7G,EAAWsE,QAGdnE,KAAI,SAAC2E,GAEJ,OADA,aAAuBA,EAAvB,SAIqChF,OAEnCgH,EAAahB,EAAUG,OAAOY,GAC9B4C,EAA+C,IAA/B3C,EAAW1C,SAAStE,OAEpC+J,EACJhK,EAAU9C,KAAKqF,SAAS,qBAQ1B,OALEuH,GACAH,GACAC,GACAI,GAGA,KAAK,EACH,OACE,gBAAC,KAAM3H,SAAP,WACE,gBAACuG,GAAD,WACE,eAACC,GAAD,CACE/J,kBAAmBA,EACnBwI,KAAMP,EAAQS,aAFhB,SAI4B,aAAzBT,EAAQS,aAAR,UACM5F,EADN,YACaC,GACV,OAEe,eAApBoF,EAAWxC,KACV,eAAC,GAAD,CAASuC,WAAYA,IACnB,OAXN,UAAcpF,EAAd,YAAqBC,IAcpBK,KAASC,aACR,qCACE,eAAC2G,GAAD,CAAgBtK,OAAQoD,EAAKnD,OAAQoD,EAArC,SACG2H,MAGL1H,KArBJ,UAAwBF,EAAxB,YAA+BC,IA0BnC,KAAK,EACH,OACE,gBAAC,KAAMQ,SAAP,WACE,gBAACuG,GAAD,WACE,gBAACC,GAAD,CACE/J,kBAAmBA,EACnBwI,KAAMP,EAAQS,aAFhB,UAI4B,aAAzBT,EAAQS,aAAR,UACM5F,EADN,YACaC,GACV,KACH0H,KAEkB,eAApBtC,EAAWxC,KACV,eAAC,GAAD,CAASuC,WAAYA,IACnB,OAZN,UAAcpF,EAAd,YAAqBC,IAepBK,KAASC,aACR,qCACE,eAAC2G,GAAD,CAAgBtK,OAAQoD,EAAKnD,OAAQoD,EAArC,SACGyH,MAGLxH,KAtBJ,UAAwBF,EAAxB,YAA+BC,KAgC3C,KAAK,EACH,OACE,gBAAC+G,GAAD,WACE,gBAACC,GAAD,CACE/J,kBAAmBA,EACnBwI,KAAMP,EAAQS,aAFhB,UAIGgC,EAEyB,aAAzBzC,EAAQS,aAAR,UACM5F,EADN,YACaC,GACV,QAEe,eAApBoF,EAAWxC,KACV,eAAC,GAAD,CAASuC,WAAYA,IACnB,OAbN,UAAcpF,EAAd,YAAqBC,IAkBzB,QACE,OAAO,WCtabyI,GAAW9N,KAAOC,IAAV,+DAAGD,CAAH,iiBACD,SAACE,GACV,GAAmB,aAAfA,EAAM4K,KACR,MAAO,yBAUc,SAAC5K,GACxB,MAAM,UAAN,OAAiBA,EAAMmF,KAAvB,cAQkB,SAACnF,GACnB,GAAmB,UAAfA,EAAM4K,KACR,MAAM,OAAN,OCrCS,qhVDqCT,QASOiD,GAAW,WACtB,IAAM7M,EAAQD,cAAY,SAACC,GAAD,uBACrBA,MAEC8M,EAAS9M,EAAMqJ,QAEf0D,EADoBD,EAAOE,YAAzB7I,KACiB,EAEzB,OACE,eAACyI,GAAD,CAAuBzI,KAAM4I,EAAQnD,KAAMkD,EAAOhD,aAAlD,SACGyB,GAAkBvL,IADN,S,QE3CbiN,GAAiBnO,KAAOC,IAAV,qEAAGD,CAAH,uEAIdoO,GAAapO,KAAOC,IAAV,iEAAGD,CAAH,2JAMM,SAACE,GACnB,OAAIA,EAAMmO,SACD,UACK,UAILC,GAAc,SAACpO,GAC1B,IAAQoD,EAAerC,cAAY,SAACC,GAAD,uBAC9BA,MADGoC,WAIR,OACE,eAAC6K,GAAD,UACGI,GAAcjL,EAAYpD,EAAM8D,OAAOF,KACtC,SAAC0K,EAA2BxK,GAC1B,OACE,eAACoK,GAAD,CAAwBC,SAAUG,GAAjBxK,SAQvBuK,GAAgB,SAACjL,EAA4BU,GACjD,IAAMyK,EAAeC,GAAgBpL,EAAYU,GAajD,OAZ0B,IAAI2K,MA3CN,GA2C+BC,KAAK,GAEbC,QAC7C,SAACC,EAAMC,EAAU/K,GACf,MACQ,GAAN,oBAAW8K,GADT9K,EAAQyK,EACV,EAAiB,GAEjB,EAAiB,MAGrB,KAKEC,GAAkB,SACtBrG,EACA9E,GAEA,OAAO8E,EAAY9E,GAAgByL,QCrD/BC,GAAgBjP,KAAOC,IAAV,mEAAGD,CAAH,yHAObkP,GAAelP,KAAOC,IAAV,kEAAGD,CAAH,6GAQZmP,GAAQnP,KAAOC,IAAV,2DAAGD,CAAH,iMAMW,SAACE,GACnB,OAAQA,EAAMQ,MACZ,IAAK,SACH,MAAM,OAAN,OAAcsO,GAAd,KAGF,IAAK,SACH,MAAM,OAAN,OAAcI,GAAd,KAGF,IAAK,SACH,MAAM,OAAN,OAAcC,GAAd,SAIK,SAACnP,GACV,IAA2B,IAAvBA,EAAMoP,aACR,MAAO,oBAKPC,GAAUvP,KAAOC,IAAV,6DAAGD,CAAH,uEAKAwP,GAAY,SAACtP,GACxB,IAAMI,EAAWC,eAKX8D,EAJiBpD,cAAY,SAACC,GAAD,uBAC9BA,MADGoC,WAIoCpD,EAAM8D,OAAOK,UAEzD,OACE,gBAAC4K,GAAD,WACE,gBAACC,GAAD,WACE,eAACC,GAAD,CACEzO,KAAK,SACL4O,aAAyC,WAA3BjL,EAAUC,aACxB7D,QAAS,WACPH,EAAS,CACPI,KAAM,cACNC,QAAS,CAAED,KAAM,eAIvB,gBAAC6O,GAAD,iBAAalL,EAAS,QAAc,QAEtC,gBAAC6K,GAAD,WACE,eAACC,GAAD,CACEzO,KAAK,SACL4O,aAAyC,WAA3BjL,EAAUC,aACxB7D,QAAS,WACPH,EAAS,CACPI,KAAM,cACNC,QAAS,CAAED,KAAM,eAIvB,gBAAC6O,GAAD,iBAAalL,EAAS,QAAc,QAEtC,gBAAC6K,GAAD,WACE,eAACC,GAAD,CACEzO,KAAK,SACL4O,aAAyC,WAA3BjL,EAAUC,aACxB7D,QAAS,WACPH,EAAS,CACPI,KAAM,cACNC,QAAS,CAAED,KAAM,eAIvB,gBAAC6O,GAAD,iBAAalL,EAAS,QAAc,QAGtC,eAAC6K,GAAD,IACA,eAACA,GAAD,QClGAO,GAAmBzP,KAAOC,IAAV,uEAAGD,CAAH,kPAahB0P,GAAkB1P,KAAOC,IAAV,sEAAGD,CAAH,wRAUC,SAACE,GACnB,MAAM,OAAN,OAAcA,EAAMkC,MAApB,QAIEuN,GAAS3P,KAAOC,IAAV,6DAAGD,CAAH,+JAUN4P,GAAe5P,aAAO2P,IAAV,mEAAG3P,CAAH,mEAKZ6P,GAAkB7P,aAAO2P,IAAV,sEAAG3P,CAAH,uDAIf8P,GAAM9P,KAAOC,IAAV,0DAAGD,CAAH,uEAKI+P,GAAe,WAC1B,MAA2C9O,cAAY,SAACC,GAAD,uBAClDA,MADGiG,EAAR,EAAQA,mBAAoB7D,EAA5B,EAA4BA,WAGtBN,EAAkB,CAACC,GAAQC,GAASC,GAASC,IAI7C4M,EACJ,eAACN,GAAD,CAAiBtN,MAAOY,EAAgBmE,GAAxC,mBACMA,EAAqB,KAGvB6H,EACJ,gBAACY,GAAD,iEAEE,eAAC,GAAD,CAAa5L,MAAOmD,OAGlB9C,EACJ,eAACwL,GAAD,UACE,eAAC,GAAD,CAAW7L,MAAOmD,MAMtB,SAFsB7D,EAAW6D,IAG/B,KAAK,EACH,OACE,gBAACsI,GAAD,WACE,gBAACK,GAAD,WACGE,EACAhB,KAEH,eAACc,GAAD,UAAMzL,OAIZ,KAAK,EACH,OACE,eAACoL,GAAD,UACE,gBAACK,GAAD,WACGE,EACD,eAACJ,GAAD,UAAe,iDCvGrBD,GAAS3P,KAAOC,IAAV,4DAAGD,CAAH,mRAcCiQ,GAAa,WAExB,IACA,EAA+BC,mBADG,IAClC,oBAAOC,EAAP,KAAeC,EAAf,KAEA,EAAkDnP,cAChD,SAACC,GAAD,uBACKA,MAFCC,EAAR,EAAQA,KAAMqC,EAAd,EAAcA,UAAW6M,EAAzB,EAAyBA,SAAUC,EAAnC,EAAmCA,WAM7BC,EAAYC,GAAchN,EAAW6M,EAAUlP,EAAMmP,GAe3D,OAbAG,qBAAU,WACRL,GAAa,WACX,OAAI5M,EAAU9C,KAAKqF,SAAS,qBACH,sBAAnBvC,EAAU9C,KACL6P,EAED,GAAN,OAPY,+CAOZ,aAA0BA,GAGrBA,OAGV,CAAC/M,EAAU9C,KAAX,OAAiB2P,QAAjB,IAAiBA,OAAjB,EAAiBA,EAAU3P,KAAM6P,IAElC,uCACE,eAAC,GAAD,UAASJ,IACT,eAAC,GAAD,QAKAK,GAAgB,SACpBhN,EACA6M,EACAlP,EACAmP,GAEA,OAAQ9M,EAAU9C,MAChB,IAAK,uBACH,MAAO,4EACT,IAAK,yBACH,MAAO,gEACT,IAAK,uBACH,MAAO,0GACT,IAAK,wBACH,MAAO,0GAIT,IAAK,oCACH,MAAO,4EAET,IAAK,8BACH,MAAO,8FAGT,IAAK,qCACL,IAAK,oBACH,cAAQ2P,QAAR,IAAQA,OAAR,EAAQA,EAAU3P,MAChB,IAAK,iBACH,MAAO,0GAGT,IAAK,mBACH,OAAQS,GACN,KAAK,EACL,KAAK,EACH,MAAM,wCAAN,OAAiBA,EAAjB,8NAEF,KAAK,EACH,MAAM,wCAAN,OAAiBA,EAAjB,4HAEF,KAAK,EACH,MAAM,wCAAN,OAAiBA,EAAjB,6IAEF,QACE,MAAO,2LAGb,QACE,MAAO,gEAKb,IAAK,wBACH,MAAO,6HAET,IAAK,YACH,MAAO,qJAET,IAAK,UACH,OAAOmP,EACT,QACE,MAAO,KCjHPI,ICMkB1Q,KAAOC,IAAV,sEAAGD,CAAH,iPAQM,SAACE,GACxB,MAAM,UAAN,OAAiBA,EAAMyQ,OAAvB,cAKoB3Q,KAAOC,IAAV,sEAAGD,CAAH,kHAOGA,KAAOC,IAAV,sEAAGD,CAAH,iNAYEA,KAAOC,IAAV,qEAAGD,CAAH,wSDvCFA,KAAOC,IAAV,gEAAGD,CAAH,gDAIF4Q,GAAY,WACvB,IAAMN,EAAarP,cAAY,SAACC,GAAD,OAAkBA,EAAMoP,cACvD,OACE,qCACE,gBAACI,GAAD,yFAA2BJ,QEX3BO,GAAc7Q,KAAOc,OAAV,kEAAGd,CAAH,gEAKJ8Q,GAAc,WACzB,IAAMxQ,EAAWC,eACjB,OACE,qCACE,gBAACsQ,GAAD,CACEpQ,QAAS,WACPH,EAAS,CAAEI,KAAM,wBAFrB,UAKG,IALH,sE,QCeAqQ,GAAwB,SAACC,GAC7B,IAAMC,EAA6B,CACjChJ,KAAM,aACNF,SAAU,IAGRmJ,EAAoC,GAMxC,OAJAF,EAASG,SAAQ,SAACtJ,GAChBqJ,EAAkBrJ,GAAQoJ,KAGrBC,GAMHE,GAAyB,SAC7BC,EACArD,GACoB,IAAD,EACbsD,EAAU,UAAMtD,EAAOuD,WAAWnM,IAAxB,YAA+B4I,EAAOuD,WAAWlM,MAC3DmM,EAAW,UAAMxD,EAAOE,YAAY9I,IAAzB,YAAgC4I,EAAOE,YAAY7I,MAkBpE,OAN6B,6BACxBgM,GADwB,wBAE1BC,EAZ0B,CAC3BrJ,KAAM,QACNF,SAAU,KAQiB,eAG1ByJ,EAR4B,CAC7BvJ,KAAM,SACNF,SAAU,KAGiB,KAYzB0J,GAAgB,SACpBJ,EACArD,GAOA,IAAM0D,EAAuB1D,EAAO2D,iBAAiB7N,KACnD,SAAC8N,GACC,IAAQjP,EAAuBiP,EAAvBjP,MAAOgI,EAAgBiH,EAAhBjH,YACTkH,EAAS,UAAMlP,EAAMyC,IAAZ,YAAmBzC,EAAM0C,MAElCyM,EAAqBT,EAAWQ,GAEtC,MAAgC,eAA5BC,EAAmB7J,KAMd,CAAC4J,EALa,6BAChBC,GADgB,IAEnBnH,YAAaA,KAKR,CAACkH,EAAWC,MAKnBC,EACJzJ,OAAO0J,YAAYN,GAGrB,OADyB,6BAAQL,GAAeU,IC5B5CE,GAAW,SACfjB,EACAkB,GAEA,IAAMC,EAAoBnB,EAASlN,KACjC,SAACsO,GACC,mBAAsBA,EAAtB,GAAOpO,EAAP,KAAc6D,EAAd,KAMA,MAAO,CAAC7D,EAJsB,6BACzB6D,GADyB,IAE5BE,SAAU,CAACmK,EAAYxN,YAQ7B,OAF4B4D,OAAO0J,YAAYG,IAS3CE,GAAkB,SACtB5I,EACAyI,GAEA,IAMMI,EANgBhK,OAAOC,QAAQkB,GAMAjB,QACnC,SAACmB,GACC,IAASM,EAAT,aAAiBN,EAAjB,MAEA,MAAqB,eAAdM,EAAKhC,MAAkD,IAAzBgC,EAAKlC,SAAStE,UAIjD8O,EAAqBD,EAAe7O,OACpC+O,EAAoBN,EAAYvB,OAEhC8B,EAAiBD,EAAoBD,EAGrCG,EAAuBD,EACzBD,EAHyBD,EAM7B,IAAKE,EAAgB,CAAC,IAAD,EACbE,EAAQ,UAAGT,EAAYxN,YAAf,aAAG,EAAkBuD,KACnCpD,QAAQ+N,MAAR,iBAAwBD,EAAxB,4BAsBF,OAhB+B,IAAIhE,MAAM+D,GACtC9D,KAAK,GACLC,QAAO,SAACgE,GACP,IAAMC,EAAeC,GAAgBF,EAAaN,GAElD,OAAIM,EACI,GAAN,oBAAWA,GAAX,CAAwBC,IAEjB,CAACA,KAET,IAEwBhP,KAAI,SAACkP,GAChC,OAAOV,EAAeU,OAUpBD,GAAkB,SAAlBA,EACJE,EACAC,GAEA,IAAMC,EAAS9R,KAAKC,MAAMD,KAAKE,SAAW2R,GAE1C,OAAID,GACKA,EAAUlN,SAASoN,GACtBJ,EAAgBE,EAAWC,GAGxBC,GCzKEC,GAAe,SAACpF,GAC3B,IAAMpB,EAAQyG,GAAarF,GAI3B,MADkB,CAAEpB,QAAOhD,ODiCF,SACzB0J,EACAtF,GAQA,IACMuF,EAvCY,SAACvF,GACnB,MAAO,CACL,CACEtJ,KAAM,CACJuD,KAAM,SACNrG,UAAWoM,EAAOwF,eAEpB7C,OAAQ3C,EAAOyF,mBAEjB,CACE/O,KAAM,CACJuD,KAAM,SACNrG,UAAWoM,EAAOwF,eAEpB7C,OAAQ3C,EAAO0F,mBAEjB,CACEhP,KAAM,CACJuD,KAAM,SACNrG,UAAWoM,EAAOwF,eAEpB7C,OAAQ3C,EAAO2F,qBAiBDC,CAAY5F,GACMa,QAAO,SAACgF,EAAa3B,GACvD,IAAM4B,EAAyB,6BAAQR,GAAmBO,GAEpDE,EAAgB1B,GACpByB,EACA5B,GAMI8B,EAA4B/B,GAAS8B,EAAe7B,GAK1D,OAJ6B,6BACxB2B,GACAG,KAGJ,IAGH,OADmB,6BAAQV,GAAmBC,GChEjBU,CFIF,SAC3BjD,EACAhD,GAEA,IAAMkG,EAAkBnD,GAAsBC,GACxCmD,EAAsB1C,GAAcyC,EAAiBlG,GAK3D,OAJ4BoD,GAC1B+C,EACAnG,GEbqBoG,CAAcxH,EAAOoB,GACaA,KAQrDqF,GAAe,SAACrF,GAMpB,IALA,IAAMqG,EAAQrG,EAAOE,YAAY9I,IAC3B6I,EAASD,EAAOE,YAAY7I,KAE9BiP,EAA2B,GAEtBlP,EAAM,EAAGA,GAAOiP,EAAOjP,IAC9B,IAAK,IAAIC,EAAO,EAAGA,GAAQ4I,EAAQ5I,IAAQ,CACzC,IAAMrB,EAAa,UAAMoB,EAAN,YAAaC,GAChCiP,EAAUC,KAAKvQ,GAInB,OAAOsQ,GC3BIE,GAAa,SAACxG,GACzB,IAAMuD,EAAU,UAAMvD,EAAOuD,WAAWnM,IAAxB,YAA+B4I,EAAOuD,WAAWlM,MAC3DgD,EAAc,IAAIsG,MAAMX,EAAOyG,eAClC7F,KAAK,GACL9K,KAAI,SAACb,EAAQe,GASZ,MAAO,CAACA,EARW,CACjBiE,KAAM,SACN+G,OAAQhB,EAAO0G,oBACf9Q,YAAaI,EACbrB,MAAO4O,EAEPlN,UAAW,CAAE+K,OAAQ,EAAGC,OAAQ,EAAGL,OAAQ,EAAG1K,aAAc,WAMlE,OADmCgE,OAAO0J,YAAY3J,ICV3CsM,GAAa,SACxBlL,EACAuE,GAEA,IAAMsE,EAAiBsC,GAAanL,GAC9BoL,EAAgBC,GAAiBxC,EAAgBtE,GAEvD,OADmB+G,GAAeF,EAAe7G,IAQ7C4G,GAAe,SAACnL,GAQpB,OAPkBnB,OAAOC,QAAQkB,EAAUG,QACVpB,QAC/B,SAACmB,GACC,IAASM,EAAT,aAAiBN,EAAjB,MACA,MAAqB,eAAdM,EAAKhC,MAAkD,IAAzBgC,EAAKlC,SAAStE,WASnDqR,GAAmB,SACvBxC,EACAtE,GAEA,IAAMuE,EAAqBD,EAAe7O,OACpCuR,EAAgBhH,EAAOgH,cAEvBvC,EAAiBuC,EAAgBzC,EAGjCG,EAAuBD,EACzBuC,EAHyBzC,EA4B7B,OAtBKE,GACH5N,QAAQ+N,MAAR,uCAI6B,IAAIjE,MAAM+D,GACtC9D,KAAK,GACLC,QAAO,SAACgE,GACP,IAAMC,EAAeC,GAAgBF,EAAaN,GAElD,OAAIM,EACI,GAAN,oBAAWA,GAAX,CAAwBC,IAEjB,CAACA,KAET,IAE8BhP,KAAI,SAACkP,GAEtC,OADA,aAAgBV,EAAeU,GAA/B,UAUE+B,GAAiB,SAACF,EAAyB7G,GAC/C,IAAMtB,EAAYmI,EAAc/Q,KAAI,SAACnB,EAAOqB,GAO1C,MAAO,CAACA,EANyB,CAC/BiE,KAAM,QACNgN,MAAO,EACPtS,QACAf,UAAWoM,EAAOwF,mBAMtB,OADkClL,OAAO0J,YAAYtF,IAQjDqG,GAAkB,SAAlBA,EACJE,EACAC,GAEA,IAAMC,EAAS9R,KAAKC,MAAMD,KAAKE,SAAW2R,GAE1C,OAAID,GACKA,EAAUlN,SAASoN,GACtBJ,EAAgBE,EAAWC,GAGxBC,GChEE+B,GApCkB,SAAClH,GAE9B,IAAMmH,EAAwB/B,GAAapF,GAC3C,MAAO,CACLxK,UAAW,CACT9C,KAAM,eACNiN,sBAAuB,KACvB1J,sBAAuB,MAEzB9C,KAAM,EACNmP,WAAY,GACZhN,WAAYkR,GAAWxG,GACvBtB,UAAWiI,GAAWQ,EAAuBnH,GAC7CvE,UAAW0L,EACX9E,SAAU,KACVlJ,mBAAoB,EACpBD,eAAgB,KAChBqD,QAASyD,GAmBeoH,CAfV,SAChBC,EACAC,GAGE,OAAOD,EAQWE,CCtCiB,CACrC5D,iBCFuD,CACvD,CACEhP,MAAO,CAAEyC,IAAK,EAAGC,KAAM,GACvBsF,YAAa,CACX,CACE1C,KAAM,OACN9H,UAAW,UAEb,CACE8H,KAAM,OACN9H,UAAW,UAKjB,CACEwC,MAAO,CAAEyC,IAAK,EAAGC,KAAM,GACvBsF,YAAa,CACX,CACE1C,KAAM,OACN9H,UAAW,UAKjB,CACEwC,MAAO,CAAEyC,IAAK,EAAGC,KAAM,GACvBsF,YAAa,CACX,CACE1C,KAAM,OACN9H,UAAW,UAKjB,CACEwC,MAAO,CAAEyC,IAAK,EAAGC,KAAM,GACvBsF,YAAa,CACX,CACE1C,KAAM,SACN9H,UAAW,OACX4J,QAAQ,KAKd,CACEpH,MAAO,CAAEyC,IAAK,EAAGC,KAAM,GACvBsF,YAAa,CACX,CACE1C,KAAM,OACN9H,UAAW,UAKjB,CACEwC,MAAO,CAAEyC,IAAK,EAAGC,KAAM,GACvBsF,YAAa,CACX,CACE1C,KAAM,OACN9H,UAAW,UAEb,CACE8H,KAAM,OACN9H,UAAW,UAKjB,CACEwC,MAAO,CAAEyC,IAAK,EAAGC,KAAM,GACvBsF,YAAa,CACX,CACE1C,KAAM,SACN9H,UAAW,OACX4J,QAAQ,KAKd,CACEpH,MAAO,CAAEyC,IAAK,EAAGC,KAAM,GACvBsF,YAAa,CACX,CACE1C,KAAM,OACN9H,UAAW,UAKjB,CACEwC,MAAO,CAAEyC,IAAK,EAAGC,KAAM,IACvBsF,YAAa,CACX,CACE1C,KAAM,OACN9H,UAAW,YAKjB,CACEwC,MAAO,CAAEyC,IAAK,EAAGC,KAAM,IACvBsF,YAAa,CACX,CACE1C,KAAM,OACN9H,UAAW,YAIjB,CACEwC,MAAO,CAAEyC,IAAK,EAAGC,KAAM,IACvBsF,YAAa,CACX,CACE1C,KAAM,OACN9H,UAAW,YAIjB,CACEwC,MAAO,CAAEyC,IAAK,EAAGC,KAAM,IACvBsF,YAAa,CACX,CACE1C,KAAM,OACN9H,UAAW,SACX4J,QAAQ,KAId,CACEpH,MAAO,CAAEyC,IAAK,EAAGC,KAAM,IACvBsF,YAAa,CACX,CACE1C,KAAM,OACN9H,UAAW,YAIjB,CACEwC,MAAO,CAAEyC,IAAK,EAAGC,KAAM,IACvBsF,YAAa,CACX,CACE1C,KAAM,OACN9H,UAAW,YAKjB,CACEwC,MAAO,CAAEyC,IAAK,EAAGC,KAAM,IACvBsF,YAAa,CACX,CACE1C,KAAM,OACN9H,UAAW,YAKjB,CACEwC,MAAO,CAAEyC,IAAK,EAAGC,KAAM,IACvBsF,YAAa,CACX,CACE1C,KAAM,OACN9H,UAAW,YAIjB,CACEwC,MAAO,CAAEyC,IAAK,GAAIC,KAAM,IACxBsF,YAAa,CACX,CACE1C,KAAM,OACN9H,UAAW,YAIjB,CACEwC,MAAO,CAAEyC,IAAK,EAAGC,KAAM,GACvBsF,YAAa,CACX,CACE1C,KAAM,OACN9H,UAAW,UAKjB,CACEwC,MAAO,CAAEyC,IAAK,EAAGC,KAAM,GACvBsF,YAAa,CACX,CACE1C,KAAM,OACN9H,UAAW,YAKjB,CACEwC,MAAO,CAAEyC,IAAK,EAAGC,KAAM,GACvBsF,YAAa,CACX,CACE1C,KAAM,OACN9H,UAAW,SACX4J,QAAQ,KAKd,CACEpH,MAAO,CAAEyC,IAAK,EAAGC,KAAM,GACvBsF,YAAa,CACX,CACE1C,KAAM,SACN9H,UAAW,SACX4J,QAAQ,KAId,CACEpH,MAAO,CAAEyC,IAAK,EAAGC,KAAM,GACvBsF,YAAa,CACX,CACE1C,KAAM,OACN9H,UAAW,YAIjB,CACEwC,MAAO,CAAEyC,IAAK,EAAGC,KAAM,GACvBsF,YAAa,CACX,CACE1C,KAAM,OACN9H,UAAW,UAEb,CACE8H,KAAM,OACN9H,UAAW,UAKjB,CACEwC,MAAO,CAAEyC,IAAK,EAAGC,KAAM,GACvBsF,YAAa,CACX,CACE1C,KAAM,SACN9H,UAAW,SACX4J,QAAQ,KAId,CACEpH,MAAO,CAAEyC,IAAK,EAAGC,KAAM,GACvBsF,YAAa,CACX,CACE1C,KAAM,OACN9H,UAAW,YAKjB,CACEwC,MAAO,CAAEyC,IAAK,GAAIC,KAAM,GACxBsF,YAAa,CACX,CACE1C,KAAM,OACN9H,UAAW,YAKjB,CACEwC,MAAO,CAAEyC,IAAK,GAAIC,KAAM,GACxBsF,YAAa,CACX,CACE1C,KAAM,OACN9H,UAAW,YAKjB,CACEwC,MAAO,CAAEyC,IAAK,EAAGC,KAAM,GACvBsF,YAAa,CACX,CACE1C,KAAM,OACN9H,UAAW,YAIjB,CACEwC,MAAO,CAAEyC,IAAK,EAAGC,KAAM,GACvBsF,YAAa,CACX,CACE1C,KAAM,OACN9H,UAAW,UAKjB,CACEwC,MAAO,CAAEyC,IAAK,EAAGC,KAAM,GACvBsF,YAAa,CACX,CACE1C,KAAM,OACN9H,UAAW,UAIjB,CACEwC,MAAO,CAAEyC,IAAK,EAAGC,KAAM,GACvBsF,YAAa,CACX,CACE1C,KAAM,OACN9H,UAAW,OACX4J,QAAQ,GAEV,CACE9B,KAAM,OACN9H,UAAW,SACX4J,QAAQ,KAKd,CACEpH,MAAO,CAAEyC,IAAK,EAAGC,KAAM,GACvBsF,YAAa,CACX,CACE1C,KAAM,OACN9H,UAAW,YAIjB,CACEwC,MAAO,CAAEyC,IAAK,EAAGC,KAAM,GACvBsF,YAAa,CACX,CACE1C,KAAM,OACN9H,UAAW,YAIjB,CACEwC,MAAO,CAAEyC,IAAK,EAAGC,KAAM,GACvBsF,YAAa,CACX,CACE1C,KAAM,OACN9H,UAAW,QAEb,CACE8H,KAAM,OACN9H,UAAW,YAKjB,CACEwC,MAAO,CAAEyC,IAAK,EAAGC,KAAM,GACvBsF,YAAa,CACX,CACE1C,KAAM,OACN9H,UAAW,OACX4J,QAAQ,KAId,CACEpH,MAAO,CAAEyC,IAAK,EAAGC,KAAM,GACvBsF,YAAa,CACX,CACE1C,KAAM,OACN9H,UAAW,YAIjB,CACEwC,MAAO,CAAEyC,IAAK,EAAGC,KAAM,GACvBsF,YAAa,CACX,CACE1C,KAAM,OACN9H,UAAW,SACX4J,QAAQ,KAId,CACEpH,MAAO,CAAEyC,IAAK,EAAGC,KAAM,GACvBsF,YAAa,CACX,CACE1C,KAAM,OACN9H,UAAW,UAIjB,CACEwC,MAAO,CAAEyC,IAAK,EAAGC,KAAM,GACvBsF,YAAa,CACX,CACE1C,KAAM,OACN9H,UAAW,OACX4J,QAAQ,KAId,CACEpH,MAAO,CAAEyC,IAAK,EAAGC,KAAM,GACvBsF,YAAa,CACX,CACE1C,KAAM,OACN9H,UAAW,UAIjB,CACEwC,MAAO,CAAEyC,IAAK,EAAGC,KAAM,GACvBsF,YAAa,CACX,CACE1C,KAAM,OACN9H,UAAW,UAKjB,CACEwC,MAAO,CAAEyC,IAAK,GAAIC,KAAM,GACxBsF,YAAa,CACX,CACE1C,KAAM,OACN9H,UAAW,UAKjB,CACEwC,MAAO,CAAEyC,IAAK,GAAIC,KAAM,GACxBsF,YAAa,CACX,CACE1C,KAAM,SACN9H,UAAW,OACX4J,QAAQ,KAId,CACEpH,MAAO,CAAEyC,IAAK,GAAIC,KAAM,GACxBsF,YAAa,CACX,CACE1C,KAAM,OACN9H,UAAW,UAIjB,CACEwC,MAAO,CAAEyC,IAAK,GAAIC,KAAM,GACxBsF,YAAa,CACX,CACE1C,KAAM,OACN9H,UAAW,UAIjB,CACEwC,MAAO,CAAEyC,IAAK,GAAIC,KAAM,GACxBsF,YAAa,CACX,CACE1C,KAAM,SACN9H,UAAW,OACX4J,QAAQ,KAId,CACEpH,MAAO,CAAEyC,IAAK,GAAIC,KAAM,GACxBsF,YAAa,CACX,CACE1C,KAAM,OACN9H,UAAW,UAIjB,CACEwC,MAAO,CAAEyC,IAAK,GAAIC,KAAM,GACxBsF,YAAa,CACX,CACE1C,KAAM,OACN9H,UAAW,UAIjB,CACEwC,MAAO,CAAEyC,IAAK,GAAIC,KAAM,GACxBsF,YAAa,CACX,CACE1C,KAAM,OACN9H,UAAW,WD3ejBoR,WAAY,CAAEnM,IAAK,EAAGC,KAAM,GAC5B6I,YAAa,CAAE9I,IAAK,GAAIC,KAAM,IAC9BoP,cAAe,EACfC,oBAAqB,EACrBjB,kBAAmB,GACnBC,kBAAmB,GACnBC,mBAAoB,GACpBqB,cAAe,GACfxB,cAAe,SACfxI,aAAc,WEZHwK,GAAe,SAACtU,EAAcuU,GACzC,OAAQA,EAAO/U,MACb,IAAK,qBACH,OAAO,6BACFQ,GADL,IAEEsC,UAAU,6BAAMtC,EAAMsC,WAAb,IAAwB9C,KAAM,2BAG3C,QACE,OAAOQ,I,SCVAwU,GAAsB,SAACxU,GAClC,IAAQoC,EAA8DpC,EAA9DoC,WAAY4D,EAAkDhG,EAAlDgG,eAAgBC,EAAkCjG,EAAlCiG,mBAC5BwO,EAD8DzU,EAAdsC,UAChDmS,gBACFC,EAAgB,6BAAQtS,GAAe4D,GAGvC2O,EAFgBvN,OAAOC,QAAQqN,GAECnS,OAAS,EAI/C,GAAIkS,GAAuC,IAApBA,EAAuB,CAC5C,IAAMG,EACJH,EAAkB,EAAIE,EAJF,EAMhBF,EAAkB,EAGxB,OADA9Q,QAAQC,IAAIgR,GACLA,EAMP,OAHE3O,EAAqB,EAAI0O,EAZL,EAchB1O,EAAqB,G,uBClBlB4O,GAAuB,SAClC7U,EACA8U,GAIA,IAAQ7O,EAAuBjG,EAAvBiG,mBAIR,OAFsB8O,GAAiB/U,EAAO8U,IAG5C,KAAK,EACH,OAAO9U,EAGT,KAAK,EAED,IAAMgV,EAAgBC,GAAmBjV,EAAO8U,GAC1CI,IAAeF,EAAc/O,GAAoB9C,UACpDC,aAMG+R,EAA4B,6BAC7BnV,GAD6B,IAEhCoC,WAAY4S,EACZ1S,UAAU,6BACLtC,EAAMsC,WADF,IAEP9C,KAAM,wBACNiN,sBAAuB,OAEzB0C,SAAU,CAAE3P,KAAM,qCAGd4V,EAA+B,6BAChCpV,GADgC,IAEnCoC,WAAY4S,EACZ1S,UAAU,6BACLtC,EAAMsC,WADF,IAEPS,sBAAuB,KACvBvD,KAEQ,2BAEV2P,SAAU,CAAE3P,KAAM,oCAGpB,OAAQ0V,GACN,KAAK,EACH,OAAOC,EACT,KAAK,EACH,OAAOC,EAGb,MAEF,QACE,OAAOpV,IAKPiV,GAAqB,SACzBjV,EACA8U,GAEA,IAAQ1S,EAAmCpC,EAAnCoC,WAAY6D,EAAuBjG,EAAvBiG,mBACd9C,EAAYf,EAAW6D,GAAoB9C,UAIjD,OAF4BA,EAAUC,eAAiB0R,GAGrD,KAAK,EACH,IAAMO,EAAyC,6BAC1ClS,GAD0C,IAE7CC,aAAc,OAWhB,OARmC,6BAC9BhB,GAD8B,mBAEhC6D,EAFgC,6BAG5B7D,EAAW6D,IAHiB,IAI/B9C,UAAWkS,MAOjB,KAAK,EACH,IAAMC,EAAuC,6BACxCnS,GADwC,IAE3CC,aAAc0R,IAWhB,OARmC,6BAC9B1S,GAD8B,mBAEhC6D,EAFgC,6BAG5B7D,EAAW6D,IAHiB,IAI/B9C,UAAWmS,QASfP,GAAmB,SAAC/U,EAAc8U,GACtC,IACM3R,EADqCnD,EAAnCoC,WAAmCpC,EAAvBiG,oBAC6B9C,UACjD,OAAqB,OAAjB2R,GAC2C,IAA5B3R,EAAU2R,ICnHlBS,GAAmB,SAC9BvV,EACAwV,EACAvW,GAEA,IACEmD,EAKEpC,EALFoC,WACA6D,EAIEjG,EAJFiG,mBACAsC,EAGEvI,EAHFuI,UACAvC,EAEEhG,EAFFgG,eACAwF,EACExL,EADFwL,UAOIiK,EACJzP,GACAA,EAAeC,IACfD,EAAeC,GAAoBnD,MAC/BkD,EAAeC,GAAoBnD,MACnC,KAEA4S,EAAgBD,EAClBjK,EAAUiK,GAAYhU,MACtBW,EAAW6D,GAAoBxE,MAE7B8I,EAAWhC,EAAUG,OAAOgN,GAC5B/K,EAAWpC,EAAUG,OAAO8M,GAC5B5K,EAAoBC,GAAqB5L,GACzC0W,EAAqBC,GAAmBrL,EAAUtL,GAElD4W,EAAqBD,GAAmBjL,EAAUC,GAExD,SAAI+K,IAAsBE,IAOtBD,GAAqB,SAACjP,EAAgB1H,GAC1C,GAAkB,eAAd0H,EAAKI,KAAuB,CAE9B,GAAkB,SAAd9H,GAAsC,WAAdA,EAAwB,CAAC,IAAD,IAC5C6W,KAAc,UAAAnP,EAAK8C,mBAAL,eAAkB3C,MACpC,SAAC4C,GAAD,MAA8B,SAAjBA,EAAQ3C,MAAmB2C,EAAQzK,YAAcA,MAI1D8W,KAAoB,UAAApP,EAAK8C,mBAAL,eAAkB3C,MAC1C,SAAC4C,GAAD,OACkD,KAA9B,SAAjBA,EAAQ3C,MAAmB2C,EAAQb,SACpCa,EAAQzK,YAAcA,MAK1B,OADuB6W,GAAeC,EAGxC,OAAO,IAILlL,GAAuB,SAAC5L,GAC5B,OAAQA,GACN,IAAK,MACH,MAAO,SAET,IAAK,SACH,MAAO,MAET,IAAK,OACH,MAAO,QAET,IAAK,QACH,MAAO,SCpDP+W,GAAwB,SAC5B7O,EACA8O,GAOA,OAL2B7O,OAAOC,QAAQF,GACA+O,MAAK,SAACnU,GAE9C,OADA,aAAwBA,EAAxB,MACmBN,QAAUwU,MC9BpBE,GAAoB,SAACnW,GAChC,IAAQoC,EAA8CpC,EAA9CoC,WAAY6D,EAAkCjG,EAAlCiG,mBAAoBsC,EAAcvI,EAAduI,UAClCD,EAAkBlG,EAAW6D,GAAoBxE,MAiBjDgL,EAhBsBpE,GAC1BC,EACAC,GAMmEjB,QACnE,SAACmB,GACC,IAAQxJ,EAAqBwJ,EAArBxJ,UAAWwC,EAAUgH,EAAVhH,MAEnB,ODlB0B,SAC9BzB,EACAoW,EACAnX,GAEA,IAAQmD,EAAqBpC,EAArBoC,WAAYnC,EAASD,EAATC,KACdoW,EAAad,GAAiBvV,EAAOoW,EAAiBnX,GACtDqX,EAA4B,IAATrW,EACnBsW,EAAoBP,GAAsB5T,EAAYgU,GAG5D,QAAQ,GACN,KAAKC,EAIL,KAPqBC,GAAoBC,EASvC,OAAO,EAET,QACE,OAAO,GCHAC,CAAiBxW,EAAOyB,EAAOxC,MAIM2D,KAAI,SAAC6F,GAEnD,OADkBA,EAAVhH,SAIV,OAAO,6BACFzB,GADL,IAEEmP,SAAU,KACV7M,UAAU,6BAAMtC,EAAMsC,WAAb,IAAwBmK,6BC3BxBgK,GAAsB,SACjCzW,EACAf,GACW,IAAD,EAGJqJ,EAFqCtI,EAAnCoC,WAAmCpC,EAAvBiG,oBAEmCxE,MACjD2U,EAAkBzO,GAAmBW,EAAiBrJ,GAK5D,OAHqB,UACnBe,EAAMsC,UAAUmK,6BADG,aACnB,EAAuC5H,SAASuR,IAGhD,KAAK,EACH,IAAMpB,ECnBqB,SAAChV,EAAcwV,GAC9C,IAAQpT,EAAmCpC,EAAnCoC,WAAY6D,EAAuBjG,EAAvBiG,mBASpB,OAPmB,6BACd7D,GADc,mBAEhB6D,EAFgB,6BAGZ7D,EAAW6D,IAHC,IAIfxE,MAAO+T,MDYekB,CAAkB1W,EAAOoW,GAQ/C,OANqB,6BAChBpW,GADgB,IAEnBsC,UAAU,6BAAMtC,EAAMsC,WAAb,IAAwBmK,sBAAuB,OACxDrK,WAAY4S,EACZ7F,SAAU,CAAE3P,KAAM,0BAKtB,KAAK,EAIL,QACE,OAAOQ,IE7BA2W,GAAa,SAAC3W,EAAcuU,GACvC,OAAQA,EAAO/U,MACb,IAAK,oCACH,OAAO2W,GAAkBnW,GAG3B,IAAK,sBACH,IAAMf,EAAYsV,EAAO9U,QACzB,OAAOgX,GAAoBzW,EAAOf,GAGpC,IAAK,0BACH,OCb6B,SAACe,GAClC,IACEuI,EAMEvI,EANFuI,UACAnG,EAKEpC,EALFoC,WACA6D,EAIEjG,EAJFiG,mBACAhG,EAGED,EAHFC,KACAuL,EAEExL,EAFFwL,UACAlJ,EACEtC,EADFsC,UAGIkT,EAAiBpT,EAAW6D,GAAoBxE,MAChDmV,EAAoBrO,EAAUG,OAAO8M,GACrCc,EAA4B,IAATrW,EAEnB4W,EAAyC,YAAX,OAAjBD,QAAiB,IAAjBA,OAAA,EAAAA,EAAmB7P,MAEhC+P,EACwB,gBAAX,OAAjBF,QAAiB,IAAjBA,OAAA,EAAAA,EAAmB7P,OACnB6P,EAAkB/P,SAAStE,OAAS,EAEhCwU,EAAoB3P,OAAOC,QAAQmE,GAAW1E,MAClD,YAAyB,IAAD,oBACtB,OADsB,UACLrF,QAAU+T,KAKzBwB,IACwB,gBAAX,OAAjBJ,QAAiB,IAAjBA,OAAA,EAAAA,EAAmB7P,QAAyBgQ,GAIlBE,GAAiB3U,EAArCmS,gBAAR,aAA6CnS,EAA7C,KAIA,QAAQ,GACN,KAAKuU,EAOH,OANqB,6BAChB7W,GADgB,IAEnBC,KAAMD,EAAMC,KAAO,EACnBmP,WAAY,gEACZD,SAAU,OAKd,KAAK6H,EAUH,OATqB,6BAChBhX,GADgB,IAEnBC,KAAMD,EAAMC,KAAO,EACnBqC,UAAU,6BACL2U,GADI,IAEPzX,KAAM,sBAER2P,SAAU,CAAE3P,KAAM,8BAKtB,KAAKsX,EAUH,OATqB,6BAChB9W,GADgB,IAEnBC,KAAMD,EAAMC,KAAO,EACnBqC,UAAU,6BACL2U,GADI,IAEPzX,KAAM,yBAER2P,SAAU,CAAE3P,KAAM,kCAKtB,KAAK8W,EACH,IAAMY,EAAkB1C,GAAoBxU,GAU5C,OATqB,6BAChBA,GADgB,IAEnBC,KAAM,EACNqC,UAAU,6BACL2U,GADI,IAEPzX,KAAM,yBAERyG,mBAAoBiR,IAKxB,QAOE,OANqB,6BAChBlX,GADgB,IAEnBC,KAAMD,EAAMC,KAAO,EACnBqC,UAAU,6BAAMtC,EAAMsC,WAAb,IAAwB9C,KAAM,2BACvC2P,SAAU,CAAE3P,KAAM,qCD/Eb2X,CAAoBnX,GAI7B,IAAK,cACH,IAAMoX,EAAyB7C,EAAO9U,QAAQD,KAC9C,OAAOqV,GAAqB7U,EAAOoX,GAGrC,QACE,OAAOpX,IElBA8W,GAAW,SAAC9W,EAAcuU,GACrC,OAAQA,EAAO/U,MACb,IAAK,yBACH,OAAO6X,GAA4BrX,GAGrC,IAAK,eACH,OAAOsX,GAAiBtX,GAG1B,IAAK,eACH,OAAOuX,GAAkBvX,GAG3B,IAAK,iBACH,OAAOwX,GAAoBxX,GAG7B,QACE,OAAOA,IAIPsX,GAAmB,SAACtX,GACxB,IAAQuI,EAA8CvI,EAA9CuI,UAAWtC,EAAmCjG,EAAnCiG,mBACbwR,EADgDzX,EAAfoC,WACH6D,GAAoBxE,MAGlDiW,ECtCgB,SAAC/Q,GACvB,GAAkB,eAAdA,EAAKI,KAAuB,CAI9B,IAAM4Q,EAAuBhR,EAAKE,SAASjE,KAAI,SAACiE,GAC9C,OAAIA,EACwB,6BACrBA,GADqB,IAExBnG,UAAW,SAIN,QASX,OAL0B,6BACrBiG,GADqB,IAExBE,SAAU8Q,IAKZ,OAAOhR,EDcgBiR,CAFRrP,EAAUG,OAAO+O,IAI5BI,EAAuB,6BACxBtP,GADwB,IAE3BG,OAAO,6BAAMH,EAAUG,QAAjB,mBAA0B+O,EAAmBC,MAGrD,OAAO,6BACF1X,GADL,IAEEuI,UAAWsP,EACX1I,SAAU,CAAE3P,KAAM,gBAIhB+X,GAAoB,SAACvX,GACzB,IAAQuI,EAA8CvI,EAA9CuI,UAAWtC,EAAmCjG,EAAnCiG,mBAAoB7D,EAAepC,EAAfoC,WACjCL,EAASK,EAAW6D,GAEpB6R,EAAYvP,EAAUG,OAAO3G,EAAON,OAAOoF,SAE3CkR,EAAiB,CACrB7J,OAAQ,EACRJ,OAAQ,EACRK,OAAQ,EACR/K,aAAc,MAGZ4U,EAAqCF,EAAUnK,QACjD,SAACsK,EAAUC,GACT,OAAIA,EACkBD,EAASC,EAAYnR,MAGhC,6BACFkR,GADL,mBAEGC,EAAYnR,KAAOkR,EAASC,EAAYnR,MAAQ,IAG5C,6BAAKkR,GAAZ,mBAAuBC,EAAYnR,KAAO,IAEhCgR,IAEhBA,GAGII,EAAY,6BACbpW,EAAOoB,WADM,IAEhB+K,OAAQnM,EAAOoB,UAAU+K,OAAS8J,EAAoB9J,OACtDJ,OAAQ/L,EAAOoB,UAAU2K,OAASkK,EAAoBlK,OACtDK,OAAQpM,EAAOoB,UAAUgL,OAAS6J,EAAoB7J,SAGlDiK,EAAS,6BACVrW,GADU,IAEboB,UAAWgV,IAGPnD,EAA6B,6BAC9B5S,GAD8B,mBAEhC6D,EAAqBmS,IAGxB,OAAO,6BACFpY,GADL,IAEEmP,SAAU,CAAE3P,KAAM,eAClB4C,WAAY4S,KAIVwC,GAAsB,SAACxX,GAC3B,IAAQuI,EAA8CvI,EAA9CuI,UAAWtC,EAAmCjG,EAAnCiG,mBAEbwR,EAFgDzX,EAAfoC,WAEH6D,GAAoBxE,MAIlD4W,EElHkB,SAAC9N,GAIzB,MAAsB,eAAlBA,EAASxD,KACwB,6BAC9BwD,GAD8B,IAEjC1D,SAAU,KAGA0D,EFwGU+N,CAFP/P,EAAUG,OAAO+O,IAI5BI,EAAuB,6BACxBtP,GADwB,IAE3BG,OAAO,6BACFH,EAAUG,QADT,mBAEH+O,EAAmBY,MAIlBnB,EAAkB1C,GAAoBxU,GAE5C,OAAO,6BACFA,GADL,IAEEuI,UAAWsP,EACXvV,UAAU,6BAAMtC,EAAMsC,WAAb,IAAwB9C,KAAM,yBACvCyG,mBAAoBiR,EACpBjX,KAAM,KAIJoX,GAA8B,SAACrX,GACnC,IAAQuI,EAA8CvI,EAA9CuI,UAAWtC,EAAmCjG,EAAnCiG,mBACbwR,EADgDzX,EAAfoC,WACH6D,GAAoBxE,MAElD8W,EADWhQ,EAAUG,OAAO+O,GACJ5Q,SAG9B,OAFgD,IAAxB0R,EAAahW,QAGnC,KAAK,EAAO,IAAD,EAGT,OAFoD,YAA/B,UAAAgW,EAAa,UAAb,eAAiB7X,YAGpC,KAAK,EACH,OAAO,6BACFV,GADL,IAEEmP,SAAU,CAAE3P,KAAM,eAGtB,KAAK,EACH,OAAO,6BAAKQ,GAAZ,IAAmBmP,SAAU,CAAE3P,KAAM,eAGvC,QACE,OAAOQ,EAIb,KAAK,EACH,OAAO,6BAAKA,GAAZ,IAAmBmP,SAAU,CAAE3P,KAAM,eAGvC,QACE,OAAOQ,IGtKAwY,GAAW,SAACxY,EAAcuU,GACrC,OAAQA,EAAO/U,MACb,IAAK,aAOH,OANiCQ,EAAMoC,WACrCpC,EAAMiG,oBAEJ,SACA,QAGF,IAAK,OACH,OAAO,6BACFjG,GADL,IAEEC,KAAMsU,EAAO9U,QACb6C,UAAU,6BACLtC,EAAMsC,WADF,IAEP9C,KAAM,4BAKZ,IAAK,SACH,OAAO,6BACFQ,GADL,IAEEC,KAAMsU,EAAO9U,QACb6C,UAAU,6BAAMtC,EAAMsC,WAAb,IAAwB9C,KAAM,2BACvC2P,SAAU,CAAE3P,KAAM,oCAM1B,QACE,OAAOQ,I,uBCZPyY,GAAyB,SAACzY,GAE9B,OAAO,6BACFA,GADL,IAEEC,KAAM,EACNqC,UAAU,6BACLtC,EAAMsC,WADF,IAEP9C,KAAM,0CAKNkZ,GAAyB,SAAC1Y,GAC9B,OAAO,6BACFA,GADL,IAEEC,KAAM,EACNqC,UAAU,6BACLtC,EAAMsC,WADF,IAGP9C,KAAM,4BAKNmZ,GAA2B,SAAC3Y,GAChC,IAAQoC,EAA8DpC,EAA9DoC,WAAY6D,EAAkDjG,EAAlDiG,mBAAoBD,EAA8BhG,EAA9BgG,eAAgB1D,EAActC,EAAdsC,UAIxD,OAHwBF,EAAW6D,GAAoB6H,OAAS,EACxB,GAGtC,KAAK,EACH,IAAMkH,EAAa,6BACd5S,GADc,mBAEhB6D,EAFgB,6BAGZ7D,EAAW6D,IAHC,IAIf6H,OAAQ1L,EAAW6D,GAAoB6H,OAAS,MAepD,OAXqB,6BAChB9N,GADgB,IAEnBC,KAAM,EACNqC,UAAU,6BACLtC,EAAMsC,WADF,IAGP9C,KAAM,sCAER4C,WAAY4S,IAMhB,KAAK,EACH,IAAM4D,EAAmBxR,OAAOC,QAAQjF,GAAYkF,QAClD,SAAClF,GACC,mBAAwBA,EAAxB,GAAOU,EAAP,UACA,OAAOjC,OAAOiC,KAAWmD,KAGvB+O,EAAgB5N,OAAO0J,YAAY8H,GAEnCC,EAAqC,6BACtC7S,GADsC,mBAExCC,EAAqB,CACpBvD,YAAaN,EAAW6D,GAAoBvD,YAC5CqE,KAAM,UAIJmQ,EAAkB1C,GAAoBxU,GAEhBiX,GAAiB3U,EAArCmS,gBAAR,aAA6CnS,EAA7C,KAgBA,OAdqB,6BAChBtC,GADgB,IAEnBC,KAAM,EAENqC,UAAU,6BACL2U,GADI,IAEPzX,KAAM,yBAGRwG,eAAgB6S,EAChBzW,WAAY4S,EACZ/O,mBAAoBiR,M,uBC3Gf4B,GAAqB,SAChC1W,EACA6D,GAEA,IAIqB,EAJf8S,EAAgB3W,EAAW6D,GAAoB9C,UAE/C6V,EAAkB5W,EAAW6D,GAAoB9C,UAAUC,aAEjE,OAAI4V,EAC+B,6BAC5BD,GAD4B,wBAE9BC,EAAkBD,EAAcC,GAAmB,GAFrB,8BAGjB,MAHiB,IAQ1BD,GChBEE,GAAmB,SAACjZ,EAAcuU,GAC7C,OAAQA,EAAO/U,MACb,IAAK,aACH,OAAO,6BACFQ,GADL,IAEEC,KAAMsU,EAAO9U,QACb6C,UAAU,6BAAMtC,EAAMsC,WAAb,IAAwB9C,KAAM,sBACvC2P,SAAU,CAAE3P,KAAM,sBAItB,QACE,OAAOQ,ICXAkZ,GAAa,SAAClZ,EAAcuU,GACvC,IAAQnS,EAAmCpC,EAAnCoC,WAAY6D,EAAuBjG,EAAvBiG,mBACpB,OAAQsO,EAAO/U,MACb,IAAK,cAGH,IAAM2Z,EAAsB/W,EAAW6D,GAAoB9C,UAErDiW,EACoB,WAAxB7E,EAAO9U,QAAQD,KAEX6Z,EAA2C,IAA/BF,EAAoBhL,OAItC,OAFqBiL,GAAsBC,GAGzC,KAAK,EACH,IAAMrE,ECnBkB,SAAChV,EAAc8U,GAC/C,IAAQ1S,EAAmCpC,EAAnCoC,WAAY6D,EAAuBjG,EAAvBiG,mBACd9C,EAAYf,EAAW6D,GAAoB9C,UAO3CmW,EAJJlX,EAAW6D,GAAoB9C,UAAUC,eAES0R,EAER,KAAOA,EAE7CqD,EAAY,6BAAQhV,GAAR,IAAmBC,aAAckW,IAUnD,OARmC,6BAC9BlX,GAD8B,mBAEhC6D,EAFgC,6BAG5B7D,EAAW6D,IAHiB,IAI/B9C,UAAWgV,MDEelD,CAAmBjV,EAAOuU,EAAO9U,QAAQD,MAEzD+Z,IAAqBvE,EAAc/O,GAAoB9C,UAC1DC,aAMG+R,EAA4B,6BAC7BnV,GAD6B,IAEhCoC,WAAY4S,EACZ1S,UAAU,6BACLtC,EAAMsC,WADF,IAEP9C,KAAM,kCAIJ4V,EAA+B,6BAChCpV,GADgC,IAEnCoC,WAAY4S,EACZ1S,UAAU,6BACLtC,EAAMsC,WADF,IAEP9C,KAAM,yCAIV,OAAQ+Z,GACN,KAAK,EACH,OAAOpE,EACT,KAAK,EACH,OAAOC,EAEX,MAEF,KAAK,EACH,OAAOpV,EAKb,QACE,OAAOA,IEpDAwZ,GAAoB,SAACxZ,EAAcuU,GAC9C,MAAuBvU,EAAMsC,UAAU9C,KAAKyE,MAAM,KAElD,OAFA,sBAGE,IAAK,mBACH,OAAQsQ,EAAO/U,MACb,IAAK,aACH,OAAOyZ,GAAiBjZ,EAAOuU,GAGjC,IAAK,cACH,OAAO2E,GAAWlZ,EAAOuU,GAG3B,QACE,OAAOvU,EAKb,IAAK,YACH,OAAQuU,EAAO/U,MACb,IAAK,cACH,OAAO0Z,GAAWlZ,EAAOuU,GAG3B,IAAK,eACH,OClC0B,SAClCvU,EACAuU,GAEA,OAAQA,EAAO/U,MACb,IAAK,eACH,IAAQyG,EAA8CjG,EAA9CiG,mBAAoB7D,EAA0BpC,EAA1BoC,WAAYoJ,EAAcxL,EAAdwL,UAClCiO,EAAYlF,EAAO9U,QAAQ4G,UAC3BqT,EAAiBtX,EAAW6D,GAAoBxE,MAEhDkY,EACJvX,EAAW6D,GAAoBxE,QAAUiY,EAErCE,EAAiBxS,OAAOyS,KAAKrO,GAAW1E,MAAK,SAACgT,GAClD,OAAOtO,EAAU3K,OAAOiZ,IAAMrY,QAAUiY,KAGpCK,EAA4B,6BAC7BN,GAD6B,IAEhC/Y,UAAW,aAGPsZ,EAAY,6BACbha,EAAMwL,WADO,mBAEf3K,OAAO+Y,GAAkBG,IAGtB5B,EAAeW,GAAmB1W,EAAY6D,GAE9C+O,EAAa,6BACd5S,GADc,mBAEhB6D,EAFgB,6BAGZ7D,EAAW6D,IAHC,IAIf9C,UAAWgV,MAIf,OAAQwB,GACN,KAAK,EACH,OAAO,6BACF3Z,GADL,IAEEwL,UAAWwO,EACX5X,WAAY4S,EACZ7F,SAAU,CAAE3P,KAAM,sBAGtB,KAAK,EACH,OAAOQ,EAIb,QACE,OAAOA,GDlBIia,CAAqBja,EAAOuU,GAErC,IAAK,sBACH,OEtCqB,SAACvU,GAC9B,IAAQwL,EACNxL,EADMwL,UAAWvF,EACjBjG,EADiBiG,mBAAoB7D,EACrCpC,EADqCoC,WAAYE,EACjDtC,EADiDsC,UAAWiG,EAC5DvI,EAD4DuI,UAGxDX,EAAexF,EAAW6D,GAAoBxE,MAE9CyY,EAAgB9S,OAAOC,QAAQmE,GAAWlE,QAAO,SAACnB,GAEtD,OADA,aAAsBA,EAAtB,MACiB1E,QAAUmG,KAEvBoS,EAA8B5S,OAAO0J,YAAYoJ,GAEjDhD,EAAkB1C,GAAoBxU,GAEhBiX,GAAiB3U,EAArCmS,gBAAR,aAA6CnS,EAA7C,KAIA,OAFoBiG,EAAUG,OAAOd,GAAcf,SAAStE,OAAS,GAGnE,KAAK,EACH,OAAO,6BACFvC,GADL,IAEEwL,UAAWwO,EACX/Z,KAAM,EACNqC,UAAU,6BACL2U,GADI,IAEPzX,KAAM,yBAER2P,SAAU,CAAE3P,KAAM,kCAItB,KAAK,EACH,OAAO,6BACFQ,GADL,IAEEwL,UAAWwO,EACX/Z,KAAM,EACNqC,UAAU,6BACL2U,GADI,IAEPzX,KAAM,yBAERyG,mBAAoBiR,KFHXiD,CAAgBna,GAGzB,QACE,OAAOA,EAKb,IAAK,kBACH,OAAOiZ,GAAiBjZ,EAAOuU,GAGjC,QACE,OAAQA,EAAO/U,MACb,IAAK,qBACH,OGvDwB,SAACQ,GACjC,IAAQwL,EAA8CxL,EAA9CwL,UACF5D,EADgD5H,EAAnCoC,WAAmCpC,EAAvBiG,oBACqBxE,MAE9CgY,EAAYrS,OAAOC,QAAQmE,GAC9B5I,KAAI,SAACuD,GACJ,mBAA2BA,EAA3B,GACA,OADA,aAGDW,MAAK,SAACT,GACL,OAAOA,EAAU5E,QAAUmG,KAGzBwS,EAA+C,UAAhB,OAATX,QAAS,IAATA,OAAA,EAAAA,EAAW/Y,WAEvC,QAAQ,GACN,KAAK0Z,EACH,OAAO,6BACFpa,GADL,IAEEmP,SAAU,CAAE3P,KAAM,oBAItB,KAAM4a,EACJ,OAAO,6BACFpa,GADL,IAEEsC,UAAU,6BACLtC,EAAMsC,WADF,IAEP9C,KAAM,sCAGRS,KAAM,IAIV,QACE,OAAOD,GHmBIqa,CAAmBra,GAG5B,IAAK,oBACH,OIvDmB,SAACA,GAC5B,IAAQwL,EAA8CxL,EAA9CwL,UACF5D,EADgD5H,EAAnCoC,WAAmCpC,EAAvBiG,oBACqBxE,MAG9CmY,EAAiBxS,OAAOC,QAAQmE,GACnClE,QAAO,YAAyB,IAAD,oBAC9B,OAD8B,UACb7F,QAAUmG,KAE5BhF,KAAI,YAAyB,IAAD,oBAAtBE,EAAsB,KAC3B,OAD2B,KACpBA,KAERwX,OAEGN,EAAY,6BACbxO,GADa,mBAEfoO,EAFe,6BAGXpO,EAAU3K,OAAO+Y,KAHN,IAIdlZ,UAAW,WAIf,OAAIkZ,EACK,6BACF5Z,GADL,IAEEwL,UAAWwO,EACX1X,UAAU,6BACLtC,EAAMsC,WADF,IAEP9C,KAAM,sCAERS,KAAM,IAGDD,EJsBMua,CAAcva,GAGvB,IAAK,sBACH,OL9DqB,SAACA,GAG9B,OAFiBA,EAATC,MAGN,KAAK,EACL,KAAK,EACH,OAAOwY,GAAuBzY,GAGhC,KAAK,EACH,OAAO2Y,GAAyB3Y,GAGlC,KAAK,EACH,OAAO0Y,GAAuB1Y,GAEhC,QACE,OAAOA,GK6CIwa,CAAgBxa,GAGzB,QACE,OAAOA,KKnEJya,GAAmB,SAC9Bza,EACA0a,GAEA,IAAQtY,EAAmCpC,EAAnCoC,WACFuY,EADqC3a,EAAvBiG,mBAGd2U,EAAyBxY,EAAWuY,GAAiBxX,UACrD0X,EAA2BzY,EAAWsY,GAAuBvX,UAE7D2X,EAAiB1Y,EAAWuY,GAAiBxX,UAAUC,aAE7D,GAAI0X,EAAgB,CAAC,IAAD,IACZC,EAAyB,6BAC1BH,GAD0B,wBAE5BE,EAAiBF,EAAuBE,GAAkB,GAF9B,8BAGf,MAHe,IAMzBE,EAA2B,6BAC5BH,GAD4B,mBAE9BC,EAAiBD,EAAyBC,GAAkB,IAGzD9F,EAAa,6BACd5S,GADc,wBAEhBuY,EAFgB,6BAGZvY,EAAWuY,IAHC,IAIfxX,UAAW4X,KAJI,eAMhBL,EANgB,6BAOZtY,EAAWsY,IAPC,IAQfvX,UAAW6X,KARI,IAYnB,OAAO,6BACFhb,GADL,IAEEoC,WAAY4S,EACZ1S,UAAU,6BAAMtC,EAAMsC,WAAb,IAAwB9C,KAAM,2BACvC2P,SAAU,CAAE3P,KAAM,oCAGpB,OAAOQ,GC3CEib,GAAe,SAC1B7Y,EACA8Y,GAEA,OAAO9Y,EAAW8Y,GAAapN,OAAS,GCF7BqN,GAA6B,SACxCnb,EACA0a,EACAU,GAEA,OAAQA,GACN,IAAK,OACH,IAAMC,ECN6B,SACvCrb,EACAsb,GACW,IAAD,EACFlZ,EAAmCpC,EAAnCoC,WAAY6D,EAAuBjG,EAAvBiG,mBACd0U,EAAkB1U,EAClBkS,EAAeW,GAAmB1W,EAAY6D,GAC9CsV,EAAYN,GAAa7Y,EAAYkZ,GAErCtG,EAA6B,6BAC9B5S,GAD8B,wBAEhCkZ,EAFgC,6BAG5BlZ,EAAWkZ,IAHiB,IAI/BxN,OAAQyN,KAJuB,eAMhCZ,EANgC,6BAO5BvY,EAAWuY,IAPiB,IAQ/BxX,UAAWgV,KARoB,IAYnC,OAAO,6BACFnY,GADL,IAEEoC,WAAY4S,EACZ1S,UAAU,6BAAMtC,EAAMsC,WAAb,IAAwB9C,KAAM,2BACvC2P,SAAU,CACR3P,KAAM,oCDpBWgc,CAA0Bxb,EAAO0a,GAKlD,OAJ+Be,GAC7BJ,EACAX,GAKJ,IAAK,QACH,IAAMW,EAAWZ,GAAiBza,EAAO0a,GAKzC,OAJ+Be,GAC7BJ,EACAX,GAKJ,QACE,OAAO1a,IAKPyb,GAAmB,SAACzb,EAAc0a,GAWtC,OAV4B,6BACvB1a,GADuB,IAE1BoC,WAAW,6BACNpC,EAAMoC,YADD,mBAEPsY,EAFO,6BAGH1a,EAAMoC,WAAWsY,IAHd,IAINhX,iBAAiB,SErCZgY,GAAsB,SACjC1b,EACAoW,EACAnX,GAMA,QAJsBe,EAAduI,UAC4BG,OAAO0N,IAIzC,KAAK,EACH,OAAO,EAGT,KAAK,EAGH,QAAQ,GACN,KAHiBb,GAAiBvV,EAAOoW,EAAiBnX,GAIxD,OAAO,EAGT,QACE,OAAO,EAIb,QACE,OAAO,IC1BA0c,GAAwB,SACnC3b,EACA4b,GAEA,IAAQ3V,EAAmCjG,EAAnCiG,mBAAoB7D,EAAepC,EAAfoC,WAEtByZ,EAAazZ,EAAW6D,GACxB6V,EAAkBF,EAAkBlZ,cAAgBuD,EAGpD8V,EAFmBC,GAAoBhc,GACLkK,OAAO2R,EAAWpa,OACboD,SAC3C+W,EAAkBna,OAGdyB,EACJd,EAAW6D,GAAoB9C,UAAUC,aAE3C,OAAQ2Y,GACN,KAAK,EACH,OAAQ7Y,GACN,IAAK,SACH,OAAQ4Y,GACN,KAAK,EACH,OCxBwB,SAAC9b,GACrC,IAAQoC,EAAmCpC,EAAnCoC,WAAY6D,EAAuBjG,EAAvBiG,mBACd0U,EAAkB1U,EAClBsV,EAAYN,GAAa7Y,EAAYuY,GACrCxC,EAAeW,GAAmB1W,EAAY6D,GAC9C+O,EAA6B,6BAC9B5S,GAD8B,mBAEhCuY,EAFgC,6BAG5BvY,EAAWuY,IAHiB,IAI/BxX,UAAWgV,EACXrK,OAAQyN,MAIZ,OAAO,6BACFvb,GADL,IAEEoC,WAAY4S,EACZ1S,UAAU,6BAAMtC,EAAMsC,WAAb,IAAwB9C,KAAM,2BACvC2P,SAAU,CACR3P,KAAM,oCDKSyc,CAAuBjc,GAGhC,KAAK,EACH,IAAMkc,EAA0BN,EAAkBlZ,YAClD,OAAOyZ,GAAgBnc,EAAOkc,GAGhC,QACE,OAAOlc,EAKb,IAAK,SACL,IAAK,SAIH,OAAQ8b,GACN,KAAK,EACH,OAAO9b,EAGT,KAAK,EACH,OAAOya,GAAiBza,EAAO4b,EAAkBlZ,aAGnD,QACE,OAAO1C,EAKb,QACE,OAAOA,EAKb,KAAK,EAEH,OADA2D,QAAQC,IAAI,yMACL5D,EAGT,QACE,OAAOA,IAQPmc,GAAkB,SAACnc,EAAc0a,GAYrC,OAXmC,6BAC9B1a,GAD8B,IAEjCoC,WAAW,6BACNpC,EAAMoC,YADD,mBAEPsY,EAFO,6BAGH1a,EAAMoC,WAAWsY,IAHd,IAINhX,iBAAiB,SAWnBsY,GAAsB,SAAChc,GAC3B,IAAQsC,EAAyDtC,EAAzDsC,UAAWF,EAA8CpC,EAA9CoC,WAAY6D,EAAkCjG,EAAlCiG,mBAAoBsC,EAAcvI,EAAduI,UAC7CD,EAAkBlG,EAAW6D,GAAoBxE,MAejD2a,EAbsB/T,GAC1BC,EACAC,GAGmEjB,QACnE,SAACmB,GACC,IAAQxJ,EAAqBwJ,EAArBxJ,UAAWwC,EAAUgH,EAAVhH,MAEnB,OAAOia,GAAoB1b,EAAOyB,EAAOxC,MAIE2D,KAAI,SAAC6F,GAElD,OADkBA,EAAVhH,SAIV,OAAQa,EAAU9C,MAChB,IAAK,wBACH,OAAO4c,EAET,QACE,MAAO,KEnHAC,GAAY,SAACrc,EAAcuU,GACtC,OAAQA,EAAO/U,MACb,IAAK,cACH,IAAMsV,EAAeP,EAAO9U,QAAQD,KACpC,OAAOqV,GAAqB7U,EAAO8U,GAGrC,IAAK,eACH,MAA6BP,EAAO9U,QACpC,OClB4B,SAChCO,EACAyB,EACAxC,GAEA,IAAQsJ,EAA8CvI,EAA9CuI,UAAWnG,EAAmCpC,EAAnCoC,WAAY6D,EAAuBjG,EAAvBiG,mBACzB0U,EAAkB1U,EAClBkS,EAAeW,GAAmB1W,EAAY6D,GAC9CqW,EAAqB/T,EAAUG,OAAOjH,GAE5C,GAAgC,eAA5B6a,EAAmBvV,KAAuB,CAAC,IAAD,EACtCwV,EAAsB,UAAGD,EAAmB7S,mBAAtB,aAAG,EAAgC7G,KAC7D,SAAC8G,GACC,OAAIA,EAAQzK,YAAcA,EACjB,6BAAKyK,GAAZ,IAAqBb,QAAQ,IACjBa,KAIZmO,EAAY,6BACbtP,GADa,IAEhBG,OAAO,6BACFH,EAAUG,QADT,mBAEHjH,EAFG,6BAGC8G,EAAUG,OAAOjH,IAHlB,IAIFgI,YAAa8S,QAKbvH,EAA6B,6BAC9B5S,GAD8B,mBAEhCuY,EAFgC,6BAG5BvY,EAAWuY,IAHiB,IAI/BxX,UAAWgV,MAYf,OARqB,6BAChBnY,GADgB,IAEnBuI,UAAWsP,EACXzV,WAAY4S,EACZ1S,UAAU,6BAAMtC,EAAMsC,WAAb,IAAwB9C,KAAM,2BACvC2P,SAAU,CAAE3P,KAAM,oCAKpB,OAAOQ,ED9BEwc,CAAmBxc,EAD1B,EAAQyB,MAAR,EAAexC,WAIjB,IAAK,qBACH,IAAMyb,EAAwBnG,EAAO9U,QAAQ+D,KAAKd,YAC5C0Y,EAAe7G,EAAO9U,QAAQgE,WACpC,OAAO0X,GACLnb,EACA0a,EACAU,GAIJ,IAAK,gBACH,IAAMQ,EAAoBrH,EAAO9U,QACjC,OAAOkc,GAAsB3b,EAAO4b,GAGtC,IAAK,qCACH,IAAM7Y,EErCqB,SAAC/C,GAChC,IAAQoC,EAA8CpC,EAA9CoC,WAAY6D,EAAkCjG,EAAlCiG,mBAAoBsC,EAAcvI,EAAduI,UAElCtF,EAAoBb,EAAW6D,GAAoBxE,MAsBzD,OApB4B4G,GAC1BpF,EACAsF,GAGmEjB,QACnE,SAACmB,GACC,IAAQxJ,EAAqBwJ,EAArBxJ,UAAWwC,EAAUgH,EAAVhH,MAEnB,OAAOia,GAAoB1b,EAAOyB,EAAOxC,MAK1C2D,KAAI,SAAC6F,GAEJ,OADkBA,EAAVhH,SAGTyI,OAAOjH,GFcwBwZ,CAAkBzc,GAChD,OAAO,6BACFA,GADL,IAEEsC,UAAU,6BAAMtC,EAAMsC,WAAb,IAAwBS,4BAIrC,QACE,OAAO/C,IG9CA0c,GAAU,SAAC1c,EAAcuU,GACpC,OAAQA,EAAO/U,MACb,IAAK,mBACH,OAAO,6BACFQ,GADL,IAEEsC,UAAU,6BAAMtC,EAAMsC,WAAb,IAAwB9C,KAAM,mBAI3C,QACE,OAAOQ,ICVA2c,GAAkB,SAAC3c,EAAcuU,GAC5C,IAAMqI,EAAmB5c,EAAMiG,mBACzByO,EAAgB,6BAAQ1U,EAAMoC,YAAepC,EAAMgG,gBAInD6W,EACJD,EAAmB,EAJFxV,OAAOC,QAAQqN,GACEnS,OAAS,EACpB,EAInBqa,EAAmB,EAEzB,OAAQrI,EAAO/U,MACb,IAAK,oBACH,OAAO,6BACFQ,GADL,IAEEiG,mBAAoB4W,EACpBva,UAAU,6BAAMtC,EAAMsC,WAAb,IAAwB9C,KAAM,2BAI3C,QACE,OAAOQ,ICaPgW,GAAwB,SAC5BxK,EACAyK,GAMA,OAJ0B7O,OAAOC,QAAQmE,GACA0K,MAAK,YAAoB,IAAhB7P,EAAe,qBAC/D,OAAOA,EAAU5E,QAAUwU,GAAoC,WAAxB5P,EAAU3F,cCnCxCyV,GAAoB,SAACnW,GAChC,IAAQiG,EAA6DjG,EAA7DiG,mBAAoBsC,EAAyCvI,EAAzCuI,UAAWvC,EAA8BhG,EAA9BgG,eAAgBwF,EAAcxL,EAAdwL,UAEjDiK,EACJzP,GAAkBA,EAAeC,GAAoBnD,MACjDkD,EAAeC,GAAoBnD,MACnC,KAEAga,EAAkBrH,EAAajK,EAAUiK,GAAYhU,MAAQ,KAEnE,GAAIqb,EAAiB,CACnB,IAiBMrQ,EAjBsBpE,GAC1ByU,EACAvU,GAOmEjB,QACnE,SAACmB,GACC,IAAQxJ,EAAqBwJ,EAArBxJ,UAAWwC,EAAUgH,EAAVhH,MAEnB,ODrBwB,SAC9BzB,EACAoW,EACAnX,GAEA,IAAQgB,EAAoBD,EAApBC,KAAMuL,EAAcxL,EAAdwL,UACR6K,EAAad,GAAiBvV,EAAOoW,EAAiBnX,GACtDqX,EAA4B,IAATrW,EACnBsW,EAAoBP,GAAsBxK,EAAW4K,GAG3D,QAAQ,GACN,KAAKC,EAIL,KAPqBC,GAAoBC,EASvC,OAAO,EAET,QACE,OAAO,GCAEC,CAAiBxW,EAAOyB,EAAOxC,MAIM2D,KAAI,SAAC6F,GAEnD,OADkBA,EAAVhH,SAIV,OAAO,6BACFzB,GADL,IAEEmP,SAAU,KACV7M,UAAU,6BAAMtC,EAAMsC,WAAb,IAAwBmK,4BAGnC,OAAOzM,GCrCE+c,GAAY,SAAC/c,EAAcuU,GACtC,MAAuBvU,EAAMsC,UAAU9C,KAAKyE,MAAM,KAElD,OAFA,sBAGE,IAAK,cACH,OAAQsQ,EAAO/U,MACb,IAAK,eACH,OCd2B,SACnCQ,EACAuU,GAEA,OAAQA,EAAO/U,MACb,IAAK,eACH,IAAQgM,EAAkDxL,EAAlDwL,UAAWxF,EAAuChG,EAAvCgG,eAAgBC,EAAuBjG,EAAvBiG,mBAC7B+W,EAAgBzI,EAAO9U,QAAQ4G,UAK/BuT,EAAiBxS,OAAOyS,KAAKrO,GAAW1E,MAAK,SAACgT,GAClD,OACEtO,EAAU3K,OAAOiZ,IAAMrY,QAAUub,EAAcvb,OACV,SAArC+J,EAAU3K,OAAOiZ,IAAMpZ,aAI3B,IAAIsF,EAsCF,OAAOhG,EAtCY,IAAD,EAIZid,IAAe,UAAAjX,EAAeC,UAAf,eAAoCnD,OAInDoa,EAC4C,SAAhD1R,EAAU3K,OAAO+Y,IAAiBlZ,UAIpC,OAFyBuc,GAAgBC,GAGvC,KAAK,EACH,OAAOld,EAET,KAAK,EACH,IAAMmd,EAAiB,6BAClBnX,GADkB,mBAEpBC,EAFoB,6BAGhBD,EAAeC,IAHC,IAInBnD,MAAO8W,MAIX,OAAO,6BACF5Z,GADL,IAEEsC,UAAU,6BACLtC,EAAMsC,WADF,IAEP9C,KAAM,cAER2P,SAAU,CAAE3P,KAAM,kCAClBwG,eAAgBmX,IAQ1B,QACE,OAAOnd,GD/CIod,CAAsBpd,EAAOuU,GAGtC,QACE,OAAOvU,EAKb,QACE,OAAQuU,EAAO/U,MACb,IAAK,oCACH,OAAO2W,GAAkBnW,GAG3B,IAAK,sBACH,OE7BwB,SAACA,EAAcuU,GAC/C,OAAQA,EAAO/U,MACb,IAAK,sBACH,IAAQwG,EAAkDhG,EAAlDgG,eAAgBC,EAAkCjG,EAAlCiG,mBAAoBuF,EAAcxL,EAAdwL,UACtCvM,EAAYsV,EAAO9U,QAEnBgW,EACJzP,GAAkBA,EAAeC,GAAoBnD,MACjDkD,EAAeC,GAAoBnD,MACnC,KAEN,IAAI2S,EAwCF,OAAOzV,EAxCQ,IAAD,EACRqd,EAAiB7R,EAAUiK,GAAYhU,MAEvC6b,EAAiB3V,GAAmB0V,EAAgBpe,GAM1D,OAFqB,UACnBe,EAAMsC,UAAUmK,6BADG,aACnB,EAAuC5H,SAASyY,IAEhD,KAAK,EACH,IAAMC,EAAiBnW,OAAOC,QAAQmE,GAAW5I,KAC/C,SAACuD,GACC,mBAAqBA,EAArB,GAAO2T,EAAP,KAAY0D,EAAZ,KACA,OAAI3c,OAAO4U,KAAgB5U,OAAOiZ,GAEzB,CAACA,EADM,6BAAQ0D,GAAR,IAAe/b,MAAO6b,KAExBnX,KAIZ6T,EACJ5S,OAAO0J,YAAYyM,GAErB,OAAO,6BACFvd,GADL,IAEEsC,UAAU,6BAAMtC,EAAMsC,WAAb,IAAwBmK,sBAAuB,OACxDjB,UAAWwO,EACX7K,SAAU,CAAE3P,KAAM,0BAGtB,KAAK,EAIL,QACE,OAAOQ,GASjB,OAAOA,EF3BQyd,CAAmBzd,EAAOuU,GAGnC,IAAK,0BACH,OG9BwB,SAACvU,GACjC,IACEuI,EAMEvI,EANFuI,UACAnG,EAKEpC,EALFoC,WACA6D,EAIEjG,EAJFiG,mBACAhG,EAGED,EAHFC,KACAuL,EAEExL,EAFFwL,UACAxF,EACEhG,EADFgG,eAGIyP,EACJzP,GAAkBA,EAAeC,GAAoBnD,MACjDkD,EAAeC,GAAoBnD,MACnC,KAEAga,EAAkBrH,EAAajK,EAAUiK,GAAYhU,MAAQ,KAEnE,IAAIqb,EAsEF,OAAO9c,EArEkBuI,EAAUG,OAAOoU,GADtB,IAAD,EAEbxG,EAA4B,IAATrW,EAKnByd,EAAkB,UAAGtW,OAAOsB,OAAOtG,GAAY0E,MAAK,SAACS,GACzD,OAAOA,EAAW9F,QAAUqb,YADN,aAAG,EAEvBpa,YAMJ,QAAQ,GACN,OAJAgb,GAA6C,IAAvBA,GAKpB,GACG1X,GAAkB0X,GAClB1X,GAAyC,IAAvB0X,EACnB,CAIA,IAAM7E,EAAwCzR,OAAO0J,YACnD1J,OAAOC,QAAQrB,GAAgBpD,KAC7B,YAAmC,IAAD,oBAAhC0G,EAAgC,KAApBqU,EAAoB,KAEhC,MAAO,CAACrU,EAAY,CAAEvC,KADQ4W,EAAtB5W,KACoBrE,YADEib,EAAhBjb,kBAkBpB,OAZqB,6BAChB1C,GADgB,IAEnBC,KAAMD,EAAMC,KAAO,EACnBqC,UAAU,6BACLtC,EAAMsC,WADF,IAEPmS,gBAAiBxO,EACjBzG,KAAM,sCAERyG,mBAAoByX,EACpB1X,eAAgB6S,IAKlB,OAAO7Y,EAIX,KAAKsW,EAMH,OALqB,6BAChBtW,GADgB,IAEnBmP,SAAU,CAAE3P,KAAM,yBAMtB,QAME,OALqB,6BAChBQ,GADgB,IAEnBC,KAAMD,EAAMC,KAAO,EACnBkP,SAAU,CAAE3P,KAAM,qCHnDXoe,CAAmB5d,GAG5B,IAAK,yBACH,OItC0B,SAACA,GACnC,IAAQgG,EAAmBhG,EAAnBgG,eAER,GAAIA,EAAgB,CAClB,IAAMkR,EAAkB1C,GAAoBxU,GAEtC6Y,EAAwCzR,OAAO0J,YACnD1J,OAAOC,QAAQrB,GAAgBpD,KAAI,YAAmC,IAAD,oBAAhC0G,EAAgC,KAApBqU,EAAoB,KAC3D5W,EAA6B4W,EAA7B5W,KAAMrE,EAAuBib,EAAvBjb,YACd,OADqCib,EAAV7a,MACpB,CAACwG,EAAY,CAAEvC,OAAMrE,oBAWhC,OAPqB,6BAChB1C,GADgB,IAEnBC,KAAM,EACNqC,UAAU,6BAAMtC,EAAMsC,WAAb,IAAwB9C,KAAM,yBACvCyG,mBAAoBiR,EACpBlR,eAAgB6S,IAIlB,OAAO7Y,EJgBM6d,CAAqB7d,GAG9B,QACE,OAAOA,K,SK1CJ8d,GAAQC,cCqDE,WAGV,IAFX/d,EAEU,uDAFKgU,GACfO,EACU,uCACV,EAAiCvU,EAAMsC,UAAU9C,KAAKyE,MAAM,KAA5D,oBAAO+Z,EAAP,KAAmBC,EAAnB,KAEA,OAAQD,GACN,IAAK,eACH,OAAO1J,GAAatU,EAAOuU,GAG7B,IAAK,cACH,OAAQ0J,GACN,IAAK,WACH,OAAOzF,GAASxY,EAAOuU,GAGzB,IAAK,aACH,OAAOoC,GAAW3W,EAAOuU,GAG3B,IAAK,WACH,OAAOuC,GAAS9W,EAAOuU,GAEzB,IAAK,YACH,OAAO8H,GAAUrc,EAAOuU,GAG1B,IAAK,kBACH,OAAOoI,GAAgB3c,EAAOuU,GAGhC,QACE,OAAOvU,EAIb,IAAK,YACH,OAAO+c,GAAU/c,EAAOuU,GAG1B,IAAK,oBACH,OAAOiF,GAAkBxZ,EAAOuU,GAGlC,IAAK,UACH,OAAOmI,GAAQ1c,EAAOuU,GAGxB,QACE,OAAOvU,KDrGVke,OAAeC,8BACbD,OAAeC,gCEapB,IAAMC,GAAQtf,KAAOC,IAAV,4DAAGD,CAAH,gDAILuf,GAAOvf,KAAOC,IAAV,2DAAGD,CAAH,0KAYJwf,GAAaxf,KAAOC,IAAV,iEAAGD,CAAH,kSAgBVyf,GAAYzf,KAAOC,IAAV,gEAAGD,CAAH,gLAUT0f,GAAe1f,KAAOC,IAAV,mEAAGD,CAAH,iJAQX,SAAS2f,KACd,IAAQnc,EAAcvC,cAAY,SAACC,GAAD,uBAAwBA,MAAlDsC,WCjEH,WACL,MAAmBvC,cAAY,SAACC,GAAD,MAAkB,CAACA,EAAMmP,aAAjDA,EAAP,qBACM/P,EAAWC,eAEjBkQ,qBACE,WACE,cAAQJ,QAAR,IAAQA,OAAR,EAAQA,EAAU3P,MAChB,IAAK,+BACHJ,EAAS,CACPI,KAAM,2BAER,MAGF,IAAK,YACH,IAAMkf,EAAYC,YAChB,kBACEvf,EAAS,CACPI,KAAM,mBAEV,KAEF,OAAO,WACLof,aAAaF,IAIjB,IAAK,YACH,IAAMG,EAAgBF,YACpB,kBACEvf,EAAS,CACPI,KAAM,mBAEV,KAEF,OAAO,WACLof,aAAaC,IAIjB,IAAK,sBACH,IAAMC,EAA0BH,YAC9B,kBACEvf,EAAS,CACPI,KAAM,6BAEV,KAEF,OAAO,WACLof,aAAaE,IAIjB,IAAK,cACH,IAAMC,EAAkBJ,YACtB,kBACEvf,EAAS,CACPI,KAAM,qBAEV,KAEF,OAAO,WACLof,aAAaG,OAUrB,CAAC5P,IDLH6P,GEnEK,WACL,MAAmBjf,cAAY,SAACC,GAAD,MAAkB,CAACA,EAAMmP,aAAjDA,EAAP,qBACM/P,EAAWC,eAEjBkQ,qBACE,WACE,cAAQJ,QAAR,IAAQA,OAAR,EAAQA,EAAU3P,MAChB,IAAK,iCACHJ,EAAS,CACPI,KAAM,sCAER,MAGF,IAAK,uBACHJ,EAAS,CACPI,KAAM,4BAER,MAGF,IAAK,sBACH,IAAMyf,EAAkBN,YACtB,kBACEvf,EAAS,CACPI,KAAM,6BAEV,KAGF,OAAO,WACLof,aAAaK,OASrB,CAAC9P,IF4BH+P,GGpEK,WACL,IAAM9f,EAAWC,eACXiD,EAAYvC,cAAY,SAACC,GAAD,OAAkBA,EAAMsC,aAEtDiN,qBACE,WACE,OAAQjN,EAAU9C,MAChB,IAAK,UACH,IAAM2f,EAAQR,YACZ,kBAAMvf,EAAS,CAAEI,KAAM,uBACvB,KAGF,OAAO,kBAAMof,aAAaO,OAOhC,CAAC7c,EAAU9C,KAAMJ,IHiDnBggB,GIrEK,WACL,MAAmBrf,cAAY,SAACC,GAAD,MAAkB,CAACA,EAAMmP,aAAjDA,EAAP,qBACM/P,EAAWC,eAEjBkQ,qBAAU,WACR,cAAQJ,QAAR,IAAQA,OAAR,EAAQA,EAAU3P,MAChB,IAAK,2BACHJ,EAAS,CACPI,KAAM,uBAER,MAGF,IAAK,iBACH,IAAMkf,EAAYC,YAChB,kBACEvf,EAAS,CACPI,KAAM,wBAEV,KAEF,OAAO,WACLof,aAAaF,IAIjB,IAAK,mBACH,IAAMW,EAAiBV,YACrB,kBAAMvf,EAAS,CAAEI,KAAM,0BACvB,KAGF,OAAO,WACLof,aAAaS,IAIjB,IAAK,mBACH,IAAMC,EAAmBX,YACvB,kBAAMvf,EAAS,CAAEI,KAAM,0BACvB,KAEF,OAAO,WACLof,aAAaU,OAQlB,CAACnQ,IJmBJoQ,GKtEK,WACL,MAAmBxf,cAAY,SAACC,GAAD,MAAkB,CAACA,EAAMmP,aAAjDA,EAAP,qBACM/P,EAAWC,eAEjBkQ,qBACE,WACE,cAAQJ,QAAR,IAAQA,OAAR,EAAQA,EAAU3P,MAChB,IAAK,kCACHJ,EAAS,CACPI,KAAM,0CAUd,CAAC2P,ILoDHqQ,GA8BA,OAAO,eAACnB,GAAD,UA5Be,WACpB,OAAQ/b,EAAU9C,MAChB,IAAK,eACH,OAAO,eAAC,GAAD,IAET,IAAK,eACH,OAAO,eAAC,GAAD,IAET,QACE,OACE,uCACE,eAAC+e,GAAD,IACA,eAACH,GAAD,CAAOpb,GAAG,QAAV,SACE,eAAC,GAAD,MAEF,gBAACsb,GAAD,WACE,eAAC,GAAD,IACA,gBAACE,GAAD,WACE,eAAC,GAAD,IACA,eAAC,GAAD,cASAiB,KAGT,IAAMC,GAAM,WACjB,OACE,eAAC,KAAD,CAAU5B,MAAOA,GAAjB,SACE,eAACW,GAAD,OMlGSkB,GAZS,SAACC,GACnBA,GAAeA,aAAuBC,UACxC,6BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,OCJdpb,KAAS4b,OACP,eAAC,KAAMC,WAAP,UACE,eAAC,GAAD,MAEFhc,SAASC,eAAe,SAM1Bqb,O","file":"static/js/main.ce5f3ae5.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\n\r\nimport styled from \"styled-components\";\r\n\r\nimport { MoveDirection } from \"../business/types\";\r\n\r\ntype ArrowProps = {\r\n  direction: MoveDirection;\r\n};\r\n\r\nconst Arrow = styled.div<ArrowProps>`\r\n  text-align: center;\r\n  vertical-align: middle;\r\n  border: 1px solid lightgrey;\r\n  cursor: pointer;\r\n  &:hover {\r\n    color: pink;\r\n  }\r\n\r\n  &:active {\r\n    color: red;\r\n  }\r\n\r\n  transform: ${(props) => {\r\n    switch (props.direction) {\r\n      case \"top\":\r\n        return \"rotate(-90deg)\";\r\n      case \"bottom\":\r\n        return \"rotate(90deg)\";\r\n      case \"left\":\r\n        return \"rotate(-180deg)\";\r\n    }\r\n  }};\r\n\r\n  grid-area: ${(props) => {\r\n    switch (props.direction) {\r\n      case \"top\":\r\n        return \"arrow_top;\";\r\n      case \"bottom\":\r\n        return \"arrow_bottom\";\r\n      case \"left\":\r\n        return \"arrow_left\";\r\n      case \"right\":\r\n        return \"arrow_right\";\r\n    }\r\n  }};\r\n`;\r\n\r\nconst ArrowContainer = styled.div`\r\n  display: grid;\r\n  grid-template-areas:\r\n    \". arrow_top .\"\r\n    \"arrow_left . arrow_right \"\r\n    \". arrow_bottom . \";\r\n  width: 100px;\r\n  height: 100px;\r\n  & > * {\r\n    padding: 6px;\r\n    box-sizing: border-box;\r\n    background-color: white;\r\n  }\r\n`;\r\n\r\nexport const MoveControls = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const renderArrow = (direction: MoveDirection) => {\r\n    return (\r\n      <Arrow\r\n        direction={direction}\r\n        onClick={() => {\r\n          dispatch({ type: \"moveControlsClicked\", payload: direction });\r\n        }}\r\n      >\r\n        &gt;\r\n      </Arrow>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <ArrowContainer>\r\n      {renderArrow(\"top\")}\r\n      {renderArrow(\"right\")}\r\n      {renderArrow(\"left\")}\r\n      {renderArrow(\"bottom\")}\r\n    </ArrowContainer>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nimport styled from \"styled-components\";\r\n\r\nimport { State } from \"../business/types\";\r\n\r\nconst DiceWrap = styled.div`\r\n  border: 1px solid lightgray;\r\n  width: 100px;\r\n  height: 100px;\r\n  display: grid;\r\n  background-color: white;\r\n`;\r\n\r\nconst DiceButton = styled.button`\r\n  margin: 0 auto;\r\n  cursor: pointer;\r\n`;\r\n\r\nconst DiceNumber = styled.div`\r\n  height: 30px;\r\n  margin-top: 20px;\r\n  text-align: center;\r\n`;\r\n\r\nconst maxNumber = 4;\r\n\r\nexport const Dice = () => {\r\n  const dispatch = useDispatch();\r\n  const [diceNumber] = useSelector((state: State) => [state.dice]);\r\n\r\n  const getNumber = () => {\r\n    /*     return 3; */\r\n    return Math.floor(Math.random() * maxNumber + 1);\r\n  };\r\n\r\n  return (\r\n    <DiceWrap>\r\n      <DiceNumber>{diceNumber}</DiceNumber>\r\n      <DiceButton\r\n        onClick={() => {\r\n          dispatch({\r\n            type: \"diceThrown\",\r\n            payload: getNumber(),\r\n          });\r\n        }}\r\n      >\r\n        –±—Ä–æ—Å–∏—Ç—å –∫—É–±–∏–∫\r\n      </DiceButton>\r\n    </DiceWrap>\r\n  );\r\n};\r\n","export default __webpack_public_path__ + \"static/media/brain_4.c48babfd.png\";","import { css } from \"styled-components\";\r\nimport img from \"./brain_4.png\";\r\n\r\nexport const StyledCommonCard = css`\r\n  position: absolute;\r\n  width: 50px;\r\n  height: 50px;\r\n  background-image: url(${img});\r\n  background-size: 44px;\r\n  background-repeat: no-repeat;\r\n  background-position: 3px;\r\n`;\r\n","export default __webpack_public_path__ + \"static/media/health.d3aa03e8.png\";","import styled from \"styled-components\";\r\nimport { StyledCommonCard } from \"../CommonCard/CommonCard\";\r\nimport img from \"./health.png\";\r\n\r\ntype HealthApperanceType = {\r\n  apperance?: \"closed\" | \"open\";\r\n  className?: string;\r\n};\r\n\r\nexport const StyledHealthCard = styled.div<HealthApperanceType>`\r\n  ${StyledCommonCard}\r\n  background-color: ${(props) => {\r\n    if (props.apperance === \"open\") {\r\n      return \"unset\";\r\n    }\r\n  }};\r\n\r\n  background-image: ${(props) => {\r\n    if (props.apperance === \"open\") {\r\n      return `url(${img})`;\r\n    }\r\n  }};\r\n`;\r\n\r\nexport const Health = (props: HealthApperanceType) => {\r\n  return <StyledHealthCard {...props}></StyledHealthCard>;\r\n};\r\n","export default __webpack_public_path__ + \"static/media/player.78f136ce.png\";","export default __webpack_public_path__ + \"static/media/player2.36663427.png\";","export default __webpack_public_path__ + \"static/media/player3.082d8752.png\";","export default __webpack_public_path__ + \"static/media/player4.c9a08f56.png\";","import ReactDOM from \"react-dom\";\r\nimport React from \"react\";\r\n\r\nimport { useDispatch } from \"react-redux\";\r\nimport styled from \"styled-components\";\r\n\r\nimport {\r\n  TypeOfCard,\r\n  PlayerListType,\r\n  GameState,\r\n  PLayerType,\r\n} from \"../../business/types\";\r\n\r\nimport player from \"./player.png\";\r\nimport player2 from \"./player2.png\";\r\nimport player3 from \"./player3.png\";\r\nimport player4 from \"./player4.png\";\r\n\r\ntype PlayerItem = {\r\n  isCurrent: boolean;\r\n  needHighlightning?: boolean;\r\n  image: string;\r\n};\r\n\r\ntype PlayerCardListType = {\r\n  needSplitCards?: boolean;\r\n  needReverseCards?: boolean;\r\n};\r\n\r\ntype PlayerListItem = {\r\n  playerListOnCell: PLayerType[];\r\n  playerList: PlayerListType;\r\n  numberOfPlayer: number;\r\n  gameState: GameState;\r\n};\r\n\r\ntype PortalType = {\r\n  coordX: string;\r\n  coordY: string;\r\n};\r\n\r\nconst PLayersPortal = styled.div<PortalType>`\r\n  position: relative;\r\n  display: flex;\r\n  left: ${(props) => {\r\n    return `${Number(props.coordX) * 50}px`;\r\n  }};\r\n\r\n  bottom: ${(props) => {\r\n    return `${Number(props.coordY) * 50 + 50}px`;\r\n  }};\r\n`;\r\n\r\nconst ContextMenuPortal = styled.div<PortalType>`\r\n  position: relative;\r\n  display: flex;\r\n  left: ${(props) => {\r\n    return `${Number(props.coordX) * 50 - 100}px`;\r\n  }};\r\n\r\n  bottom: ${(props) => {\r\n    return `${Number(props.coordY) * 50}px`;\r\n  }};\r\n`;\r\n\r\nconst PlayerCard = styled.div<PlayerItem>`\r\n  width: 50px;\r\n  height: 50px;\r\n  margin: 0px;\r\n  text-align: center;\r\n  padding: 2px;\r\n  box-sizing: border-box;\r\n  cursor: default;\r\n  background-repeat: no-repeat;\r\n  background-position: 0px;\r\n  background-size: 44px;\r\n  background-position: 3px;\r\n\r\n  background-image: ${(props) => {\r\n    return `url(${props.image})`;\r\n  }};\r\n\r\n  z-index: ${(props) => {\r\n    if (props.isCurrent) {\r\n      return \"4\";\r\n    } else {\r\n      return \"3\";\r\n    }\r\n  }};\r\n\r\n  &:before {\r\n    content: \"\";\r\n    position: absolute;\r\n    width: 24px;\r\n    height: 24px;\r\n    border-radius: 1px;\r\n\r\n    border: ${(props) => {\r\n      if (props.isCurrent) {\r\n        return \"5px solid #8834b8\";\r\n      }\r\n    }};\r\n\r\n    pointer-events: none;\r\n    opacity: 0.5;\r\n    padding: 4px;\r\n    left: 4px;\r\n    top: 4px;\r\n  }\r\n\r\n  &:after {\r\n    content: \"\";\r\n    position: absolute;\r\n    width: 36px;\r\n    height: 36px;\r\n    border-radius: 1px;\r\n\r\n    border: ${(props) => {\r\n      if (props.needHighlightning) {\r\n        return \"3px solid rgb(55 163 0 / 52%);\";\r\n      }\r\n    }};\r\n\r\n    padding: 4px;\r\n    left: 0px;\r\n    top: 0px;\r\n  }\r\n`;\r\n\r\nconst PlayerCardList = styled.div<PlayerCardListType>`\r\n  display: flex;\r\n  flex-wrap: nowrap;\r\n  position: absolute;\r\n  font-size: 12px;\r\n  font-weight: bold;\r\n  flex-direction: ${(props) => {\r\n    if (props.needReverseCards) {\r\n      return \"row-reverse\";\r\n    } else {\r\n      return \"row\";\r\n    }\r\n  }};\r\n\r\n  > * {\r\n    position: ${(props) => {\r\n      if (props.needSplitCards) {\r\n        return \"relative !important\";\r\n      }\r\n    }};\r\n\r\n    margin: ${(props) => {\r\n      if (props.needSplitCards) {\r\n        return \"0 -12px\";\r\n      }\r\n    }};\r\n  }\r\n`;\r\n\r\ntype ContextMenuType = {\r\n  coord?: { x?: number; y?: number };\r\n};\r\n\r\nconst ContextMenu = styled.div<ContextMenuType>`\r\n  display: block;\r\n  flex-direction: column;\r\n  position: absolute;\r\n  width: 100px;\r\n  height: 100px;\r\n  background-color: #ffffff;\r\n  box-shadow: 0 0 10px rgb(0 0 0 / 50%);\r\n  justify-content: start;\r\n  padding: 21px 0 0 12px;\r\n  box-sizing: border-box;\r\n  left: ${(props) => {\r\n    if (props.coord?.x) {\r\n      return `${props.coord?.x}px`;\r\n    } else {\r\n      return \"0px\";\r\n    }\r\n  }};\r\n  top: ${(props) => {\r\n    return `${props.coord?.y}px`;\r\n  }};\r\n`;\r\n\r\nconst Button = styled.button`\r\n  height: 30px;\r\n  width: 70px;\r\n`;\r\n\r\nexport const PlayerList = (props: PlayerListItem) => {\r\n  const dispatch = useDispatch();\r\n\r\n  const playerImageList = [player, player2, player3, player4];\r\n\r\n  const { playerListOnCell, playerList, numberOfPlayer, gameState } = props;\r\n\r\n  const needSplitCards = playerListOnCell.length > 1;\r\n\r\n  /**\r\n   * If first the index of active card - then it be rendered first.\r\n   */\r\n  const indexOfActiveCard = playerListOnCell.findIndex((playerCard) => {\r\n    return playerCard.orderNumber === numberOfPlayer;\r\n  });\r\n\r\n  const needReverseCards = indexOfActiveCard !== 0 && needSplitCards;\r\n\r\n  const playerCardList = (\r\n    <PlayerCardList\r\n      needSplitCards={needSplitCards}\r\n      needReverseCards={needReverseCards}\r\n    >\r\n      {playerListOnCell.map((playerCardItem, index) => {\r\n        const coordOfAvailableCards = gameState.coordOfAvailableCards;\r\n        const isActivePlayerAlive = playerList[numberOfPlayer] ? true : false;\r\n\r\n        switch (isActivePlayerAlive) {\r\n          case false: {\r\n            return (\r\n              <PlayerCard\r\n                id={`player${playerCardItem.orderNumber}`}\r\n                key={index}\r\n                image={playerImageList[playerCardItem.orderNumber]}\r\n                isCurrent={numberOfPlayer === playerCardItem.orderNumber}\r\n                needHighlightning={false}\r\n                onClick={() =>\r\n                  dispatch({\r\n                    type: \"clickedPlayer\",\r\n                    payload: playerCardItem,\r\n                  })\r\n                }\r\n              ></PlayerCard>\r\n            );\r\n          }\r\n          case true: {\r\n            const activePlayerCoord = playerList[numberOfPlayer].coord;\r\n            const currPlayer = playerList[numberOfPlayer];\r\n            const typeOfChosedCard = currPlayer.inventory.cardSelected;\r\n\r\n            const playerCard = (\r\n              <PlayerCard\r\n                id={`player${playerCardItem.orderNumber}`}\r\n                key={index}\r\n                image={playerImageList[playerCardItem.orderNumber]}\r\n                isCurrent={numberOfPlayer === playerCardItem.orderNumber}\r\n                needHighlightning={calculateHighlightning(\r\n                  coordOfAvailableCards,\r\n                  typeOfChosedCard,\r\n                  playerCardItem,\r\n                  activePlayerCoord\r\n                )}\r\n                onClick={() =>\r\n                  dispatch({\r\n                    type: \"clickedPlayer\",\r\n                    payload: playerCardItem,\r\n                  })\r\n                }\r\n              ></PlayerCard>\r\n            );\r\n\r\n            const contextMenu = (\r\n              <ContextMenu\r\n                key=\"contextMenu\"\r\n                id={\"contextMenu\"}\r\n                className={\"contextMenu\"}\r\n              >\r\n                <Button\r\n                  onClick={() => {\r\n                    dispatch({\r\n                      type: \"clickedContextMenu\",\r\n                      payload: {\r\n                        card: playerCardItem,\r\n                        buttonType: \"share\",\r\n                      },\r\n                    });\r\n                  }}\r\n                >\r\n                  –ø–µ—Ä–µ–¥–∞—Ç—å\r\n                </Button>\r\n                <Button\r\n                  onClick={() => {\r\n                    dispatch({\r\n                      type: \"clickedContextMenu\",\r\n                      payload: { card: playerCardItem, buttonType: \"heal\" },\r\n                    });\r\n                  }}\r\n                >\r\n                  –ª–µ—á–∏—Ç—å\r\n                </Button>\r\n              </ContextMenu>\r\n            );\r\n\r\n            switch (playerCardItem.showContextMenu) {\r\n              case true: {\r\n                console.log(numberOfPlayer);\r\n                const activePLayerCoord = playerList[numberOfPlayer].coord;\r\n                const currplayerCoord = playerCardItem.coord;\r\n\r\n                const contextMenuCoord = getContextMenuCoord(\r\n                  activePLayerCoord,\r\n                  currplayerCoord\r\n                );\r\n\r\n                console.log(contextMenuCoord);\r\n\r\n                const [hor, vert] = contextMenuCoord.split(\".\");\r\n                const fieildElem = document.getElementById(\"field\");\r\n\r\n                switch (fieildElem) {\r\n                  case null: {\r\n                    return playerCard;\r\n                  }\r\n\r\n                  default: {\r\n                    const portal = ReactDOM.createPortal(\r\n                      <ContextMenuPortal\r\n                        coordX={String(hor)}\r\n                        coordY={String(vert)}\r\n                        key=\"portal\"\r\n                      >\r\n                        {contextMenu}\r\n                      </ContextMenuPortal>,\r\n                      fieildElem\r\n                    );\r\n                    return (\r\n                      <React.Fragment key=\"fragment\">\r\n                        {playerCard}\r\n                        {portal}\r\n                      </React.Fragment>\r\n                    );\r\n                  }\r\n                }\r\n              }\r\n\r\n              default: {\r\n                return playerCard;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      })}\r\n    </PlayerCardList>\r\n  );\r\n\r\n  switch (needSplitCards) {\r\n    case false: {\r\n      return playerCardList;\r\n    }\r\n    case true: {\r\n      const fieildElem = document.getElementById(\"field\");\r\n      switch (fieildElem) {\r\n        case null: {\r\n          return playerCardList;\r\n        }\r\n\r\n        default: {\r\n          const [hor, vert] = playerListOnCell[0].coord.split(\".\");\r\n          const portal = ReactDOM.createPortal(\r\n            <PLayersPortal coordX={hor} coordY={vert}>\r\n              {playerCardList}\r\n            </PLayersPortal>,\r\n            fieildElem\r\n          );\r\n          return portal;\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nconst calculateHighlightning = (\r\n  coordOfAvailableCards: string[] | null,\r\n  typeOfChosedCard: TypeOfCard,\r\n  playerCardItem: PLayerType,\r\n  activePlayerCoord: string\r\n) => {\r\n  const isActivePlayer = activePlayerCoord === playerCardItem.coord;\r\n  switch (coordOfAvailableCards) {\r\n    case null: {\r\n      return false;\r\n    }\r\n    default: {\r\n      const canInteractWithPlayer = coordOfAvailableCards.includes(\r\n        playerCardItem.coord\r\n      );\r\n\r\n      switch (canInteractWithPlayer) {\r\n        case true: {\r\n          switch (typeOfChosedCard) {\r\n            case \"health\": {\r\n              return true;\r\n            }\r\n\r\n            case \"weapon\":\r\n            case \"boards\": {\r\n              switch (!isActivePlayer) {\r\n                case true: {\r\n                  return true;\r\n                }\r\n                case false: {\r\n                  return false;\r\n                }\r\n                default: {\r\n                  return false;\r\n                }\r\n              }\r\n            }\r\n\r\n            default: {\r\n              return false;\r\n            }\r\n          }\r\n        }\r\n        case false: {\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nconst getContextMenuCoord = (\r\n  activePLayerCoord: string,\r\n  currplayerCoord: string\r\n) => {\r\n  const [horActive, vertActive] = activePLayerCoord.split(\".\");\r\n  const [horCurrent, vertCurrent] = currplayerCoord.split(\".\");\r\n\r\n  const differenceHor = getNewCoordHor(horCurrent, horActive);\r\n  const differenceVert = getNewCoordVert(vertCurrent, vertActive);\r\n  return `${differenceHor}.${differenceVert}`;\r\n};\r\n\r\nconst getNewCoordHor = (firstNumber: string, secondNUmber: string) => {\r\n  const difference = Number(firstNumber) - Number(secondNUmber);\r\n  if (difference > 0) {\r\n    return Number(secondNUmber);\r\n  } else if (difference < 0) {\r\n    return Number(secondNUmber) + 3;\r\n  } else {\r\n    return Number(secondNUmber);\r\n  }\r\n};\r\n\r\nconst getNewCoordVert = (firstNumber: string, secondNUmber: string) => {\r\n  const difference = Number(firstNumber) - Number(secondNUmber);\r\n  if (difference > 0) {\r\n    return Number(secondNUmber) + 2;\r\n  } else if (difference < 0) {\r\n    return Number(secondNUmber) + 1;\r\n  } else {\r\n    return Number(secondNUmber) + 1;\r\n  }\r\n};\r\n","export default __webpack_public_path__ + \"static/media/zombie.0f20e592.png\";","export default __webpack_public_path__ + \"static/media/zombie_defeated.6e922b33.png\";","import { useDispatch } from \"react-redux\";\r\nimport styled from \"styled-components\";\r\n\r\nimport { DeadPlayerListType, EnemyCardType } from \"../../business/types\";\r\nimport { StyledCommonCard } from \"../CommonCard/CommonCard\";\r\n\r\nimport zombie from \"./zombie.png\";\r\nimport zombie_defeated from \"./zombie_defeated.png\";\r\n\r\ntype EnemyArray = {\r\n  list: [string, EnemyCardType][];\r\n  activePlayerNumber: number;\r\n  deadPlayerList: DeadPlayerListType;\r\n  coord: string;\r\n};\r\n\r\ntype EnemyCardApperanceType = EnemyCardType & {\r\n  isCurrent: boolean;\r\n};\r\n\r\ntype EnemyCardListType = {\r\n  needSplitCards?: boolean;\r\n  needReverseCards?: boolean;\r\n};\r\n\r\nconst EnemyCard = styled.div<EnemyCardApperanceType>`\r\n  ${StyledCommonCard}\r\n  position: static;\r\n  font-size: 47px;\r\n  text-align: start;\r\n  vertical-align: bottom;\r\n  line-height: 0.15;\r\n  text-transform: unset;\r\n  font-family: sans-serif;\r\n  text-indent: -4px;\r\n  cursor: pointer;\r\n  background-color: ${(props) => {\r\n    if (props.apperance === \"open\" || props.apperance === \"defeated\") {\r\n      return \"unset\";\r\n    }\r\n  }};\r\n\r\n  cursor: ${(props) => {\r\n    if (props.apperance === \"closed\") {\r\n      return \"default\";\r\n    } else {\r\n      return \"pointer\";\r\n    }\r\n  }};\r\n\r\n  background-image: ${(props) => {\r\n    switch (props.apperance) {\r\n      case \"defeated\": {\r\n        return `url(${zombie_defeated})`;\r\n      }\r\n      case \"open\": {\r\n        return `url(${zombie})`;\r\n      }\r\n    }\r\n  }};\r\n\r\n  z-index: ${(props) => {\r\n    switch (props.isCurrent) {\r\n      case true: {\r\n        return \"4\";\r\n      }\r\n      case false: {\r\n        switch (props.apperance) {\r\n          case \"open\": {\r\n            return \"3\";\r\n          }\r\n          default: {\r\n            return \"2\";\r\n          }\r\n        }\r\n      }\r\n      default: {\r\n        return \"2\";\r\n      }\r\n    }\r\n  }};\r\n\r\n  &:before {\r\n    content: \"\";\r\n    position: absolute;\r\n    width: 24px;\r\n    height: 24px;\r\n    border-radius: 1px;\r\n    padding: 4px;\r\n    left: 4px;\r\n    top: 4px;\r\n    opacity: 0.5;\r\n    border: ${(props) => {\r\n      if (props.isCurrent) {\r\n        return \"5px solid #8834b8\";\r\n      }\r\n    }};\r\n  }\r\n`;\r\n\r\nconst EnemyCardList = styled.div<EnemyCardListType>`\r\n  display: flex;\r\n  flex-wrap: nowrap;\r\n  position: absolute;\r\n  font-size: 12px;\r\n  font-weight: bold;\r\n  flex-direction: ${(props) => {\r\n    if (props.needReverseCards) {\r\n      return \"row-reverse\";\r\n    } else {\r\n      return \"row\";\r\n    }\r\n  }};\r\n\r\n  margin: ${(props) => {\r\n    if (props.needSplitCards) {\r\n      return \" 0 0 !important;\";\r\n    }\r\n  }};\r\n\r\n  > * {\r\n    position: ${(props) => {\r\n      if (props.needSplitCards) {\r\n        return \"relative !important\";\r\n      }\r\n    }};\r\n\r\n    margin: ${(props) => {\r\n      if (props.needSplitCards) {\r\n        return \"0 -12px\";\r\n      }\r\n    }};\r\n  }\r\n`;\r\n\r\nexport const EnemyList = (props: EnemyArray) => {\r\n  const dispatch = useDispatch();\r\n  const { list: enemyArray, deadPlayerList, activePlayerNumber, coord } = props;\r\n\r\n  const enemyListOnCell = enemyArray.map((enemyItem) => {\r\n    const [, enemyCard] = enemyItem;\r\n    return enemyCard;\r\n  });\r\n\r\n  const needSplitCards = enemyListOnCell.length > 1;\r\n\r\n  const firstItemIsClosed = enemyListOnCell[0].apperance === \"closed\";\r\n\r\n  const indexOfActiveCard = enemyArray.findIndex(([index, enemyCard]) => {\r\n    if (deadPlayerList && deadPlayerList[activePlayerNumber]) {\r\n      return Number(index) === Number(deadPlayerList[activePlayerNumber].index);\r\n    } else {\r\n      return -1;\r\n    }\r\n  });\r\n\r\n  const needReverseCards =\r\n    (indexOfActiveCard !== 0 && needSplitCards) ||\r\n    (firstItemIsClosed && needSplitCards);\r\n\r\n  return (\r\n    <EnemyCardList\r\n      needSplitCards={needSplitCards}\r\n      needReverseCards={needReverseCards}\r\n    >\r\n      {enemyArray.map(([index, enemyCard]) => {\r\n        if (deadPlayerList) {\r\n          const isActivePlayerDead = deadPlayerList[activePlayerNumber]\r\n            ? true\r\n            : false;\r\n\r\n          switch (isActivePlayerDead) {\r\n            case false: {\r\n              return (\r\n                <EnemyCard\r\n                  key={index}\r\n                  {...enemyCard}\r\n                  isCurrent={false}\r\n                  onClick={() => {\r\n                    dispatch({\r\n                      type: \"clickedEnemy\",\r\n                      payload: { enemyCard: enemyCard },\r\n                    });\r\n                  }}\r\n                ></EnemyCard>\r\n              );\r\n            }\r\n\r\n            case true: {\r\n              return (\r\n                <EnemyCard\r\n                  key={index}\r\n                  {...enemyCard}\r\n                  isCurrent={\r\n                    Number(deadPlayerList[activePlayerNumber].index) ===\r\n                    Number(index)\r\n                  }\r\n                  onClick={() => {\r\n                    dispatch({\r\n                      type: \"clickedEnemy\",\r\n                      payload: { enemyCard: enemyCard },\r\n                    });\r\n                  }}\r\n                ></EnemyCard>\r\n              );\r\n            }\r\n          }\r\n        } else {\r\n          return (\r\n            <EnemyCard\r\n              key={index}\r\n              {...enemyCard}\r\n              isCurrent={false}\r\n              onClick={() => {\r\n                dispatch({\r\n                  type: \"clickedEnemy\",\r\n                  payload: { enemyCard: enemyCard },\r\n                });\r\n              }}\r\n            ></EnemyCard>\r\n          );\r\n        }\r\n      })}\r\n    </EnemyCardList>\r\n  );\r\n};\r\n","export default __webpack_public_path__ + \"static/media/boards.3824da3f.png\";","import styled from \"styled-components\";\r\nimport { StyledCommonCard } from \"../CommonCard/CommonCard\";\r\nimport img from \"./boards.png\";\r\n\r\ntype BoardsApperanceType = {\r\n  apperance?: \"closed\" | \"open\";\r\n};\r\n\r\nconst StyledBoardsCard = styled.div<BoardsApperanceType>`\r\n  ${StyledCommonCard}\r\n  background-color: ${(props) => {\r\n    if (props.apperance === \"open\") {\r\n      return \"unset\";\r\n    }\r\n  }};\r\n\r\n  background-image: ${(props) => {\r\n    if (props.apperance === \"open\") {\r\n      return `url(${img})`;\r\n    }\r\n  }};\r\n\r\n  border-color: ${(props) => {\r\n    if (props.apperance === \"open\") {\r\n      return \"gray\";\r\n    }\r\n  }};\r\n`;\r\n\r\nexport const BoardsCard = (props: BoardsApperanceType) => {\r\n  return (\r\n    <StyledBoardsCard {...props}>\r\n      {/*  {props.apperance === \"closed\" ? null : \"X\"} */}\r\n    </StyledBoardsCard>\r\n  );\r\n};\r\n","export default __webpack_public_path__ + \"static/media/weapon.b3c5e028.png\";","import styled from \"styled-components\";\r\nimport { StyledCommonCard } from \"../CommonCard/CommonCard\";\r\nimport img from \"./weapon.png\";\r\n\r\ntype WeaponApperanceType = {\r\n  apperance?: \"closed\" | \"open\";\r\n};\r\n\r\nconst StyledWeaponCard = styled.div<WeaponApperanceType>`\r\n  ${StyledCommonCard}\r\n  background-color: ${(props) => {\r\n    if (props.apperance === \"open\") {\r\n      return \"unset\";\r\n    }\r\n  }};\r\n\r\n  border-color: ${(props) => {\r\n    if (props.apperance === \"open\") {\r\n      return \"gray\";\r\n    }\r\n  }};\r\n  background-image: ${(props) => {\r\n    if (props.apperance === \"open\") {\r\n      return `url(${img})`;\r\n    }\r\n  }};\r\n`;\r\n\r\nexport const WeaponCard = (props: WeaponApperanceType) => {\r\n  return (\r\n    <StyledWeaponCard {...props}>\r\n      {/*      {props.apperance === \"closed\" ? null : \"O\"} */}\r\n    </StyledWeaponCard>\r\n  );\r\n};\r\n","import { Health, BoardsCard, WeaponCard } from \"../../components\";\r\nimport { CellType } from \"../../business/types\";\r\n\r\nexport const getCards = (cell: CellType, hor: string, vert: string) => {\r\n  const healthCardItem = cell.cardItem.find(\r\n    (cardItem) => cardItem?.name === \"health\"\r\n  );\r\n\r\n  const boardsCardItem = cell.cardItem.find(\r\n    (cardItem) => cardItem?.name === \"boards\"\r\n  );\r\n  const weaponCardItem = cell.cardItem.find(\r\n    (cardItem) => cardItem?.name === \"weapon\"\r\n  );\r\n\r\n  return (\r\n    <>\r\n      {healthCardItem ? (\r\n        <Health\r\n          apperance={healthCardItem.apperance}\r\n          className={\"\"}\r\n          key={`${hor}.${vert}.health`}\r\n        />\r\n      ) : null}\r\n      {boardsCardItem ? (\r\n        <BoardsCard\r\n          apperance={boardsCardItem.apperance}\r\n          key={`${hor}.${vert}.boards`}\r\n        />\r\n      ) : null}\r\n      {weaponCardItem ? (\r\n        <WeaponCard\r\n          apperance={weaponCardItem.apperance}\r\n          key={`${hor}.${vert}.weapon`}\r\n        />\r\n      ) : null}\r\n    </>\r\n  );\r\n};\r\n","import { PlayerList } from \"../../components\";\r\n\r\nimport { PlayerListType, GameState } from \"../../business/types\";\r\n\r\nexport const getPlayersList = (\r\n  index: string,\r\n  playersList: PlayerListType,\r\n  numberOfPlayer: number,\r\n  gameState: GameState\r\n) => {\r\n  const playerItemList = Object.entries(playersList);\r\n\r\n  const playerListOnCell = playerItemList\r\n    .filter((playerItem) => {\r\n      const [, playerCard] = playerItem;\r\n      return playerCard.coord === index && playerCard.name === \"player\";\r\n    })\r\n    .map((playerItem) => {\r\n      const [, playerCard] = playerItem;\r\n      return playerCard;\r\n    });\r\n\r\n  const hasPlayerOncell = playerListOnCell.length > 0;\r\n\r\n  switch (hasPlayerOncell) {\r\n    case true: {\r\n      return (\r\n        <PlayerList\r\n          playerListOnCell={playerListOnCell}\r\n          playerList={playersList}\r\n          numberOfPlayer={numberOfPlayer}\r\n          gameState={gameState}\r\n        />\r\n      );\r\n    }\r\n    case false: {\r\n      return null;\r\n    }\r\n  }\r\n};\r\n","import { EnemyList } from \"../../components\";\r\n\r\nimport {\r\n  EnemyListType,\r\n  EnemyCardType,\r\n  DeadPlayerListType,\r\n} from \"../../business/types\";\r\n\r\nexport const getEnemyList = (\r\n  index: string,\r\n  enemiesList: EnemyListType,\r\n  deadPlayerList: DeadPlayerListType,\r\n  activePlayerNumber: number\r\n) => {\r\n  /**\r\n   * Need to draw enemy if current coord of cell has the same coord\r\n   */\r\n  const filteredEnemiesArr = Object.entries(enemiesList).filter(\r\n    ([string, enemyCard]) => enemyCard.coord === index\r\n  );\r\n\r\n  if (filteredEnemiesArr.length > 0) {\r\n    return (\r\n      <EnemyList\r\n        list={filteredEnemiesArr}\r\n        activePlayerNumber={activePlayerNumber}\r\n        deadPlayerList={deadPlayerList}\r\n        coord={index}\r\n      />\r\n    );\r\n  } else return null;\r\n};\r\n","import { MoveDirection } from \"../../types\";\r\n\r\n/**\r\n * Returns new coordinate of player.\r\n * @param currentCoord A string of current coordinate.\r\n * @param direction  A string of direction.\r\n * @returns A string with new coordinate.\r\n */\r\n\r\nexport const getNextPlayerCoord = (\r\n  currentCoord: string,\r\n  direction: MoveDirection\r\n) => {\r\n  \r\n  const [currPlayerHor, currPlayerVert] = currentCoord.split(\".\");\r\n  const nextPlayerVert = parseInt(currPlayerVert) + 1;\r\n  const nextPlayerHor = parseInt(currPlayerHor) + 1;\r\n  const prevPlayerVert = parseInt(currPlayerVert) - 1;\r\n  const prevPlayerHor = parseInt(currPlayerHor) - 1;\r\n\r\n  switch (direction) {\r\n    case \"top\": {\r\n      return `${currPlayerHor}.${nextPlayerVert}`;\r\n    }\r\n\r\n    case \"bottom\": {\r\n      return `${currPlayerHor}.${prevPlayerVert}`;\r\n    }\r\n\r\n    case \"left\": {\r\n      return `${prevPlayerHor}.${currPlayerVert}`;\r\n    }\r\n\r\n    case \"right\": {\r\n      return `${nextPlayerHor}.${currPlayerVert}`;\r\n    }\r\n\r\n    default:\r\n      return `${currPlayerHor}.${currPlayerVert}`;\r\n  }\r\n};\r\n","import {\r\n  AvailableCellListType,\r\n  GameField,\r\n  MoveDirectionList,\r\n} from \"../../types\";\r\nimport { getNextPlayerCoord } from \"./getNextPlayerCoord\";\r\n\r\nexport const MOVE_DIRECTION_LIST: MoveDirectionList = [\r\n  \"top\",\r\n  \"right\",\r\n  \"bottom\",\r\n  \"left\",\r\n];\r\n\r\n/**\r\n * Returns the coordinates of neighboribgCells that lying in the GameField.\r\n */\r\nexport const getNeighboringCellList = (\r\n  prevPlayerCoord: string,\r\n  gameField: GameField\r\n): AvailableCellListType => {\r\n  const coordNeighboringCells: AvailableCellListType = MOVE_DIRECTION_LIST.map(\r\n    (directionItem) => {\r\n      return {\r\n        direction: directionItem,\r\n        coord: getNextPlayerCoord(prevPlayerCoord, directionItem),\r\n      };\r\n    }\r\n  );\r\n\r\n  /**\r\n   * Returns the coordinates that lying in the GameField.\r\n   */\r\n  const existanceInGameFieldCells: AvailableCellListType =\r\n    coordNeighboringCells.filter((cellItem) => {\r\n      const { coord } = cellItem;\r\n      return gameField.values[coord];\r\n    });\r\n\r\n  return existanceInGameFieldCells;\r\n};\r\n","export default __webpack_public_path__ + \"static/media/door2.026ae7fc.png\";","export default __webpack_public_path__ + \"static/media/window2.5b58d59d.png\";","import { useDispatch, useSelector } from \"react-redux\";\r\n\r\nimport styled from \"styled-components\";\r\n\r\nimport { getNeighboringCellList } from \"../../business/phases/common/getNeighboringCellList\";\r\n\r\nimport closedDoor from \"../../assets/door2.png\";\r\nimport closedWindow from \"../../assets/window2.png\";\r\nimport door from \"../../assets/door.png\";\r\nimport window from \"../../assets/window.png\";\r\n\r\nimport {\r\n  State,\r\n  MoveDirection,\r\n  BarrierItem,\r\n  AvailableCellListType,\r\n  GameField,\r\n  GameState,\r\n  PlayerListType,\r\n  CellType,\r\n  AvailableCellType,\r\n  PlayGridMode,\r\n} from \"../../business/types\";\r\n\r\ntype WallType = {\r\n  barrierItem?: BarrierItem;\r\n  //TODO: –ø–æ–ø—Ä–∞–≤–∏—Ç—å —Ç–∏–ø?\r\n  highlightningList: (MoveDirection | null)[] | null;\r\n  onClick: Function;\r\n};\r\n\r\ntype BarrierCoord = {\r\n  orderIndex: string;\r\n};\r\n\r\nconst CommonWall = styled.div<WallType>`\r\n  pointer-events: ${(props) => {\r\n    if (\r\n      props.barrierItem &&\r\n      props.barrierItem.name !== \"wall\" &&\r\n      props.barrierItem.isOpen\r\n    ) {\r\n      const needHighlightning = props.highlightningList?.find((item) => {\r\n        return item === \"bottom\" || \"left\";\r\n      });\r\n      if (needHighlightning) {\r\n        return \"defaulr\";\r\n      } else {\r\n        return \"none\";\r\n      }\r\n    } else {\r\n      return \"none\";\r\n    }\r\n  }};\r\n\r\n  cursor: ${(props) => {\r\n    switch (props.barrierItem?.name) {\r\n      case \"wall\": {\r\n        return \"default\";\r\n      }\r\n      case \"door\": {\r\n        return \"pointer\";\r\n      }\r\n      case \"window\": {\r\n        return \"pointer\";\r\n      }\r\n      default:\r\n        return \"default\";\r\n    }\r\n  }};\r\n\r\n  &:before {\r\n    content: \"\";\r\n    position: absolute;\r\n    width: 50px;\r\n    height: 50px;\r\n    bottom: 0px;\r\n    z-index: 5;\r\n  }\r\n`;\r\n\r\nconst WallImage = styled(CommonWall)<WallType>`\r\n  transform: ${(props) => {\r\n    switch (props.barrierItem?.direction) {\r\n      case \"left\": {\r\n        return \"rotate(90deg)\";\r\n      }\r\n      default: {\r\n        return \"null\";\r\n      }\r\n    }\r\n  }};\r\n\r\n  &:before {\r\n    pointer-events: none;\r\n    bottom: ${(props) => {\r\n      switch (props.barrierItem?.direction) {\r\n        case \"bottom\": {\r\n          return \"-30px\";\r\n        }\r\n        case \"left\": {\r\n          return \"-55px\";\r\n        }\r\n        default: {\r\n          return \"null\";\r\n        }\r\n      }\r\n    }};\r\n\r\n    left: ${(props) => {\r\n      switch (props.barrierItem?.direction) {\r\n        case \"left\": {\r\n          return \"-25px\";\r\n        }\r\n        default: {\r\n          return \"null\";\r\n        }\r\n      }\r\n    }};\r\n\r\n    background-size: 44px;\r\n    background-image: ${(props) => {\r\n      switch (\r\n        props.barrierItem &&\r\n        props.barrierItem.name !== \"wall\" &&\r\n        props.barrierItem.isOpen\r\n      ) {\r\n        case true: {\r\n          switch (props.barrierItem?.name) {\r\n            case \"door\": {\r\n              return `url(${door})`;\r\n            }\r\n            case \"window\": {\r\n              return `url(${window})`;\r\n            }\r\n            default: {\r\n              return \"unset\";\r\n            }\r\n          }\r\n        }\r\n        case false: {\r\n          switch (props.barrierItem?.name) {\r\n            case \"door\": {\r\n              return `url(${closedDoor})`;\r\n            }\r\n            case \"window\": {\r\n              return `url(${closedWindow})`;\r\n            }\r\n            default: {\r\n              return \"unset\";\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }};\r\n  }\r\n\r\n  &:after {\r\n    content: \"\";\r\n    z-index: 5;\r\n    position: absolute;\r\n    width: 50px;\r\n    height: 50px;\r\n    z-index: 5;\r\n\r\n    top: ${(props) => {\r\n      if (props.barrierItem?.direction === \"left\") {\r\n        return \"14px\";\r\n      }\r\n    }};\r\n\r\n    width: ${(props) => {\r\n      if (props.barrierItem?.direction === \"left\") {\r\n        return \"50px\";\r\n      }\r\n    }};\r\n\r\n    height: ${(props) => {\r\n      if (\r\n        props.barrierItem?.direction === \"bottom\" ||\r\n        props.barrierItem?.direction === \"left\"\r\n      ) {\r\n        return \"20px\";\r\n      }\r\n    }};\r\n\r\n    bottom: ${(props) => {\r\n      if (props.barrierItem?.direction === \"bottom\") {\r\n        return \"-10px\";\r\n      }\r\n    }};\r\n\r\n    left: ${(props) => {\r\n      if (props.barrierItem?.direction === \"left\") {\r\n        return \"-25px\";\r\n      }\r\n    }};\r\n\r\n    background-color: ${(props) => {\r\n      if (\r\n        props.barrierItem &&\r\n        props.barrierItem.name !== \"wall\" &&\r\n        props.barrierItem.isOpen\r\n      ) {\r\n        const needHighlightning = props.highlightningList?.find((item) => {\r\n          return item === \"bottom\" || \"left\";\r\n        });\r\n        if (needHighlightning) {\r\n          return \"#79fe2f42\";\r\n        } else {\r\n          return \"none\";\r\n        }\r\n      }\r\n    }};\r\n  }\r\n`;\r\n\r\nconst Wall = styled(CommonWall)<WallType>`\r\n  &:before {\r\n    pointer-events: none;\r\n    height: ${(props) => {\r\n      if (props.barrierItem?.direction === \"bottom\") {\r\n        if (\r\n          props.barrierItem &&\r\n          props.barrierItem.name !== \"wall\" &&\r\n          props.barrierItem.isOpen === false\r\n        ) {\r\n          return \"10px\";\r\n        } else {\r\n          switch (props.barrierItem.name) {\r\n            case \"wall\": {\r\n              return \"5px\";\r\n            }\r\n            case \"door\": {\r\n              return \"3px\";\r\n            }\r\n            case \"window\": {\r\n              return \"3px\";\r\n            }\r\n            default:\r\n              return \"0px\";\r\n          }\r\n        }\r\n      } else if (\r\n        props.barrierItem &&\r\n        props.barrierItem.direction === \"left\" &&\r\n        props.barrierItem.name !== null\r\n      ) {\r\n        return \"50px\";\r\n        //it is needed for now for pretty  wall painting\r\n      } else if (props.barrierItem && props.barrierItem.name === null) {\r\n        return \"5px\";\r\n      } else {\r\n        return \"0px\";\r\n      }\r\n    }};\r\n\r\n    width: ${(props) => {\r\n      if (props.barrierItem?.direction === \"left\") {\r\n        if (\r\n          props.barrierItem &&\r\n          props.barrierItem.name !== \"wall\" &&\r\n          props.barrierItem.isOpen === false\r\n        ) {\r\n          return \"10px\";\r\n        } else {\r\n          switch (props.barrierItem.name) {\r\n            case \"wall\": {\r\n              return \"5px \";\r\n            }\r\n            case \"door\": {\r\n              return \"3px\";\r\n            }\r\n            case \"window\": {\r\n              return \"3px\";\r\n            }\r\n            default:\r\n              return \"5px\";\r\n          }\r\n        }\r\n      } else {\r\n        return \"none\";\r\n      }\r\n    }};\r\n\r\n    background-color: ${(props) => {\r\n      if (\r\n        (props.barrierItem && props.barrierItem.name === \"wall\") ||\r\n        (props.barrierItem && props.barrierItem.isOpen)\r\n      ) {\r\n        const needHighlightning = props.highlightningList?.find((item) => {\r\n          return item === \"bottom\" || \"left\";\r\n        });\r\n        switch (props.barrierItem.name) {\r\n          case \"wall\": {\r\n            return \"#f09308;\";\r\n          }\r\n          case \"door\": {\r\n            if (needHighlightning) {\r\n              return \"#78ff2d\";\r\n            } else {\r\n              return \" #584324;\";\r\n            }\r\n          }\r\n          case \"window\": {\r\n            if (needHighlightning) {\r\n              return \"#78ff2d\";\r\n            } else {\r\n              return \" #a3cdd8;\";\r\n            }\r\n          }\r\n          default:\r\n            return \"#f09308\";\r\n        }\r\n      } else if (props.barrierItem?.isOpen === false) {\r\n        return \"#66615d;\";\r\n      } else {\r\n        return \"none\";\r\n      }\r\n    }};\r\n  }\r\n\r\n  &:after {\r\n    content: \"\";\r\n    z-index: 5;\r\n    position: absolute;\r\n    width: 50px;\r\n    height: 50px;\r\n    z-index: 5;\r\n\r\n    top: ${(props) => {\r\n      if (props.barrierItem?.direction === \"left\") {\r\n        return \"0\";\r\n      }\r\n    }};\r\n\r\n    height: ${(props) => {\r\n      if (props.barrierItem?.direction === \"bottom\" && props.barrierItem) {\r\n        return \"20px\";\r\n      }\r\n    }};\r\n\r\n    width: ${(props) => {\r\n      if (props.barrierItem?.direction === \"left\") {\r\n        return \"20px\";\r\n      }\r\n    }};\r\n\r\n    bottom: ${(props) => {\r\n      if (props.barrierItem?.direction === \"bottom\") {\r\n        return \"-10px\";\r\n      }\r\n    }};\r\n\r\n    left: ${(props) => {\r\n      if (props.barrierItem?.direction === \"left\") {\r\n        return \"-10px\";\r\n      }\r\n    }};\r\n\r\n    background-color: ${(props) => {\r\n      if (\r\n        props.barrierItem &&\r\n        props.barrierItem.name !== \"wall\" &&\r\n        props.barrierItem.isOpen\r\n      ) {\r\n        const needHighlightning = props.highlightningList?.find((item) => {\r\n          return item === \"bottom\" || \"left\";\r\n        });\r\n        if (needHighlightning) {\r\n          return \"#79fe2f42\";\r\n        } else {\r\n          return \"none\";\r\n        }\r\n      }\r\n    }};\r\n  }\r\n`;\r\n\r\nexport const Barrier = (props: BarrierCoord) => {\r\n  const dispatch = useDispatch();\r\n  const { gameField, playerList, activePlayerNumber, gameState, _config } =\r\n    useSelector((state: State) => ({\r\n      ...state,\r\n    }));\r\n\r\n  const orderIndex = props.orderIndex;\r\n  const cellValues = gameField.values[orderIndex];\r\n  const isCurrPlayerAlive = playerList[activePlayerNumber] ? true : false;\r\n\r\n  switch (cellValues.name) {\r\n    case \"commonCell\": {\r\n      const barrierList = cellValues.barrierList?.map((barrier) => {\r\n        const getWallItem = (\r\n          barrier: BarrierItem,\r\n          mode: PlayGridMode,\r\n          highlightningList: any,\r\n          onClickHandler: any\r\n        ) => {\r\n          switch (mode) {\r\n            case \"cssStyle\": {\r\n              return (\r\n                <Wall\r\n                  key={barrier.direction}\r\n                  barrierItem={barrier}\r\n                  highlightningList={\r\n                    highlightningList ? highlightningList() : null\r\n                  }\r\n                  onClick={() => onClickHandler()}\r\n                ></Wall>\r\n              );\r\n            }\r\n            case \"image\": {\r\n              return (\r\n                <WallImage\r\n                  key={barrier.direction}\r\n                  barrierItem={barrier}\r\n                  highlightningList={\r\n                    highlightningList ? highlightningList() : null\r\n                  }\r\n                  onClick={() => onClickHandler()}\r\n                ></WallImage>\r\n              );\r\n            }\r\n          }\r\n        };\r\n        switch (isCurrPlayerAlive) {\r\n          case false: {\r\n            return getWallItem(barrier, _config.playGridMode, null, null);\r\n          }\r\n\r\n          case true: {\r\n            const currPlayerCoord = playerList[activePlayerNumber].coord;\r\n\r\n            const neighboringCellList = getNeighboringCellList(\r\n              currPlayerCoord,\r\n              gameField\r\n            );\r\n\r\n            const neighboringCellListCoord = neighboringCellList.map(\r\n              (cellItem) => {\r\n                return cellItem.coord;\r\n              }\r\n            );\r\n\r\n            const checkCellListCoord =\r\n              neighboringCellListCoord.concat(currPlayerCoord);\r\n\r\n            const needCheckHighlightning = checkCellListCoord.find(\r\n              (coord) => orderIndex === coord\r\n            );\r\n\r\n            const highlightningList = getHighlightningList(\r\n              neighboringCellList,\r\n              gameField,\r\n              currPlayerCoord,\r\n              gameState,\r\n              playerList,\r\n              activePlayerNumber\r\n            );\r\n\r\n            const getHighlightningListItem = () => {\r\n              return needCheckHighlightning\r\n                ? getHigtlightningDirection(\r\n                    highlightningList,\r\n                    orderIndex,\r\n                    barrier.direction\r\n                  )\r\n                : null;\r\n            };\r\n\r\n            const onClickHandler = () => {\r\n              const canCloseHole = highlightningList.find((cellType) => {\r\n                return (\r\n                  cellType?.coord === orderIndex &&\r\n                  cellType?.direction === barrier.direction &&\r\n                  barrier.name !== \"wall\" &&\r\n                  barrier.isOpen === true\r\n                );\r\n              })\r\n                ? true\r\n                : false;\r\n              if (canCloseHole) {\r\n                dispatch({\r\n                  type: \"req-fillHole\",\r\n                  payload: {\r\n                    coord: orderIndex,\r\n                    direction: barrier.direction,\r\n                  },\r\n                });\r\n              } else {\r\n                return null;\r\n              }\r\n            };\r\n\r\n            return getWallItem(\r\n              barrier,\r\n              _config.playGridMode,\r\n              getHighlightningListItem,\r\n              onClickHandler\r\n            );\r\n          }\r\n        }\r\n      });\r\n      return <>{barrierList}</>;\r\n    }\r\n    default: {\r\n      return null;\r\n    }\r\n  }\r\n};\r\n\r\nconst getHigtlightningDirection = (\r\n  highlightningList: (AvailableCellType | null)[],\r\n  orderIndex: string,\r\n  direction: MoveDirection\r\n) => {\r\n  const currList = highlightningList.filter((cellItem) => {\r\n    return cellItem?.coord === orderIndex && cellItem?.direction === direction;\r\n  });\r\n\r\n  const structuredList = currList.map((cellItem) => {\r\n    if (cellItem) {\r\n      const { direction } = cellItem;\r\n      return direction;\r\n    } else {\r\n      return null;\r\n    }\r\n  });\r\n\r\n  return structuredList;\r\n};\r\n\r\n/**\r\n * Check the neifhboring of that coord.\r\n * Have they door or window\r\n */\r\nconst getHighlightningList = (\r\n  neighboringCellList: AvailableCellListType,\r\n  gameField: GameField,\r\n  currCoord: string,\r\n  gameState: GameState,\r\n  playerList: PlayerListType,\r\n  numberOfPlayer: number\r\n) => {\r\n  const currCell = gameField.values[currCoord];\r\n\r\n  const availableCellList = neighboringCellList\r\n    .map((cellItem) => {\r\n      const { direction, coord } = cellItem;\r\n      const currCellHasHole = checkCellOnHole(currCell, direction);\r\n      const nextCell = gameField.values[coord];\r\n      const oppositeDirection = getOppositeDirection(direction);\r\n      const nextCellHasHole = checkCellOnHole(nextCell, oppositeDirection);\r\n      if (currCellHasHole) {\r\n        const cellItemWithHole: AvailableCellType = {\r\n          direction,\r\n          coord: currCoord,\r\n        };\r\n\r\n        return cellItemWithHole;\r\n      } else if (nextCellHasHole) {\r\n        const cellItemWithHole: AvailableCellType = {\r\n          direction: oppositeDirection,\r\n          coord,\r\n        };\r\n        return cellItemWithHole;\r\n      } else {\r\n        return null;\r\n      }\r\n    })\r\n    .filter((availableCell) => availableCell !== null);\r\n\r\n  switch (gameState.type) {\r\n    case \"gameStarted.applyCard\":\r\n      const cardItemList = playerList[numberOfPlayer].inventory;\r\n      const typeOfSelectedCard = cardItemList.cardSelected;\r\n      /*  const typeOfSelectedCard = selectedCard?.name; */\r\n      if (typeOfSelectedCard === \"boards\") {\r\n        return availableCellList;\r\n      } else {\r\n        return [];\r\n      }\r\n\r\n    default:\r\n      return [];\r\n  }\r\n};\r\n\r\nconst checkCellOnHole = (cell: CellType, direction: MoveDirection) => {\r\n  if (cell.name === \"commonCell\") {\r\n    if (direction === \"left\" || direction === \"bottom\") {\r\n      const cellHasWindow = cell.barrierList?.find(\r\n        (barrier) => barrier.name === \"window\"\r\n      )\r\n        ? true\r\n        : false;\r\n      const cellHasDoor = cell.barrierList?.find(\r\n        (barrier) => barrier.name === \"door\"\r\n      )\r\n        ? true\r\n        : false;\r\n      const cellHasHole = cellHasWindow || cellHasDoor;\r\n      return cellHasHole;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n  return false;\r\n};\r\n\r\nconst getOppositeDirection = (direction: MoveDirection): MoveDirection => {\r\n  switch (direction) {\r\n    case \"top\": {\r\n      return \"bottom\";\r\n    }\r\n    case \"bottom\": {\r\n      return \"top\";\r\n    }\r\n    case \"left\": {\r\n      return \"right\";\r\n    }\r\n    case \"right\": {\r\n      return \"left\";\r\n    }\r\n  }\r\n};\r\n","export default \"data:image/png;base64,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RBkBABBlBABAlBEAAFFGAABEGQEAEGUEAECUEQAAUUYAAEQZAQAQZQQAQJQRAABRRgAARBkBABBlBABAlBEAAFFGAABEGQEAEGUEAECUEQAAUUYAAEQZAQAQZQQAQJQRAABRRgAARBkBABBlBABAlBEAAFFGAABEGQEAEGUEAECUEQAAUUYAAEQZAQAQZQQAQJQRAABRRgAARBkBABBlBABAlBEAAFFGAABEGQEAEGUEAECUEQAAUUYAAEQZAQAQZQQAQJQRAABRRgAARBkBABBlBABAlBEAAFFGAABEGQEAEGUEAECUEQAAUUYAAEQZAQAQZQQAQJQRAABRRgAARBkBABBlBABAlBEAAFFGAABEGQEAEGUEAECUEQAAUUYAAEQZAQAQZQQAQJQRAABRRgAARBkBABBlBABAlBEAAFFGAABEGQEAEGUEAECUEQAAUUYAAEQZAQAQZQQAQJQRAABRRgAARBkBABBlBABAlBEAAFFGAABEGQEAEGUEAECUEQAAUUYAAEQZAQAQZQQAQJQRAABRRgAARBkBABBlBABAlBEAAFFGAABEGQEAEGUEAECUEQAAUUYAAEQZAQAQZQQAQJQRAABRRgAARBkBABBlBABAlBEAAFFGAABEGQEAEGUEAECUEQAAUUYAAEQZAQAQZQQAQJQRAABRRgAARBkBABBlBABAlBEAAEXb/gfqHj58J38MQgAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,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AABRRgAARBkBABBlBABAlBEAAFFGAABEGQEAEGUEAECUEQAAUUYAAEQZAQAQZQQAQJQRAABRRgAARBkBABBlBABAlBEAAFFGAABEGQEAEGUEAECUEQAAUUYAAEQZAQAQZQQAQJQRAABRRgAARBkBABBlBABAlBEAAFFGAABEGQEAEGUEAECUEQAAUUYAAEQZAQAQZQQAQJQRAABRRgAARBkBABBlBABAlBEAAFFGAABEGQEAEGUEAECUEQAAUUYAAEQZAQAQZQQAQJQRAABRRgAARBkBABBlBABAlBEAAFFGAABEGQEAEGUEAECUEQAAUUYAAEQZAQAQZQQAQJQRAABRRgAARBkBABBlBABAlBEAAFFGAABEGQEAEGUEAECUEQAAUUYAAEQZAQAQZQQAQJQRAABRRgAARBkBABBlBABAlBEAAFFGAABEGQEAEGUEAECUEQAAUUYAAEQZAQAQZQQAQJQRAABRRgAARBkBABBlBABAlBEAAFFGAABEGQEAEGUEAECUEQAAUUYAAEQZAQAQZQQAQJQRAABRRgAARBkBABBlBABAlBEAAFFGAABEGQEAEGUEAECUEQAAUUYAAEQZAQAQZQQAQJQRAABRRgAARBkBABBlBABAlBEAAFFGAABEGQEAEGUEAECUEQAAUUYAAEQZAQAQZQQAQJQRAABRRgAARBkBABBlBABA0bb/AQYXRF3lFXNFAAAAAElFTkSuQmCC\"","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport styled from \"styled-components\";\r\n\r\nimport {\r\n  State,\r\n  PlayGridMode,\r\n  PlayerListType,\r\n  CellType,\r\n  EnemyListType,\r\n  DeadPlayerListType,\r\n  GameState,\r\n} from \"../../business/types\";\r\nimport { getCards } from \"./getCards\";\r\nimport { getPlayersList } from \"./getPlayersList\";\r\nimport { getEnemyList } from \"./getEnemyList\";\r\nimport { Barrier } from \"./Barrier\";\r\n\r\ntype CellApperance = {\r\n  needHighlightning?: boolean;\r\n  mode: PlayGridMode;\r\n};\r\n\r\ntype UnderlayerType = {\r\n  coordX: string;\r\n  coordY: string;\r\n};\r\n\r\nconst Wrap = styled.div`\r\n  position: relative;\r\n`;\r\n\r\nconst CellItem = styled.div<CellApperance>`\r\n  display: flex;\r\n  position: relative;\r\n  box-sizing: border-box;\r\n\r\n  font-size: 14px;\r\n  text-align: right;\r\n  width: 50px;\r\n  height: 50px;\r\n  color: lightgrey;\r\n\r\n  border: ${(props) => {\r\n    if (props.mode === \"cssStyle\") {\r\n      return \"1px solid lightgray\";\r\n    }\r\n  }};\r\n\r\n  background-color: ${(props) => {\r\n    if (props.needHighlightning) {\r\n      return \"rgb(55 163 0 / 52%);\";\r\n    }\r\n  }};\r\n`;\r\n\r\nconst UnderlayerItem = styled.div<UnderlayerType>`\r\n  position: relative;\r\n  display: flex;\r\n  width: 134px;\r\n  height: 100px;\r\n  background-color: rgb(47 84 96 / 77%);\r\n  left: -30px;\r\n  bottom: 120px;\r\n  flex-direction: row;\r\n  justify-content: center;\r\n  border-radius: 10px;\r\n  box-shadow: 0px 0px 12px 1px rgb(62 76 81 / 98%);\r\n\r\n  left: ${(props) => {\r\n    return `${Number(props.coordX) * 50 - 30}px`;\r\n  }};\r\n\r\n  bottom: ${(props) => {\r\n    return `${Number(props.coordY) * 50 + 70}px`;\r\n  }};\r\n\r\n  & > * {\r\n    position: relative !important;\r\n    margin: 30px 0;\r\n    width: 50px;\r\n    height: 50px;\r\n    z-index: 3;\r\n  }\r\n\r\n  flex-direction: row;\r\n  align-items: center;\r\n  z-index: 6;\r\n`;\r\n\r\ntype PortalType = {\r\n  coordX: string;\r\n  coordY: string;\r\n};\r\n\r\nconst CardsPortal = styled.div<PortalType>`\r\n  position: relative;\r\n  display: flex;\r\n  left: ${(props) => {\r\n    return `${Number(props.coordX) * 50}px`;\r\n  }};\r\n\r\n  bottom: ${(props) => {\r\n    return `${Number(props.coordY) * 50 + 50}px`;\r\n  }};\r\n`;\r\n\r\nconst CardsWrap = styled.div`\r\n  display: flex;\r\n  flex-wrap: nowrap;\r\n  position: absolute;\r\n  z-index: 3;\r\n  font-size: 12px;\r\n  font-weight: bold;\r\n  /*   flex-direction: row-reverse; */\r\n  > * {\r\n    position: relative !important;\r\n    margin: 0 -12px;\r\n\r\n    /*     margin: 0px -41px;\r\n    left: -54px; */\r\n  }\r\n`;\r\n\r\nconst checkNeedSplitCards = (\r\n  playerList: PlayerListType,\r\n  orderIndex: string,\r\n  cell: CellType,\r\n  enemiyList: EnemyListType,\r\n  gameState: GameState\r\n) => {\r\n  const playerItemList = Object.entries(playerList);\r\n\r\n  const playerListOnCell = playerItemList\r\n    .filter((playerItem) => {\r\n      const [, playerCard] = playerItem;\r\n      return playerCard.coord === orderIndex && playerCard.name === \"player\";\r\n    })\r\n    .map((playerItem) => {\r\n      const [, playerCard] = playerItem;\r\n      return playerCard;\r\n    });\r\n\r\n  const hasPlayerOncell = playerListOnCell.length === 1;\r\n\r\n  const hasCardOnCell = cell.cardItem.length === 1;\r\n\r\n  const enemyOnCell = Object.entries(enemiyList).filter(\r\n    ([string, enemyCard]) => enemyCard.coord === orderIndex\r\n  );\r\n  const hasEnemyOnCell = enemyOnCell.length === 1;\r\n  const amountEnemyOnCell = enemyOnCell.length;\r\n\r\n  const phaseInteractWithEnemy = gameState.type.includes(\"interactWithEnemy\");\r\n  const hasTwoEnemy = amountEnemyOnCell === 2;\r\n\r\n  const hasPlayerAndEnemy =\r\n    hasEnemyOnCell && hasPlayerOncell && !phaseInteractWithEnemy;\r\n  const hasEnemyAndCard = hasEnemyOnCell && hasCardOnCell;\r\n\r\n  const hasEnemyAndPlayerAndCard =\r\n    hasEnemyOnCell &&\r\n    hasPlayerOncell &&\r\n    hasCardOnCell &&\r\n    phaseInteractWithEnemy;\r\n\r\n  switch (true) {\r\n    case hasEnemyAndPlayerAndCard: {\r\n      return false;\r\n    }\r\n\r\n    case hasTwoEnemy:\r\n    case hasPlayerAndEnemy:\r\n    case hasEnemyAndCard: {\r\n      return true;\r\n    }\r\n    default: {\r\n      return false;\r\n    }\r\n  }\r\n};\r\n\r\nconst getCardsOnCell = (\r\n  needSplitCards: Boolean,\r\n  cardList: JSX.Element,\r\n  orderIndex: string\r\n) => {\r\n  switch (needSplitCards) {\r\n    case false: {\r\n      return cardList;\r\n    }\r\n    case true: {\r\n      const fieildElem = document.getElementById(\"field\");\r\n      switch (fieildElem) {\r\n        case null: {\r\n          return cardList;\r\n        }\r\n        default: {\r\n          const [hor, vert] = orderIndex.split(\".\");\r\n\r\n          const portal = ReactDOM.createPortal(\r\n            <CardsPortal coordX={hor} coordY={vert}>\r\n              <CardsWrap>{cardList}</CardsWrap>\r\n            </CardsPortal>,\r\n            fieildElem\r\n          );\r\n          return portal;\r\n        }\r\n      }\r\n    }\r\n    default: {\r\n      return null;\r\n    }\r\n  }\r\n};\r\n\r\nexport const getFilledPlayGrid = (state: State) => {\r\n  const {\r\n    gameField,\r\n    playerList,\r\n    activePlayerNumber,\r\n    gameState,\r\n    enemyList,\r\n    deadPlayerList,\r\n    _config,\r\n  } = state;\r\n  const orderGameCells = gameField.order;\r\n\r\n  const isCurrPlayerAlive = playerList[activePlayerNumber] ? true : false;\r\n\r\n  const fullPlayerGrid = orderGameCells.map((orderIndex: string) => {\r\n    const cellValues = gameField.values[orderIndex];\r\n    const [hor, vert] = orderIndex.split(\".\");\r\n\r\n    //TODO: Need to find out is more than one card in the cell!\r\n\r\n    const cardList = (\r\n      <>\r\n        {getPlayersList(orderIndex, playerList, activePlayerNumber, gameState)}\r\n        {getEnemyList(\r\n          orderIndex,\r\n          enemyList,\r\n          deadPlayerList,\r\n          activePlayerNumber\r\n        )}\r\n        {getCards(cellValues, hor, vert)}\r\n      </>\r\n    );\r\n\r\n    const cardListWithoutInventoryCards = (\r\n      <>\r\n        {getPlayersList(orderIndex, playerList, activePlayerNumber, gameState)}\r\n        {getEnemyList(\r\n          orderIndex,\r\n          enemyList,\r\n          deadPlayerList,\r\n          activePlayerNumber\r\n        )}\r\n      </>\r\n    );\r\n\r\n    const inventoryElement = <>{getCards(cellValues, hor, vert)}</>;\r\n\r\n    const needSplitCards = checkNeedSplitCards(\r\n      playerList,\r\n      orderIndex,\r\n      cellValues,\r\n      enemyList,\r\n      gameState\r\n    );\r\n\r\n    const cardsOnCell = getCardsOnCell(needSplitCards, cardList, orderIndex);\r\n\r\n    const availableCells = state.gameState.coordOfAvailableCells;\r\n\r\n    const needHighlightning = availableCells?.includes(orderIndex);\r\n\r\n    switch (isCurrPlayerAlive) {\r\n      case false: {\r\n        return (\r\n          <Wrap key={`${hor}.${vert}`}>\r\n            <CellItem\r\n              needHighlightning={needHighlightning}\r\n              mode={_config.playGridMode}\r\n            >\r\n              {cardsOnCell}\r\n\r\n              {_config.playGridMode === \"cssStyle\" ? `${hor}.${vert}` : null}\r\n            </CellItem>\r\n            {cellValues.name === \"commonCell\" ? (\r\n              <Barrier orderIndex={orderIndex}></Barrier>\r\n            ) : null}\r\n          </Wrap>\r\n        );\r\n      }\r\n      case true: {\r\n        const currPlayerCoord = playerList[activePlayerNumber].coord;\r\n        const [playerX, playerY] = currPlayerCoord.split(\".\");\r\n\r\n        const isPhaseCreateSeparateWindow =\r\n          gameState.type.includes(\"interactWithEnemy\") ||\r\n          gameState.type === \"gameStarted.takeCard\";\r\n\r\n        //For creating portal\r\n        const isNeedCreateSeparateWindow =\r\n          isPhaseCreateSeparateWindow && playerX === hor && playerY === vert;\r\n\r\n        switch (isNeedCreateSeparateWindow) {\r\n          case true: {\r\n            const fieildElem = document.getElementById(\"field\");\r\n\r\n            switch (fieildElem) {\r\n              case null: {\r\n                return null;\r\n              }\r\n\r\n              default: {\r\n                const enemyOnCell = Object.entries(enemyList).filter(\r\n                  ([string, enemyCard]) => enemyCard.coord === orderIndex\r\n                );\r\n                const hasEnemyOnCell = enemyOnCell.length === 1;\r\n\r\n                const playerItemList = Object.entries(playerList);\r\n\r\n                const playerListOnCell = playerItemList\r\n                  .filter((playerItem) => {\r\n                    const [, playerCard] = playerItem;\r\n                    return (\r\n                      playerCard.coord === orderIndex &&\r\n                      playerCard.name === \"player\"\r\n                    );\r\n                  })\r\n                  .map((playerItem) => {\r\n                    const [, playerCard] = playerItem;\r\n                    return playerCard;\r\n                  });\r\n\r\n                const hasPlayerOncell = playerListOnCell.length === 1;\r\n\r\n                const cellValues = gameField.values[orderIndex];\r\n                const hasCardOnCell = cellValues.cardItem.length === 1;\r\n\r\n                const phaseInteractWithEnemy =\r\n                  gameState.type.includes(\"interactWithEnemy\");\r\n\r\n                const hasEnemyAndPlayerAndCard =\r\n                  hasEnemyOnCell &&\r\n                  hasPlayerOncell &&\r\n                  hasCardOnCell &&\r\n                  phaseInteractWithEnemy;\r\n\r\n                switch (hasEnemyAndPlayerAndCard) {\r\n                  case false: {\r\n                    return (\r\n                      <React.Fragment key={`${hor}.${vert}`}>\r\n                        <Wrap key={`${hor}.${vert}`}>\r\n                          <CellItem\r\n                            needHighlightning={needHighlightning}\r\n                            mode={_config.playGridMode}\r\n                          >\r\n                            {_config.playGridMode === \"cssStyle\"\r\n                              ? `${hor}.${vert}`\r\n                              : null}\r\n                          </CellItem>\r\n                          {cellValues.name === \"commonCell\" ? (\r\n                            <Barrier orderIndex={orderIndex}></Barrier>\r\n                          ) : null}\r\n                        </Wrap>\r\n\r\n                        {ReactDOM.createPortal(\r\n                          <>\r\n                            <UnderlayerItem coordX={hor} coordY={vert}>\r\n                              {cardsOnCell}\r\n                            </UnderlayerItem>\r\n                          </>,\r\n                          fieildElem\r\n                        )}\r\n                      </React.Fragment>\r\n                    );\r\n                  }\r\n                  case true: {\r\n                    return (\r\n                      <React.Fragment key={`${hor}.${vert}`}>\r\n                        <Wrap key={`${hor}.${vert}`}>\r\n                          <CellItem\r\n                            needHighlightning={needHighlightning}\r\n                            mode={_config.playGridMode}\r\n                          >\r\n                            {_config.playGridMode === \"cssStyle\"\r\n                              ? `${hor}.${vert}`\r\n                              : null}\r\n                            {inventoryElement}\r\n                          </CellItem>\r\n                          {cellValues.name === \"commonCell\" ? (\r\n                            <Barrier orderIndex={orderIndex}></Barrier>\r\n                          ) : null}\r\n                        </Wrap>\r\n\r\n                        {ReactDOM.createPortal(\r\n                          <>\r\n                            <UnderlayerItem coordX={hor} coordY={vert}>\r\n                              {cardListWithoutInventoryCards}\r\n                            </UnderlayerItem>\r\n                          </>,\r\n                          fieildElem\r\n                        )}\r\n                      </React.Fragment>\r\n                    );\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n\r\n          case false: {\r\n            return (\r\n              <Wrap key={`${hor}.${vert}`}>\r\n                <CellItem\r\n                  needHighlightning={needHighlightning}\r\n                  mode={_config.playGridMode}\r\n                >\r\n                  {cardsOnCell}\r\n\r\n                  {_config.playGridMode === \"cssStyle\"\r\n                    ? `${hor}.${vert}`\r\n                    : null}\r\n                </CellItem>\r\n                {cellValues.name === \"commonCell\" ? (\r\n                  <Barrier orderIndex={orderIndex}></Barrier>\r\n                ) : null}\r\n              </Wrap>\r\n            );\r\n          }\r\n\r\n          default: {\r\n            return null;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  });\r\n\r\n  return fullPlayerGrid;\r\n};\r\n","import { useSelector } from \"react-redux\";\r\nimport styled from \"styled-components\";\r\n\r\nimport { State, PlayGridMode } from \"../../business/types\";\r\nimport { getFilledPlayGrid } from \"./getFilledPlayGrid\";\r\n\r\nimport img from \"./house_2.png\";\r\n\r\ntype GridProps = {\r\n  vert: number;\r\n  mode: PlayGridMode;\r\n};\r\n\r\nconst GridItem = styled.div<GridProps>`\r\n  outline: ${(props) => {\r\n    if (props.mode === \"cssStyle\") {\r\n      return \"2px solid lightgray\";\r\n    }\r\n  }};\r\n\r\n  margin: 0 auto;\r\n  width: 100%;\r\n  transform: rotate(270deg);\r\n  display: grid;\r\n  grid-column-start: -1;\r\n  //–ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∏—Ä—É—é –ø–æ —à–∏—Ä–∏–Ω–µ –ø–æ–ª—è\r\n  grid-template-columns: ${(props) => {\r\n    return `repeat(${props.vert} ,50px)`;\r\n  }};\r\n\r\n  grid-gap: 0px;\r\n  > * {\r\n    transform: rotate(90deg);\r\n  }\r\n\r\n  background-image: ${(props) => {\r\n    if (props.mode === \"image\") {\r\n      return `url(${img})`;\r\n    }\r\n  }};\r\n\r\n  background-color: white;\r\n  background-size: 600px;\r\n  box-shadow: 0 0 10px rgb(0 0 0 / 50%);\r\n`;\r\n\r\nexport const PlayGrid = () => {\r\n  const state = useSelector((state: State) => ({\r\n    ...state,\r\n  }));\r\n  const config = state._config;\r\n  const { vert: maxVert } = config.finishCoord;\r\n  const height = maxVert + 1;\r\n\r\n  return (\r\n    <GridItem key={\"grid\"} vert={height} mode={config.playGridMode}>\r\n      {getFilledPlayGrid(state)}\r\n    </GridItem>\r\n  );\r\n};\r\n","export default \"data:image/png;base64,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\"","import { useSelector } from \"react-redux\";\r\n\r\nimport styled from \"styled-components\";\r\n\r\nimport { State, PlayerListType } from \"../business/types\";\r\n\r\nconst MAX_HEALTH_AMOUNT = 7;\r\n\r\ntype HealthSlotType = {\r\n  isFilled: boolean;\r\n};\r\n\r\nconst HealthSlotList = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\nconst HealthSlot = styled.div<HealthSlotType>`\r\n  width: 5px;\r\n  height: 5px;\r\n  border-radius: 50%;\r\n  border: 1px solid #f09292;\r\n  margin: 1px;\r\n  background-color: ${(props) => {\r\n    if (props.isFilled) {\r\n      return \"#f09292\";\r\n    } else return \"none\";\r\n  }};\r\n`;\r\n\r\nexport const HealthSlots = (props: { index: number }) => {\r\n  const { playerList } = useSelector((state: State) => ({\r\n    ...state,\r\n  }));\r\n\r\n  return (\r\n    <HealthSlotList>\r\n      {getHealthSlot(playerList, props.index).map(\r\n        (healthSlotFilled: boolean, index: number) => {\r\n          return (\r\n            <HealthSlot key={index} isFilled={healthSlotFilled}></HealthSlot>\r\n          );\r\n        }\r\n      )}\r\n    </HealthSlotList>\r\n  );\r\n};\r\n\r\nconst getHealthSlot = (playerList: PlayerListType, index: number) => {\r\n  const playerHealth = getPlayerHealth(playerList, index);\r\n  const maxHealthSlotList = new Array(MAX_HEALTH_AMOUNT).fill(0);\r\n\r\n  const filledHealthSlotList = maxHealthSlotList.reduce(\r\n    (prev, currSlot, index) => {\r\n      if (index < playerHealth) {\r\n        return [...prev, true];\r\n      } else {\r\n        return [...prev, false];\r\n      }\r\n    },\r\n    []\r\n  );\r\n  return filledHealthSlotList;\r\n};\r\n\r\nconst getPlayerHealth = (\r\n  playersList: PlayerListType,\r\n  numberOfPlayer: number\r\n) => {\r\n  return playersList[numberOfPlayer].health;\r\n};\r\n","import { useDispatch, useSelector } from \"react-redux\";\r\n\r\nimport styled from \"styled-components\";\r\n\r\nimport { State, InventoryType, TypeOfCard } from \"../business/types\";\r\n\r\nimport health from \"../components/Health/health.png\";\r\nimport boards from \"../components/Boards/boards.png\";\r\nimport weapon from \"../components/Weapon/weapon.png\";\r\n\r\ntype ImageType = {\r\n  type: TypeOfCard;\r\n  highlighting?: boolean;\r\n};\r\n\r\nconst InventoryWrap = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  flex-wrap: wrap;\r\n  align-content: flex-start;\r\n`;\r\n\r\nconst InwentoryRow = styled.div`\r\n  display: flex;\r\n  width: 100%;\r\n  flex-wrap: nowrap;\r\n  align-items: center;\r\n`;\r\n\r\n//Todo: can replace switch to calculated props?\r\nconst Image = styled.div<ImageType>`\r\n  width: 50px;\r\n  height: 50px;\r\n  background-size: 44px;\r\n  background-repeat: no-repeat;\r\n  background-position: 3px;\r\n  background-image: ${(props) => {\r\n    switch (props.type) {\r\n      case \"health\": {\r\n        return `url(${health})`;\r\n      }\r\n\r\n      case \"boards\": {\r\n        return `url(${boards})`;\r\n      }\r\n\r\n      case \"weapon\": {\r\n        return `url(${weapon})`;\r\n      }\r\n    }\r\n  }};\r\n  outline: ${(props) => {\r\n    if (props.highlighting === true) {\r\n      return \"1px solid red \";\r\n    }\r\n  }};\r\n`;\r\n\r\nconst Counter = styled.div`\r\n  margin-left: 10px;\r\n  font-size: 22px;\r\n`;\r\n\r\nexport const Inventory = (props: { index: number }) => {\r\n  const dispatch = useDispatch();\r\n  const { playerList } = useSelector((state: State) => ({\r\n    ...state,\r\n  }));\r\n\r\n  const inventory: InventoryType = playerList[props.index].inventory;\r\n\r\n  return (\r\n    <InventoryWrap>\r\n      <InwentoryRow>\r\n        <Image\r\n          type=\"health\"\r\n          highlighting={inventory.cardSelected === \"health\"}\r\n          onClick={() => {\r\n            dispatch({\r\n              type: \"cardChoosed\",\r\n              payload: { type: \"health\" },\r\n            });\r\n          }}\r\n        ></Image>\r\n        <Counter> x {inventory[\"health\"] || 0}</Counter>\r\n      </InwentoryRow>\r\n      <InwentoryRow>\r\n        <Image\r\n          type=\"boards\"\r\n          highlighting={inventory.cardSelected === \"boards\"}\r\n          onClick={() => {\r\n            dispatch({\r\n              type: \"cardChoosed\",\r\n              payload: { type: \"boards\" },\r\n            });\r\n          }}\r\n        ></Image>\r\n        <Counter> x {inventory[\"boards\"] || 0}</Counter>\r\n      </InwentoryRow>\r\n      <InwentoryRow>\r\n        <Image\r\n          type=\"weapon\"\r\n          highlighting={inventory.cardSelected === \"weapon\"}\r\n          onClick={() => {\r\n            dispatch({\r\n              type: \"cardChoosed\",\r\n              payload: { type: \"weapon\" },\r\n            });\r\n          }}\r\n        ></Image>\r\n        <Counter> x {inventory[\"weapon\"] || 0}</Counter>\r\n      </InwentoryRow>\r\n\r\n      <InwentoryRow></InwentoryRow>\r\n      <InwentoryRow></InwentoryRow>\r\n    </InventoryWrap>\r\n  );\r\n};\r\n","import { useSelector } from \"react-redux\";\r\n\r\nimport styled from \"styled-components\";\r\n\r\nimport { State } from \"../business/types\";\r\n\r\nimport { HealthSlots } from \"../components/HealthSlots\";\r\nimport { Inventory } from \"../components/Inventory\";\r\n\r\nimport player from \"../components/Player/player.png\";\r\nimport player2 from \"../components/Player/player2.png\";\r\nimport player3 from \"../components/Player/player3.png\";\r\nimport player4 from \"../components/Player/player4.png\";\r\n\r\ntype AvatarType = { image: string };\r\n\r\nconst PlayerStatusCard = styled.div`\r\n  width: 250px;\r\n  height: 240px;\r\n  border: 1px solid lightgray;\r\n  padding: 10px;\r\n  box-sizing: border-box;\r\n  display: flex;\r\n  /*  justify-content: center; */\r\n  background-color: white;\r\n  flex-wrap: wrap;\r\n`;\r\n\r\n//eslint-disable-next-line\r\nconst CharacterAvatar = styled.div<AvatarType>`\r\n  width: 50px;\r\n  height: 50px;\r\n  border: 1px solid lightgray;\r\n  font-size: 14px;\r\n  text-align: center;\r\n  background-repeat: no-repeat;\r\n  background-position: 0px;\r\n  background-size: 44px;\r\n  background-position: 3px;\r\n  background-image: ${(props) => {\r\n    return `url(${props.image})`;\r\n  }};\r\n`;\r\n\r\nconst Status = styled.div`\r\n  display: flex;\r\n  border: 1px solid lightgray;\r\n\r\n  padding: 3px;\r\n  margin-bottom: 15px;\r\n  font-size: 14px;\r\n  width: 150px;\r\n`;\r\n\r\nconst HealthStatus = styled(Status)`\r\n  height: 20px;\r\n  margin: 15px 5px;\r\n`;\r\n\r\nconst InventoryStatus = styled(Status)`\r\n  /*   height: 100px; */\r\n`;\r\n\r\nconst Row = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n`;\r\n\r\nexport const PlayerStatus = () => {\r\n  const { activePlayerNumber, playerList } = useSelector((state: State) => ({\r\n    ...state,\r\n  }));\r\n  const playerImageList = [player, player2, player3, player4];\r\n\r\n  // TODO: why pass the index?\r\n\r\n  const avatar = (\r\n    <CharacterAvatar image={playerImageList[activePlayerNumber]}>\r\n      {`${activePlayerNumber + 1}`}\r\n    </CharacterAvatar>\r\n  );\r\n  const health = (\r\n    <HealthStatus>\r\n      {`–∑–¥–æ—Ä–æ–≤—å–µ:  `}\r\n      <HealthSlots index={activePlayerNumber}></HealthSlots>\r\n    </HealthStatus>\r\n  );\r\n  const inventory = (\r\n    <InventoryStatus>\r\n      <Inventory index={activePlayerNumber} />\r\n    </InventoryStatus>\r\n  );\r\n\r\n  const isAlivePlayer = playerList[activePlayerNumber] ? true : false;\r\n\r\n  switch (isAlivePlayer) {\r\n    case true: {\r\n      return (\r\n        <PlayerStatusCard>\r\n          <Row>\r\n            {avatar}\r\n            {health}\r\n          </Row>\r\n          <Row>{inventory}</Row>\r\n        </PlayerStatusCard>\r\n      );\r\n    }\r\n    case false: {\r\n      return (\r\n        <PlayerStatusCard>\r\n          <Row>\r\n            {avatar}\r\n            <HealthStatus>{<div>Dead</div>}</HealthStatus>\r\n          </Row>\r\n        </PlayerStatusCard>\r\n      );\r\n    }\r\n  }\r\n};\r\n","import { useSelector } from \"react-redux\";\r\nimport { useState, useEffect } from \"react\";\r\n\r\nimport styled from \"styled-components\";\r\n\r\nimport { State, GameState, TypeEffect } from \"../business/types\";\r\n\r\nimport { PlayerStatus } from \"./PlayerStatus\";\r\n\r\nconst Status = styled.div`\r\n  width: 200px;\r\n  min-height: 18px;\r\n  width: 250px;\r\n  height: 100px;\r\n  border: 1px solid lightgray;\r\n  background-color: #fff2d9;\r\n  text-align: center;\r\n  font-size: 20px;\r\n  color: #5f5757;\r\n  padding-top: 15px;\r\n  box-sizing: border-box;\r\n`;\r\n\r\nexport const StatusList = () => {\r\n  type statusType = string;\r\n  const initialStatus: statusType = \"\";\r\n  const [status, updateStatus] = useState(initialStatus);\r\n\r\n  const { dice, gameState, doEffect, gameResult } = useSelector(\r\n    (state: State) => ({\r\n      ...state,\r\n    })\r\n  );\r\n\r\n  const newStatus = getTextStatus(gameState, doEffect, dice, gameResult);\r\n  const batlePhrase = \"p–µ–∂–∏–º –±–æ—è\";\r\n  useEffect(() => {\r\n    updateStatus(() => {\r\n      if (gameState.type.includes(\"interactWithEnemy\")) {\r\n        if (gameState.type === \"interactWithEnemy\") {\r\n          return newStatus;\r\n        } else {\r\n          return `${batlePhrase}: ${newStatus}`;\r\n        }\r\n      } else {\r\n        return newStatus;\r\n      }\r\n    });\r\n  }, [gameState.type, doEffect?.type, newStatus]);\r\n  return (\r\n    <>\r\n      <Status>{status}</Status>\r\n      <PlayerStatus />\r\n    </>\r\n  );\r\n};\r\n\r\nconst getTextStatus = (\r\n  gameState: GameState,\r\n  doEffect: TypeEffect,\r\n  dice: number,\r\n  gameResult: string\r\n) => {\r\n  switch (gameState.type) {\r\n    case \"gameStarted.rollDice\":\r\n      return \"–±—Ä–æ—Å–∏—Ç—å –∫—É–±–∏–∫\";\r\n    case \"gameStarted.playerMove\":\r\n      return \"—Å–¥–µ–ª–∞—Ç—å —Ö–æ–¥\";\r\n    case \"gameStarted.takeCard\":\r\n      return \"–æ—Ç–∫—Ä—ã–≤–∞–µ–º –∫–∞—Ä—Ç–æ—á–∫—É\";\r\n    case \"gameStarted.applyCard\":\r\n      return \"–ø—Ä–∏–º–µ–Ω–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É\";\r\n\r\n    /*   case \"interactWithEnemy.applyCard\":\r\n      return \"–ø—Ä–∏–º–µ–Ω–∏—Ç—å –æ—Ä—É–∂–∏–µ\"; */\r\n    case \"interactWithEnemy.throwBattleDice\": {\r\n      return \"–±—Ä–æ—Å–∏—Ç—å –∫—É–±–∏–∫\";\r\n    }\r\n    case \"interactWithEnemy.applyCard\": {\r\n      return \"–ø—Ä–∏–º–µ–Ω–∏—Ç—å –æ—Ä—É–∂–∏–µ\";\r\n    }\r\n\r\n    case \"interactWithEnemy.makeBattleAction\":\r\n    case \"interactWithEnemy\":\r\n      switch (doEffect?.type) {\r\n        case \"!openEnemyCard\": {\r\n          return \"–æ—Ç–∫—Ä—ã–≤–∞–µ–º –∫–∞—Ä—Ç–æ—á–∫—É\";\r\n        }\r\n\r\n        case \"!getBattleResult\": {\r\n          switch (dice) {\r\n            case 1:\r\n            case 2: {\r\n              return `–≤—ã–ø–∞–ª–æ ${dice}: –∏–≥—Ä–æ–∫ –ø—Ä–∏–º–µ–Ω—è–µ—Ç –æ—Ä—É–∂–∏–µ –∏–ª–∏ –±—Ä–æ—Å–∞–µ—Ç –∫—É–±–∏–∫ `;\r\n            }\r\n            case 3: {\r\n              return `–≤—ã–ø–∞–ª–æ ${dice}: –∏–≥—Ä–æ–∫ —Ç–µ—Ä—è–µ—Ç 1 –∑–¥–æ—Ä–æ–≤—å–µ`;\r\n            }\r\n            case 4: {\r\n              return `–≤—ã–ø–∞–ª–æ ${dice}: –∏–≥—Ä–æ–∫ —Å–ø–∞—Å–∞–µ—Ç—Å—è –±–µ–≥—Å—Ç–≤–æ–º `;\r\n            }\r\n            default:\r\n              return \"–±—Ä–æ—Å–∏—Ç—å –∫—É–±–∏–∫ –∏–ª–∏ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –æ—Ä—É–∂–∏–µ\";\r\n          }\r\n        }\r\n        default:\r\n          return \"—Å–¥–µ–ª–∞—Ç—å —Ö–æ–¥\";\r\n      }\r\n\r\n    /*   case \"gameStarted.interactWithEnemy.fightOrKeepBattle\":\r\n      return \"–ø—Ä–∏–º–µ–Ω–∏—Ç—å  –æ—Ä—É–∂–∏–µ –∏–ª–∏ –±—Ä–æ—Å–∏—Ç—å –∫—É–±–∏–∫\"; */\r\n    case \"enemyMove.chooseEnemy\": {\r\n      return \"–≤—ã–±—Ä–∞—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É –≤—Ä–∞–≥–∞\";\r\n    }\r\n    case \"enemyMove\": {\r\n      return \"–ø–µ—Ä–µ–¥–≤–∏–Ω—É—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É –≤—Ä–∞–≥–∞\";\r\n    }\r\n    case \"endGame\":\r\n      return gameResult;\r\n    default:\r\n      return \"\";\r\n  }\r\n};\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nimport styled from \"styled-components\";\r\n\r\nimport { State } from \"../business/types\";\r\n\r\nconst GameScore = styled.div`\r\n  margin: 100px;\r\n`;\r\n\r\nexport const EndScreen = () => {\r\n  const gameResult = useSelector((state: State) => state.gameResult);\r\n  return (\r\n    <>\r\n      <GameScore>–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞. {gameResult}</GameScore>\r\n    </>\r\n  );\r\n};\r\n","import React from \"react\";\r\n\r\nimport styled from \"styled-components\";\r\n\r\n/* import {amountPlayers } from \"../shared/config/devConfig\"; */\r\nimport { HealthSlots } from \"../components/HealthSlots\";\r\nimport { Inventory } from \"../components/Inventory\";\r\nimport { ConfigType } from \"../business/types\";\r\n\r\ntype AmountOfPlayers = {\r\n  amount: number;\r\n};\r\n\r\nconst PlayersListWrap = styled.div<AmountOfPlayers>`\r\n  /*  width: 130px; */\r\n  width: 100%;\r\n  height: 100px;\r\n  /*   border: 1px solid lightgray; */\r\n  display: grid;\r\n\r\n  grid-template-rows: 20% auto auto;\r\n  grid-template-columns: ${(props) => {\r\n    return `repeat(${props.amount} ,25px)`;\r\n  }};\r\n  pointer-events: none;\r\n`;\r\n\r\nconst CharacterAvatar = styled.div`\r\n  font-size: 12px;\r\n  text-align: center;\r\n  grid-row-start: 1;\r\n  grid-row-end: 2;\r\n`;\r\n\r\nconst HealthSlotsWrap = styled.div`\r\n  grid-row-start: 2;\r\n  grid-row-end: 3;\r\n  & > * {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    flex-direction: column;\r\n    width: 100%;\r\n  }\r\n`;\r\n\r\nconst InventorysWrap = styled.div`\r\n  grid-row-start: 3;\r\n  grid-row-end: 4;\r\n  & * {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    flex-direction: column;\r\n    box-sizing: border-box;\r\n    outline: none;\r\n    /*  & > * {\r\n      box-sizing: border-box;\r\n    } */\r\n  }\r\n`;\r\n\r\nexport const PlayersStatusList = (config: ConfigType) => {\r\n  return (\r\n    <PlayersListWrap amount={config.amountPlayers}>\r\n      {new Array(config.amountPlayers).fill(0).map((player, index) => {\r\n        return (\r\n          <React.Fragment key={index}>\r\n            <CharacterAvatar>{`${index + 1}`}</CharacterAvatar>\r\n            <HealthSlotsWrap>\r\n              <HealthSlots index={index}></HealthSlots>\r\n            </HealthSlotsWrap>\r\n            <InventorysWrap>\r\n              <Inventory index={index} />\r\n            </InventorysWrap>\r\n          </React.Fragment>\r\n        );\r\n      })}\r\n    </PlayersListWrap>\r\n  );\r\n};\r\n","import { useDispatch } from \"react-redux\";\r\n\r\nimport styled from \"styled-components\";\r\n\r\nconst StartButton = styled.button`\r\n  height: 22px;\r\n  margin: 140px;\r\n`;\r\n\r\nexport const StartScreen = () => {\r\n  const dispatch = useDispatch();\r\n  return (\r\n    <>\r\n      <StartButton\r\n        onClick={() => {\r\n          dispatch({ type: \"clickedStartButton\" });\r\n        }}\r\n      >\r\n        {\" \"}\r\n        –Ω–∞—á–∞—Ç—å –∏–≥—Ä—É\r\n      </StartButton>\r\n    </>\r\n  );\r\n};\r\n","import {\r\n  StartCell,\r\n  CommonCell,\r\n  FinishCell,\r\n  GameFieldCells,\r\n  CellType,\r\n  ConfigType,\r\n} from \"../../types\";\r\n\r\n/**\r\n *  Returns an object with start and finish  in structure of GameValues.\r\n */\r\nexport const getFieldCells = (\r\n  cellList: string[],\r\n  config: ConfigType\r\n): GameFieldCells => {\r\n  const emptyFieldCells = createEmptyFieldCells(cellList);\r\n  const fieldCellsWithWalls = getCellsWalls(emptyFieldCells, config);\r\n  const organizedFieldCells = getOrganizedFieldCells(\r\n    fieldCellsWithWalls,\r\n    config\r\n  );\r\n  return organizedFieldCells;\r\n};\r\n\r\n/**\r\n * Creates an object with keys and empty cells in structure of GameValues.\r\n */\r\nconst createEmptyFieldCells = (cellList: Array<string>): GameFieldCells => {\r\n  const emptyFieldItem: CommonCell = {\r\n    name: \"commonCell\",\r\n    cardItem: [],\r\n  };\r\n\r\n  let newEmptyGameField: GameFieldCells = {};\r\n\r\n  cellList.forEach((cell: string) => {\r\n    newEmptyGameField[cell] = emptyFieldItem;\r\n  });\r\n\r\n  return newEmptyGameField;\r\n};\r\n\r\n/**\r\n *  Creates an object with start, finish and walls in structure of GameValues.\r\n */\r\nconst getOrganizedFieldCells = (\r\n  emptyField: GameFieldCells,\r\n  config: ConfigType\r\n): GameFieldCells => {\r\n  const startIndex = `${config.startCoord.hor}.${config.startCoord.vert}`;\r\n  const finishIndex = `${config.finishCoord.hor}.${config.finishCoord.vert}`;\r\n\r\n  const startCell: StartCell = {\r\n    name: \"start\",\r\n    cardItem: [],\r\n  };\r\n\r\n  const finishCell: FinishCell = {\r\n    name: \"finish\",\r\n    cardItem: [],\r\n  };\r\n\r\n  const organizedGameFieldCells = {\r\n    ...emptyField,\r\n    [startIndex]: startCell,\r\n    [finishIndex]: finishCell,\r\n  };\r\n\r\n  return organizedGameFieldCells;\r\n};\r\n\r\n/**\r\n * @returns The object in structure GameFieldCells. With walls(barriers) in cells.\r\n */\r\nconst getCellsWalls = (\r\n  emptyField: GameFieldCells,\r\n  config: ConfigType\r\n): GameFieldCells => {\r\n  // TODO: Need add checking for CommonCell?\r\n\r\n  /**\r\n   * Returns list of Cells with walls(barriers)\r\n   */\r\n  const cellsWithBarrierList = config.cellsBarrierList.map(\r\n    (cellBarrier): [string, CellType] => {\r\n      const { coord, barrierList } = cellBarrier;\r\n      const cellIndex = `${coord.hor}.${coord.vert}`;\r\n\r\n      const cellWithoutBarrier = emptyField[cellIndex];\r\n\r\n      if (cellWithoutBarrier.name === \"commonCell\") {\r\n        const cellWithBarrier = {\r\n          ...cellWithoutBarrier,\r\n          barrierList: barrierList,\r\n        };\r\n\r\n        return [cellIndex, cellWithBarrier];\r\n      } else {\r\n        return [cellIndex, cellWithoutBarrier];\r\n      }\r\n    }\r\n  );\r\n\r\n  const cellsWithBarriers: GameFieldCells =\r\n    Object.fromEntries(cellsWithBarrierList);\r\n\r\n  const fieldCellsWithWalls = { ...emptyField, ...cellsWithBarriers };\r\n  return fieldCellsWithWalls;\r\n};\r\n","import { CommonCell, GameFieldCells, CardItem, ConfigType } from \"../../types\";\r\n/* \r\nimport {\r\n amountHealthItems,\r\n  amountBoardsItems,\r\n  cardApperance,\r\n  amountWeaponsItems,\r\n} from \"../../../shared/config/devConfig\";\r\n */\r\ntype CardSet = {\r\n  card: CardItem;\r\n  amount: number;\r\n};\r\n\r\nconst getCardList = (config: ConfigType): CardSet[] => {\r\n  return [\r\n    {\r\n      card: {\r\n        name: \"health\",\r\n        apperance: config.cardApperance,\r\n      },\r\n      amount: config.amountHealthItems,\r\n    },\r\n    {\r\n      card: {\r\n        name: \"boards\",\r\n        apperance: config.cardApperance,\r\n      },\r\n      amount: config.amountBoardsItems,\r\n    },\r\n    {\r\n      card: {\r\n        name: \"weapon\",\r\n        apperance: config.cardApperance,\r\n      },\r\n      amount: config.amountWeaponsItems,\r\n    },\r\n  ];\r\n};\r\n/**\r\n * Returns an object in structure of FieldCells with spreaded cards in random picked cells.\r\n */\r\nexport const spreadCards = (\r\n  gameFieldCells: GameFieldCells,\r\n  config: ConfigType\r\n): GameFieldCells => {\r\n  /**\r\n   * filled–°ells - its object with filling cells\r\n   * currCardSet -curr set of cards\r\n   * from cardset making object with cards\r\n   */\r\n\r\n  const cardsList = getCardList(config);\r\n  const cellsWithAllCards = cardsList.reduce((filled–°ells, currCardSet) => {\r\n    const gameFieldCellsWithPrevios = { ...gameFieldCells, ...filled–°ells };\r\n\r\n    const cellsForCards = getListForCards(\r\n      gameFieldCellsWithPrevios,\r\n      currCardSet\r\n    );\r\n\r\n    /**\r\n     * Adding filled with previos cardSet cells\r\n     */\r\n    const filledWithCardsFieldCells = setCards(cellsForCards, currCardSet);\r\n    const filledWithAllCardsCells = {\r\n      ...filled–°ells,\r\n      ...filledWithCardsFieldCells,\r\n    };\r\n    return filledWithAllCardsCells;\r\n  }, {});\r\n\r\n  const gameFieldFull = { ...gameFieldCells, ...cellsWithAllCards };\r\n  return gameFieldFull;\r\n};\r\n\r\n/**\r\n *  Creates an object with spreaded cards into cells from cellsForCards.\r\n */\r\nconst setCards = (\r\n  cellList: [string, CommonCell][],\r\n  currCardSet: CardSet\r\n): GameFieldCells => {\r\n  const cellListWithCards = cellList.map(\r\n    (cellWithCards: [string, CommonCell]) => {\r\n      const [index, cell] = cellWithCards;\r\n\r\n      const cellWithCard: CommonCell = {\r\n        ...cell,\r\n        cardItem: [currCardSet.card],\r\n      };\r\n      return [index, cellWithCard];\r\n    }\r\n  );\r\n\r\n  const fieldCellsWithCards = Object.fromEntries(cellListWithCards);\r\n\r\n  return fieldCellsWithCards;\r\n};\r\n\r\n/**\r\n * Returns an array with random empty cell witch suitable for card.\r\n * Array lenght is equal AMOUNT_..._ITEMS.\r\n */\r\nconst getListForCards = (\r\n  gameField: GameFieldCells,\r\n  currCardSet: CardSet\r\n): [string, CommonCell][] => {\r\n  const listGameField = Object.entries(gameField);\r\n\r\n  /**\r\n   * This array contains only empty cells\r\n   */\r\n\r\n  const emptyCellsList = listGameField.filter(\r\n    (cellItem): cellItem is [string, CommonCell] => {\r\n      const [, item] = cellItem;\r\n\r\n      return item.name === \"commonCell\" && item.cardItem.length === 0;\r\n    }\r\n  );\r\n\r\n  const AMOUNT_EMPTY_CELLS = emptyCellsList.length;\r\n  const amoutCurrentCards = currCardSet.amount;\r\n\r\n  const canSetAllCards = amoutCurrentCards < AMOUNT_EMPTY_CELLS;\r\n  const remainingAmountCards = AMOUNT_EMPTY_CELLS;\r\n\r\n  const afforableAmountCards = canSetAllCards\r\n    ? amoutCurrentCards\r\n    : remainingAmountCards;\r\n\r\n  if (!canSetAllCards) {\r\n    const cardName = currCardSet.card?.name;\r\n    console.error(`Cards \"${cardName}\" more than empty cell.`);\r\n  }\r\n\r\n  /**\r\n   * Is a list with number of indexes of empty cells.\r\n   */\r\n  const keyList: Array<number> = new Array(afforableAmountCards)\r\n    .fill(0)\r\n    .reduce((prevkeyList) => {\r\n      const randomNumber = getRandomNumber(prevkeyList, AMOUNT_EMPTY_CELLS);\r\n\r\n      if (prevkeyList) {\r\n        return [...prevkeyList, randomNumber];\r\n      } else {\r\n        return [randomNumber];\r\n      }\r\n    }, []);\r\n\r\n  const listForCards = keyList.map((keyItem: number): [string, CommonCell] => {\r\n    return emptyCellsList[keyItem];\r\n  });\r\n\r\n  return listForCards;\r\n};\r\n\r\n/**\r\n * Gets an array with the previously selected random numbers and the maximum number to select.\r\n * Returns a random number satisfying the conditions.\r\n */\r\nconst getRandomNumber = (\r\n  arrNumber: Array<number>,\r\n  maxNumber: number\r\n): number => {\r\n  const number = Math.floor(Math.random() * maxNumber);\r\n\r\n  if (arrNumber) {\r\n    return arrNumber.includes(number)\r\n      ? getRandomNumber(arrNumber, maxNumber)\r\n      : number;\r\n  } else {\r\n    return number;\r\n  }\r\n};\r\n","import { ConfigType } from \"../../types\";\r\nimport { getFieldCells } from \"./getFieldCells\";\r\nimport { spreadCards } from \"./spreadCards\";\r\n\r\n//TODO: Need add some config object for all cards and spreading them simultaneously.\r\nexport const getGameField = (config: ConfigType) => {\r\n  const order = getCellOrder(config);\r\n  const gameFieldCells = getFieldCells(order, config);\r\n  const filledWithCardsCells = spreadCards(gameFieldCells, config);\r\n  const gameField = { order, values: filledWithCardsCells };\r\n  return gameField;\r\n};\r\n\r\n/**\r\n * Creates an array with cell index order.\r\n */\r\nconst getCellOrder = (config: any): Array<string> => {\r\n  const width = config.finishCoord.hor;\r\n  const height = config.finishCoord.vert;\r\n\r\n  let orderList: Array<string> = [];\r\n\r\n  for (let hor = 0; hor <= width; hor++) {\r\n    for (let vert = 0; vert <= height; vert++) {\r\n      const index: string = `${hor}.${vert}`;\r\n      orderList.push(index);\r\n    }\r\n  }\r\n\r\n  return orderList;\r\n};\r\n","import { ConfigType, PlayerListType } from \"../types\";\r\n\r\nexport const getPlayers = (config: ConfigType): PlayerListType => {\r\n  const startCoord = `${config.startCoord.hor}.${config.startCoord.vert}`;\r\n  const playersList = new Array(config.amountPlayers)\r\n    .fill(0)\r\n    .map((player, index) => {\r\n      const playerCard = {\r\n        name: \"player\",\r\n        health: config.initialPlayerHealth,\r\n        orderNumber: index,\r\n        coord: startCoord,\r\n        //TODO: Added const emptyInventory\r\n        inventory: { boards: 0, weapon: 0, health: 0, cardSelected: null },\r\n      };\r\n      return [index, playerCard];\r\n    });\r\n\r\n  const playersObj: PlayerListType = Object.fromEntries(playersList);\r\n  return playersObj;\r\n};\r\n","import {\r\n  EnemyListType,\r\n  GameField,\r\n  CommonCell,\r\n  ConfigType,\r\n  EnemyCardType,\r\n} from \"../types\";\r\n\r\nexport const getEnemies = (\r\n  gameField: GameField,\r\n  config: ConfigType\r\n): EnemyListType => {\r\n  const emptyCellsList = getEmptyList(gameField);\r\n  const enemiesCoords = getListOfIndexes(emptyCellsList, config);\r\n  const enemiesObj = getListOfEnemy(enemiesCoords, config);\r\n  return enemiesObj;\r\n};\r\n\r\n/**\r\n * For every element checks that cell has no cards on it.\r\n * Returns the list of cells without any cards.\r\n */\r\nconst getEmptyList = (gameField: GameField): [string, CommonCell][] => {\r\n  const listCells = Object.entries(gameField.values);\r\n  const emptyCellsList = listCells.filter(\r\n    (cellItem): cellItem is [string, CommonCell] => {\r\n      const [, item] = cellItem;\r\n      return item.name === \"commonCell\" && item.cardItem.length === 0;\r\n    }\r\n  );\r\n  return emptyCellsList;\r\n};\r\n\r\n/**\r\n * Returns the list of random picked indexes of emptyCellsList\r\n */\r\nconst getListOfIndexes = (\r\n  emptyCellsList: [string, CommonCell][],\r\n  config: ConfigType\r\n) => {\r\n  const AMOUNT_EMPTY_CELLS = emptyCellsList.length;\r\n  const amountEnemies = config.amountEnemies;\r\n\r\n  const canSetAllCards = amountEnemies < AMOUNT_EMPTY_CELLS;\r\n  const remainingAmountCards = AMOUNT_EMPTY_CELLS;\r\n\r\n  const afforableAmountCards = canSetAllCards\r\n    ? amountEnemies\r\n    : remainingAmountCards;\r\n\r\n  if (!canSetAllCards) {\r\n    console.error(`Cards \"enemy\" more than empty cell.`);\r\n  }\r\n\r\n  // TODO: it may be taking out as separate module with getRandomNumber?\r\n  const keyList: Array<number> = new Array(afforableAmountCards)\r\n    .fill(0)\r\n    .reduce((prevkeyList) => {\r\n      const randomNumber = getRandomNumber(prevkeyList, AMOUNT_EMPTY_CELLS);\r\n\r\n      if (prevkeyList) {\r\n        return [...prevkeyList, randomNumber];\r\n      } else {\r\n        return [randomNumber];\r\n      }\r\n    }, []);\r\n\r\n  const idexesListForCards = keyList.map((keyItem: number): string => {\r\n    const [index] = emptyCellsList[keyItem];\r\n    return index;\r\n  });\r\n\r\n  return idexesListForCards;\r\n};\r\n\r\n/**\r\n * Returns the object of all enemies\r\n */\r\nconst getListOfEnemy = (enemiesCoords: string[], config: ConfigType) => {\r\n  const enemyList = enemiesCoords.map((coord, index) => {\r\n    const enemyCard: EnemyCardType = {\r\n      name: \"enemy\",\r\n      power: 1,\r\n      coord,\r\n      apperance: config.cardApperance,\r\n    };\r\n    return [index, enemyCard];\r\n  });\r\n\r\n  const enemiesObj: EnemyListType = Object.fromEntries(enemyList);\r\n  return enemiesObj;\r\n};\r\n\r\n/**\r\n * Gets an array with the previously selected random numbers and the maximum number to select.\r\n * Returns a random number satisfying the conditions.\r\n */\r\nconst getRandomNumber = (\r\n  arrNumber: Array<number>,\r\n  maxNumber: number\r\n): number => {\r\n  const number = Math.floor(Math.random() * maxNumber);\r\n\r\n  if (arrNumber) {\r\n    return arrNumber.includes(number)\r\n      ? getRandomNumber(arrNumber, maxNumber)\r\n      : number;\r\n  } else {\r\n    return number;\r\n  }\r\n};\r\n","import { ConfigType, State } from \"../types\";\r\n\r\nimport { getGameField } from \"./getGameField\";\r\nimport { getPlayers } from \"./getPlayers\";\r\nimport { getEnemies } from \"./getEnemies\";\r\n\r\nimport { PROD_CONFIG, DEV_CONFIG } from \"../../shared/config\";\r\n\r\nexport const getInitialState = (config: ConfigType): State => {\r\n  //–æ—Ç–¥–∞–µ–º gameFieldWithoutEnemy –¥–ª—è —Ä–∞–Ω–¥–æ–º–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –≤—Ä–∞–≥–æ–≤ –∏–∑ –ø—É—Å—Ç—ã—Ö —è—á–µ–µ–∫\r\n  const gameFieldWithoutEnemy = getGameField(config);\r\n  return {\r\n    gameState: {\r\n      type: \"waitingStart\",\r\n      coordOfAvailableCells: null,\r\n      coordOfAvailableCards: null,\r\n    },\r\n    dice: 0,\r\n    gameResult: \"\",\r\n    playerList: getPlayers(config),\r\n    enemyList: getEnemies(gameFieldWithoutEnemy, config),\r\n    gameField: gameFieldWithoutEnemy,\r\n    doEffect: null,\r\n    activePlayerNumber: 0,\r\n    deadPlayerList: null,\r\n    _config: config,\r\n  };\r\n};\r\n\r\nconst getConfig = (\r\n  PROD_CONFIG: ConfigType,\r\n  DEV_CONFIG: ConfigType\r\n): ConfigType => {\r\n  if (process.env.NODE_ENV === \"production\") {\r\n    return PROD_CONFIG;\r\n  } else if (process.env.NODE_ENV === \"development\") {\r\n    return DEV_CONFIG;\r\n  } else {\r\n    return PROD_CONFIG;\r\n  }\r\n};\r\n\r\nexport const config = getConfig(PROD_CONFIG, DEV_CONFIG);\r\n\r\nexport const initialState = getInitialState(config);\r\n","import { ConfigType } from \"../../business/types\";\r\n\r\nimport { CELLS_BARRIERS_LIST } from \"./walls\";\r\n\r\nexport const PROD_CONFIG: ConfigType = {\r\n  cellsBarrierList: CELLS_BARRIERS_LIST,\r\n  startCoord: { hor: 0, vert: 0 },\r\n  finishCoord: { hor: 11, vert: 11 },\r\n  amountPlayers: 2,\r\n  initialPlayerHealth: 3,\r\n  amountHealthItems: 30,\r\n  amountBoardsItems: 30,\r\n  amountWeaponsItems: 30,\r\n  amountEnemies: 30,\r\n  cardApperance: \"closed\",\r\n  playGridMode: \"image\",\r\n};\r\n","import { CellsBarrierListType } from \"../../business/types\";\r\n\r\n// The array is convenient for iterating\r\nexport const CELLS_BARRIERS_LIST: CellsBarrierListType = [\r\n  {\r\n    coord: { hor: 2, vert: 2 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n      },\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 2, vert: 3 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 2, vert: 4 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 2, vert: 5 },\r\n    barrierList: [\r\n      {\r\n        name: \"window\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 2, vert: 6 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 2, vert: 7 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n      },\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 2, vert: 8 },\r\n    barrierList: [\r\n      {\r\n        name: \"window\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 2, vert: 9 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 2, vert: 10 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 3, vert: 10 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 4, vert: 10 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 5, vert: 10 },\r\n    barrierList: [\r\n      {\r\n        name: \"door\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 6, vert: 10 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 7, vert: 10 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 8, vert: 10 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 9, vert: 10 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 10, vert: 10 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 7, vert: 9 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 3, vert: 2 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 4, vert: 2 },\r\n    barrierList: [\r\n      {\r\n        name: \"door\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 5, vert: 2 },\r\n    barrierList: [\r\n      {\r\n        name: \"window\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 6, vert: 2 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 7, vert: 2 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n      },\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 8, vert: 2 },\r\n    barrierList: [\r\n      {\r\n        name: \"window\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 9, vert: 2 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 10, vert: 2 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 10, vert: 7 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 3, vert: 7 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 4, vert: 9 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 4, vert: 8 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 4, vert: 7 },\r\n    barrierList: [\r\n      {\r\n        name: \"door\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n      {\r\n        name: \"door\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 5, vert: 7 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 6, vert: 7 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 7, vert: 7 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n      },\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 7, vert: 8 },\r\n    barrierList: [\r\n      {\r\n        name: \"door\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 8, vert: 7 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 9, vert: 7 },\r\n    barrierList: [\r\n      {\r\n        name: \"door\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 7, vert: 6 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 7, vert: 5 },\r\n    barrierList: [\r\n      {\r\n        name: \"door\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 7, vert: 4 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 7, vert: 3 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 11, vert: 9 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 11, vert: 8 },\r\n    barrierList: [\r\n      {\r\n        name: \"window\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 11, vert: 7 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 11, vert: 6 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 11, vert: 5 },\r\n    barrierList: [\r\n      {\r\n        name: \"window\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 11, vert: 4 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 11, vert: 3 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 11, vert: 2 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n      },\r\n    ],\r\n  },\r\n\r\n  //it is needed for now for pretty  wall painting\r\n  /*   {\r\n    coord: { hor: 11, vert: 10 },\r\n    barrierList: [\r\n      {\r\n        name: null,\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  }, */\r\n];\r\n","import { State } from \"../../types\";\r\nimport { ActionType } from \"../../reducer\";\r\n\r\nexport const waitingStart = (state: State, action: ActionType): State => {\r\n  switch (action.type) {\r\n    case \"clickedStartButton\": {\r\n      return {\r\n        ...state,\r\n        gameState: { ...state.gameState, type: \"gameStarted.rollDice\" },\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { State } from \"../../types\";\r\n\r\nexport const getNextPlayerNumber = (state: State): number => {\r\n  const { playerList, deadPlayerList, activePlayerNumber, gameState } = state;\r\n  const { attackInitiator } = gameState;\r\n  const commonPlayerList = { ...playerList, ...deadPlayerList };\r\n  const playerListObj = Object.entries(commonPlayerList);\r\n\r\n  const maxPlayerNumber = playerListObj.length - 1;\r\n\r\n  const minPlayerNumber = 0;\r\n\r\n  if (attackInitiator || attackInitiator === 0) {\r\n    const nextPlayerNumber =\r\n      attackInitiator + 1 > maxPlayerNumber\r\n        ? minPlayerNumber\r\n        : attackInitiator + 1;\r\n\r\n    console.log(nextPlayerNumber);\r\n    return nextPlayerNumber;\r\n  } else {\r\n    const nextPlayerNumber =\r\n      activePlayerNumber + 1 > maxPlayerNumber\r\n        ? minPlayerNumber\r\n        : activePlayerNumber + 1;\r\n    return nextPlayerNumber;\r\n  }\r\n};\r\n","import { State, PlayerListType, TypeOfCard, InventoryType } from \"../../types\";\r\n\r\n/**\r\n * We need to give highlighting to healthCard\r\n */\r\n\r\nexport const getStateCardSelected = (\r\n  state: State,\r\n  typeOfSelect: TypeOfCard\r\n): State => {\r\n  // TODO: Need to restrict select unneceserry card -?!\r\n  // Add switch on type of cards\r\n  const { activePlayerNumber } = state;\r\n\r\n  const isCardNonZero = checkCardNonZero(state, typeOfSelect);\r\n\r\n  switch (isCardNonZero) {\r\n    case false: {\r\n      return state;\r\n    }\r\n\r\n    case true:\r\n      {\r\n        const newPlayerList = changeSelectedCard(state, typeOfSelect);\r\n        const selectedCard = newPlayerList[activePlayerNumber].inventory\r\n          .cardSelected\r\n          ? true\r\n          : false;\r\n\r\n        // The difference between weaponCard and other card that weapon are used in the battle.\r\n        //Obviously we need other stateWithoutSelectedCard for weapon\r\n        const stateWithSelectedCard: State = {\r\n          ...state,\r\n          playerList: newPlayerList,\r\n          gameState: {\r\n            ...state.gameState,\r\n            type: \"gameStarted.applyCard\",\r\n            coordOfAvailableCells: null,\r\n          },\r\n          doEffect: { type: \"!checkAvailableNeighboringCards\" },\r\n        };\r\n\r\n        const stateWithoutSelectedCard: State = {\r\n          ...state,\r\n          playerList: newPlayerList,\r\n          gameState: {\r\n            ...state.gameState,\r\n            coordOfAvailableCards: null,\r\n            type: /* cardType === \"weapon\"\r\n              ? \"gameStarted.interactWithEnemy\"\r\n              :  */ \"gameStarted.playerMove\",\r\n          },\r\n          doEffect: { type: \"!checkAvailableNeighboringCell\" },\r\n        };\r\n\r\n        switch (selectedCard) {\r\n          case true:\r\n            return stateWithSelectedCard;\r\n          case false:\r\n            return stateWithoutSelectedCard;\r\n        }\r\n      }\r\n      break;\r\n\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n\r\nconst changeSelectedCard = (\r\n  state: State,\r\n  typeOfSelect: TypeOfCard\r\n): PlayerListType => {\r\n  const { playerList, activePlayerNumber } = state;\r\n  const inventory = playerList[activePlayerNumber].inventory;\r\n\r\n  const isTheSameSelectType = inventory.cardSelected === typeOfSelect;\r\n\r\n  switch (isTheSameSelectType) {\r\n    case true: {\r\n      const newInventoryCardUnSelected: InventoryType = {\r\n        ...inventory,\r\n        cardSelected: null,\r\n      };\r\n\r\n      const newPlayerList: PlayerListType = {\r\n        ...playerList,\r\n        [activePlayerNumber]: {\r\n          ...playerList[activePlayerNumber],\r\n          inventory: newInventoryCardUnSelected,\r\n        },\r\n      };\r\n\r\n      return newPlayerList;\r\n    }\r\n\r\n    case false: {\r\n      const newInventoryCardSelected: InventoryType = {\r\n        ...inventory,\r\n        cardSelected: typeOfSelect,\r\n      };\r\n\r\n      const newPlayerList: PlayerListType = {\r\n        ...playerList,\r\n        [activePlayerNumber]: {\r\n          ...playerList[activePlayerNumber],\r\n          inventory: newInventoryCardSelected,\r\n        },\r\n      };\r\n\r\n      return newPlayerList;\r\n    }\r\n  }\r\n};\r\n\r\nconst checkCardNonZero = (state: State, typeOfSelect: TypeOfCard): Boolean => {\r\n  const { playerList, activePlayerNumber } = state;\r\n  const inventory = playerList[activePlayerNumber].inventory;\r\n  if (typeOfSelect !== null) {\r\n    const hasCards = inventory[typeOfSelect] !== 0;\r\n    return hasCards;\r\n  } else {\r\n    return false;\r\n  }\r\n};\r\n","import { State, MoveDirection, CellType } from \"../../types\";\r\n\r\n/**\r\n * Returns true if current or next cell has wall\r\n */\r\nexport const checkCellHasWall = (\r\n  state: State,\r\n  newPlayerCoord: string,\r\n  direction: MoveDirection\r\n) => {\r\n  const {\r\n    playerList,\r\n    activePlayerNumber,\r\n    gameField,\r\n    deadPlayerList,\r\n    enemyList,\r\n  } = state;\r\n\r\n  /**\r\n   * Choose alive or dead player\r\n   */\r\n\r\n  const enemyIndex =\r\n    deadPlayerList &&\r\n    deadPlayerList[activePlayerNumber] &&\r\n    deadPlayerList[activePlayerNumber].index\r\n      ? deadPlayerList[activePlayerNumber].index\r\n      : null;\r\n\r\n  const currCellCoord = enemyIndex\r\n    ? enemyList[enemyIndex].coord\r\n    : playerList[activePlayerNumber].coord;\r\n\r\n  const currCell = gameField.values[currCellCoord];\r\n  const nextCell = gameField.values[newPlayerCoord];\r\n  const oppositeDirection = getOppositeDirection(direction);\r\n  const currCellHasBarrier = checkCellOnBarrier(currCell, direction);\r\n\r\n  const nextCellHasBarrier = checkCellOnBarrier(nextCell, oppositeDirection);\r\n\r\n  if (currCellHasBarrier || nextCellHasBarrier) {\r\n    return true;\r\n  } else {\r\n    return false;\r\n  }\r\n};\r\n\r\nconst checkCellOnBarrier = (cell: CellType, direction: MoveDirection) => {\r\n  if (cell.name === \"commonCell\") {\r\n    //Now in config just left and bottom walls\r\n    if (direction === \"left\" || direction === \"bottom\") {\r\n      const cellHasWall = cell.barrierList?.find(\r\n        (barrier) => barrier.name === \"wall\" && barrier.direction === direction\r\n      )\r\n        ? true\r\n        : false;\r\n      const cellHasClosedHole = cell.barrierList?.find(\r\n        (barrier) =>\r\n          (barrier.name !== \"wall\" && barrier.isOpen) === false &&\r\n          barrier.direction === direction\r\n      )\r\n        ? true\r\n        : false;\r\n      const cellHasBarrier = cellHasWall || cellHasClosedHole;\r\n      return cellHasBarrier;\r\n    }\r\n    return false;\r\n  }\r\n};\r\n\r\nconst getOppositeDirection = (direction: MoveDirection): MoveDirection => {\r\n  switch (direction) {\r\n    case \"top\": {\r\n      return \"bottom\";\r\n    }\r\n    case \"bottom\": {\r\n      return \"top\";\r\n    }\r\n    case \"left\": {\r\n      return \"right\";\r\n    }\r\n    case \"right\": {\r\n      return \"left\";\r\n    }\r\n  }\r\n};\r\n","import { State, PlayerListType, MoveDirection } from \"../../../types\";\r\n\r\nimport { checkCellHasWall } from \"../../common/checkCellHasWall\";\r\n/** Cheking the cases when can't take the cell. In default we think that can. */\r\nexport const checkCanTakeCell = (\r\n  state: State,\r\n  nextPlayerCoord: string,\r\n  direction: MoveDirection\r\n) => {\r\n  const { playerList, dice } = state;\r\n  const metBarrier = checkCellHasWall(state, nextPlayerCoord, direction);\r\n  const isLastStepOfMove = dice === 1;\r\n  const isNextCellOcupied = checkNextCellOccupied(playerList, nextPlayerCoord);\r\n  const canNotTakeCell = isLastStepOfMove && isNextCellOcupied;\r\n\r\n  switch (true) {\r\n    case metBarrier: {\r\n      return false;\r\n    }\r\n\r\n    case canNotTakeCell: {\r\n      // TODO: –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è —Å—Ç–∞—Ç—É—Å–∞ —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º –æ –∑–∞–Ω—è—Ç–æ–π —á–µ–π–∫–µ\r\n      return false;\r\n    }\r\n    default: {\r\n      return true;\r\n    }\r\n  }\r\n};\r\n\r\nconst checkNextCellOccupied = (\r\n  playersList: PlayerListType,\r\n  newCoord: string\r\n): boolean => {\r\n  const iterablePlayerList = Object.entries(playersList);\r\n  const isCellOccupied = iterablePlayerList.some((player) => {\r\n    const [, playerValue] = player;\r\n    return playerValue.coord === newCoord;\r\n  });\r\n  return isCellOccupied;\r\n};\r\n","import { AvailableCellListType, State } from \"../../../types\";\r\nimport { getNeighboringCellList } from \"../../common\";\r\nimport { checkCanTakeCell } from \"./checkCanTakeCell\";\r\n\r\n/**\r\n * Current player get field \"availableForTake\" with coordinate of cells that can be taken\r\n */\r\nexport const getAvailableCells = (state: State): State => {\r\n  const { playerList, activePlayerNumber, gameField } = state;\r\n  const prevPlayerCoord = playerList[activePlayerNumber].coord;\r\n  const neighboringCellList = getNeighboringCellList(\r\n    prevPlayerCoord,\r\n    gameField\r\n  );\r\n\r\n  /**\r\n   * Returns the coordinates of Cell that can be taken by player.\r\n   */\r\n  const availableCellList: AvailableCellListType = neighboringCellList.filter(\r\n    (cellItem) => {\r\n      const { direction, coord } = cellItem;\r\n\r\n      return checkCanTakeCell(state, coord, direction);\r\n    }\r\n  );\r\n\r\n  const coordOfAvailableCells = availableCellList.map((cellItem) => {\r\n    const { coord } = cellItem;\r\n    return coord;\r\n  });\r\n\r\n  return {\r\n    ...state,\r\n    doEffect: null,\r\n    gameState: { ...state.gameState, coordOfAvailableCells },\r\n  };\r\n};\r\n","import { MoveDirection, State } from \"../../../types\";\r\nimport { getNextPlayerCoord } from \"../../common\";\r\nimport { changePlayerCoord } from \"./changePlayerCoord\";\r\n\r\n/**\r\n * Changing coordinates of player if he can take the cell in certain direction.\r\n */\r\nexport const getStatePlayerMoved = (\r\n  state: State,\r\n  direction: MoveDirection\r\n): State => {\r\n  const { playerList, activePlayerNumber } = state;\r\n\r\n  const prevPlayerCoord = playerList[activePlayerNumber].coord;\r\n  const nextPlayerCoord = getNextPlayerCoord(prevPlayerCoord, direction);\r\n\r\n  const canTakeNextCell =\r\n    state.gameState.coordOfAvailableCells?.includes(nextPlayerCoord);\r\n\r\n  switch (canTakeNextCell) {\r\n    case true: {\r\n      const newPlayerList = changePlayerCoord(state, nextPlayerCoord);\r\n\r\n      const newState: State = {\r\n        ...state,\r\n        gameState: { ...state.gameState, coordOfAvailableCells: null },\r\n        playerList: newPlayerList,\r\n        doEffect: { type: \"!getPlayerMoveResult\" },\r\n      };\r\n      return newState;\r\n    }\r\n\r\n    case false: {\r\n      return state;\r\n    }\r\n\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n","import { State } from \"../../../types\";\r\n\r\nexport const changePlayerCoord = (state: State, newPlayerCoord: string) => {\r\n  const { playerList, activePlayerNumber } = state;\r\n\r\n  const newPlayerList = {\r\n    ...playerList,\r\n    [activePlayerNumber]: {\r\n      ...playerList[activePlayerNumber],\r\n      coord: newPlayerCoord,\r\n    },\r\n  };\r\n  return newPlayerList;\r\n};\r\n","import { State, TypeOfCard } from \"../../../types\";\r\n\r\nimport { ActionType } from \"../../../reducer\";\r\nimport { getPlayerMoveResult } from \"./getPlayerMoveResult\";\r\nimport { getStateCardSelected } from \"../../common/getStateCardSelected\";\r\nimport { getAvailableCells } from \"./getAvailableCells\";\r\nimport { getStatePlayerMoved } from \"./getStatePlayerMoved\";\r\n\r\nexport const playerMove = (state: State, action: ActionType): State => {\r\n  switch (action.type) {\r\n    case \"req-checkAvailableNeighboringCell\": {\r\n      return getAvailableCells(state);\r\n    }\r\n\r\n    case \"moveControlsClicked\": {\r\n      const direction = action.payload;\r\n      return getStatePlayerMoved(state, direction);\r\n    }\r\n\r\n    case \"req-getPlayerMoveResult\": {\r\n      return getPlayerMoveResult(state);\r\n    }\r\n\r\n    //TODO: Rename to inventoryCardClicked-?!\r\n    case \"cardChoosed\": {\r\n      const typeofCard: TypeOfCard = action.payload.type;\r\n      return getStateCardSelected(state, typeofCard);\r\n    }\r\n\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n","import { State } from \"../../../types\";\r\nimport { getNextPlayerNumber } from \"../../common/getNextPlayerNumber\";\r\n\r\n/**\r\n * @returns  new state depending on the result of the player's movement.\r\n */\r\n\r\nexport const getPlayerMoveResult = (state: State) => {\r\n  const {\r\n    gameField,\r\n    playerList,\r\n    activePlayerNumber,\r\n    dice,\r\n    enemyList,\r\n    gameState,\r\n  } = state;\r\n\r\n  const newPlayerCoord = playerList[activePlayerNumber].coord;\r\n  const newCellWithPlayer = gameField.values[newPlayerCoord];\r\n  const isLastStepOfMove = dice === 1;\r\n\r\n  const takeFinish = newCellWithPlayer?.name === \"finish\";\r\n\r\n  const takeCard =\r\n    newCellWithPlayer?.name === \"commonCell\" &&\r\n    newCellWithPlayer.cardItem.length > 0;\r\n\r\n  const hasCurrCoordEnemy = Object.entries(enemyList).find(\r\n    ([index, enemyCard]) => {\r\n      return enemyCard.coord === newPlayerCoord;\r\n    }\r\n  );\r\n\r\n  //TODO: Why should i check commonCell-?!\r\n  const metEnemyCard =\r\n    newCellWithPlayer?.name === \"commonCell\" && hasCurrCoordEnemy\r\n      ? true\r\n      : false;\r\n\r\n  const { attackInitiator, ...newGameState } = gameState;\r\n\r\n  // TODO: Is flat switch okey? Or i need it nested?!\r\n  //TODO: add situation, when meet enemy and card on cell!\r\n  switch (true) {\r\n    case takeFinish: {\r\n      const newState: State = {\r\n        ...state,\r\n        dice: state.dice - 1,\r\n        gameResult: \"–í—ã –≤—ã–∏–≥—Ä–∞–ª–∏\",\r\n        doEffect: null,\r\n      };\r\n      return newState;\r\n    }\r\n\r\n    case metEnemyCard: {\r\n      const newState: State = {\r\n        ...state,\r\n        dice: state.dice - 1,\r\n        gameState: {\r\n          ...newGameState,\r\n          type: \"interactWithEnemy\",\r\n        },\r\n        doEffect: { type: \"!checkApperanceEnemyCard\" },\r\n      };\r\n      return newState;\r\n    }\r\n\r\n    case takeCard: {\r\n      const newState: State = {\r\n        ...state,\r\n        dice: state.dice - 1,\r\n        gameState: {\r\n          ...newGameState,\r\n          type: \"gameStarted.takeCard\",\r\n        },\r\n        doEffect: { type: \"!checkApperanceInventoryCard\" },\r\n      };\r\n      return newState;\r\n    }\r\n\r\n    case isLastStepOfMove: {\r\n      const newPlayerNumber = getNextPlayerNumber(state);\r\n      const newState: State = {\r\n        ...state,\r\n        dice: 0,\r\n        gameState: {\r\n          ...newGameState,\r\n          type: \"gameStarted.rollDice\",\r\n        },\r\n        activePlayerNumber: newPlayerNumber,\r\n      };\r\n      return newState;\r\n    }\r\n\r\n    default: {\r\n      const newState: State = {\r\n        ...state,\r\n        dice: state.dice - 1,\r\n        gameState: { ...state.gameState, type: \"gameStarted.playerMove\" },\r\n        doEffect: { type: \"!checkAvailableNeighboringCell\" },\r\n      };\r\n      return newState;\r\n    }\r\n  }\r\n};\r\n","import {\r\n  State,\r\n  GameField,\r\n  PlayerListType,\r\n  InventoryType,\r\n} from \"../../../types\";\r\n\r\nimport { ActionType } from \"../../../reducer\";\r\nimport { openCard } from \"./openCard\";\r\nimport { deleteCard } from \"./deleteCard\";\r\nimport { getNextPlayerNumber } from \"../../common/getNextPlayerNumber\";\r\n\r\nexport const takeCard = (state: State, action: ActionType): State => {\r\n  switch (action.type) {\r\n    case \"req-checkInventoryCard\": {\r\n      return checkInventoryCardApperance(state);\r\n    }\r\n\r\n    case \"req-openCard\": {\r\n      return getStateOpenCard(state);\r\n    }\r\n\r\n    case \"req-takeCard\": {\r\n      return getStateCardTaken(state);\r\n    }\r\n\r\n    case \"req-deleteCard\": {\r\n      return getStateDeletedCard(state);\r\n    }\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst getStateOpenCard = (state: State): State => {\r\n  const { gameField, activePlayerNumber, playerList } = state;\r\n  const playerCoordIndex = playerList[activePlayerNumber].coord;\r\n  const currCell = gameField.values[playerCoordIndex];\r\n\r\n  const cellWithOpenCard = openCard(currCell);\r\n\r\n  const newGameField: GameField = {\r\n    ...gameField,\r\n    values: { ...gameField.values, [playerCoordIndex]: cellWithOpenCard },\r\n  };\r\n\r\n  return {\r\n    ...state,\r\n    gameField: newGameField,\r\n    doEffect: { type: \"!takeCard\" },\r\n  };\r\n};\r\n\r\nconst getStateCardTaken = (state: State): State => {\r\n  const { gameField, activePlayerNumber, playerList } = state;\r\n  const player = playerList[activePlayerNumber];\r\n\r\n  const cardItems = gameField.values[player.coord].cardItem;\r\n\r\n  const emptyInventory = {\r\n    boards: 0,\r\n    health: 0,\r\n    weapon: 0,\r\n    cardSelected: null,\r\n  };\r\n\r\n  let structuredCardItems: InventoryType = cardItems.reduce(\r\n    (prevItem, currentItem) => {\r\n      if (currentItem) {\r\n        const prevItemObj = prevItem[currentItem.name];\r\n\r\n        if (prevItemObj) {\r\n          return {\r\n            ...prevItem,\r\n            [currentItem.name]: prevItem[currentItem.name] + 1,\r\n          };\r\n        } else {\r\n          return { ...prevItem, [currentItem.name]: 1 };\r\n        }\r\n      } else return emptyInventory;\r\n    },\r\n    emptyInventory\r\n  );\r\n\r\n  const newInventory = {\r\n    ...player.inventory,\r\n    boards: player.inventory.boards + structuredCardItems.boards,\r\n    health: player.inventory.health + structuredCardItems.health,\r\n    weapon: player.inventory.weapon + structuredCardItems.weapon,\r\n  };\r\n\r\n  const newPlayer = {\r\n    ...player,\r\n    inventory: newInventory,\r\n  };\r\n\r\n  const newPlayerList: PlayerListType = {\r\n    ...playerList,\r\n    [activePlayerNumber]: newPlayer,\r\n  };\r\n\r\n  return {\r\n    ...state,\r\n    doEffect: { type: \"!deleteCard\" },\r\n    playerList: newPlayerList,\r\n  };\r\n};\r\n\r\nconst getStateDeletedCard = (state: State): State => {\r\n  const { gameField, activePlayerNumber, playerList } = state;\r\n\r\n  const playerCoordIndex = playerList[activePlayerNumber].coord;\r\n\r\n  const currCell = gameField.values[playerCoordIndex];\r\n\r\n  const cellWithoutCard = deleteCard(currCell);\r\n\r\n  const newGameField: GameField = {\r\n    ...gameField,\r\n    values: {\r\n      ...gameField.values,\r\n      [playerCoordIndex]: cellWithoutCard,\r\n    },\r\n  };\r\n\r\n  const newPlayerNumber = getNextPlayerNumber(state);\r\n\r\n  return {\r\n    ...state,\r\n    gameField: newGameField,\r\n    gameState: { ...state.gameState, type: \"gameStarted.rollDice\" },\r\n    activePlayerNumber: newPlayerNumber,\r\n    dice: 0,\r\n  };\r\n};\r\n\r\nconst checkInventoryCardApperance = (state: State): State => {\r\n  const { gameField, activePlayerNumber, playerList } = state;\r\n  const playerCoordIndex = playerList[activePlayerNumber].coord;\r\n  const currCell = gameField.values[playerCoordIndex];\r\n  const cardItemList = currCell.cardItem;\r\n  const isOneCardOnCell = cardItemList.length === 1;\r\n\r\n  switch (isOneCardOnCell) {\r\n    case true: {\r\n      const needOpenCard = cardItemList[0]?.apperance === \"closed\";\r\n\r\n      switch (needOpenCard) {\r\n        case true: {\r\n          return {\r\n            ...state,\r\n            doEffect: { type: \"!openCard\" },\r\n          };\r\n        }\r\n        case false: {\r\n          return { ...state, doEffect: { type: \"!takeCard\" } };\r\n        }\r\n\r\n        default: {\r\n          return state;\r\n        }\r\n      }\r\n    }\r\n    case false: {\r\n      return { ...state, doEffect: { type: \"!takeCard\" } };\r\n    }\r\n\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n","import { CellType, CardItem } from \"../../../types\";\r\n\r\nexport const openCard = (cell: CellType): CellType => {\r\n  if (cell.name === \"commonCell\") {\r\n    /**\r\n     * When we open card we now for sure that in cell lying only one card\r\n     */\r\n    const cardItemWithOpenCard = cell.cardItem.map((cardItem) => {\r\n      if (cardItem) {\r\n        const openedCard: CardItem = {\r\n          ...cardItem,\r\n          apperance: \"open\",\r\n        };\r\n        return openedCard;\r\n      } else {\r\n        return null;\r\n      }\r\n    });\r\n\r\n    const openedItem: CellType = {\r\n      ...cell,\r\n      cardItem: cardItemWithOpenCard,\r\n    };\r\n\r\n    return openedItem;\r\n  } else {\r\n    return cell;\r\n  }\r\n};\r\n","import { CommonCell, CellType } from \"../../../types\";\r\n\r\nexport const deleteCard = (currCell: CellType): CellType => {\r\n  /**\r\n   * When we delete card we now for sure that in cell lying only one card\r\n   */\r\n  if (currCell.name === \"commonCell\") {\r\n    const cellWithoutHealth: CommonCell = {\r\n      ...currCell,\r\n      cardItem: [],\r\n    };\r\n    return cellWithoutHealth;\r\n  } else return currCell;\r\n};\r\n","import { PlayerName, State } from \"../../../types\";\r\nimport { ActionType } from \"../../../reducer\";\r\n\r\nexport const rollDice = (state: State, action: ActionType): State => {\r\n  switch (action.type) {\r\n    case \"diceThrown\": {\r\n      const typeOfPlayer: PlayerName = state.playerList[\r\n        state.activePlayerNumber\r\n      ]\r\n        ? \"player\"\r\n        : \"dead\";\r\n\r\n      switch (typeOfPlayer) {\r\n        case \"dead\": {\r\n          return {\r\n            ...state,\r\n            dice: action.payload,\r\n            gameState: {\r\n              ...state.gameState,\r\n              type: \"enemyMove.chooseEnemy\",\r\n            },\r\n          };\r\n        }\r\n\r\n        case \"player\": {\r\n          return {\r\n            ...state,\r\n            dice: action.payload,\r\n            gameState: { ...state.gameState, type: \"gameStarted.playerMove\" },\r\n            doEffect: { type: \"!checkAvailableNeighboringCell\" },\r\n          };\r\n        }\r\n      }\r\n    }\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { DeadPlayerListType, State } from \"../../types\";\r\nimport { getNextPlayerNumber } from \"../common/getNextPlayerNumber\";\r\n\r\nexport const getBattleResult = (state: State): State => {\r\n  const { dice } = state;\r\n\r\n  switch (dice) {\r\n    case 1:\r\n    case 2: {\r\n      return getStatePlayerCanFight(state);\r\n    }\r\n\r\n    case 3: {\r\n      return getStatePlayetLoseHealth(state);\r\n    }\r\n\r\n    case 4: {\r\n      return getStatePlayerRunsAway(state);\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst getStatePlayerCanFight = (state: State): State => {\r\n  //Player can use weapon or rethrow dice\r\n  return {\r\n    ...state,\r\n    dice: 0,\r\n    gameState: {\r\n      ...state.gameState,\r\n      type: \"interactWithEnemy.makeBattleAction\",\r\n    },\r\n  };\r\n};\r\n\r\nconst getStatePlayerRunsAway = (state: State): State => {\r\n  return {\r\n    ...state,\r\n    dice: 0,\r\n    gameState: {\r\n      ...state.gameState,\r\n      /*   attackInitiator: null, */\r\n      type: \"gameStarted.rollDice\",\r\n    },\r\n  };\r\n};\r\n\r\nconst getStatePlayetLoseHealth = (state: State): State => {\r\n  const { playerList, activePlayerNumber, deadPlayerList, gameState } = state;\r\n  const newPlayerHealth = playerList[activePlayerNumber].health - 1;\r\n  const isPlayerAlive = newPlayerHealth > 0 ? true : false;\r\n\r\n  switch (isPlayerAlive) {\r\n    case true: {\r\n      const newPlayerList = {\r\n        ...playerList,\r\n        [activePlayerNumber]: {\r\n          ...playerList[activePlayerNumber],\r\n          health: playerList[activePlayerNumber].health - 1,\r\n        },\r\n      };\r\n\r\n      const newState: State = {\r\n        ...state,\r\n        dice: 0,\r\n        gameState: {\r\n          ...state.gameState,\r\n          /*   attackInitiator: null, */\r\n          type: \"interactWithEnemy.throwBattleDice\",\r\n        },\r\n        playerList: newPlayerList,\r\n      };\r\n\r\n      return newState;\r\n    }\r\n\r\n    case false: {\r\n      const newPlayerListObj = Object.entries(playerList).filter(\r\n        (playerList) => {\r\n          const [index, player] = playerList;\r\n          return Number(index) !== activePlayerNumber;\r\n        }\r\n      );\r\n      const newPlayerList = Object.fromEntries(newPlayerListObj);\r\n\r\n      const newDeadPlayerList: DeadPlayerListType = {\r\n        ...deadPlayerList,\r\n        [activePlayerNumber]: {\r\n          orderNumber: playerList[activePlayerNumber].orderNumber,\r\n          name: \"dead\",\r\n        },\r\n      };\r\n\r\n      const newPlayerNumber = getNextPlayerNumber(state);\r\n\r\n      const { attackInitiator, ...newGameState } = gameState;\r\n\r\n      const newState: State = {\r\n        ...state,\r\n        dice: 0,\r\n\r\n        gameState: {\r\n          ...newGameState,\r\n          type: \"gameStarted.rollDice\",\r\n        },\r\n\r\n        deadPlayerList: newDeadPlayerList,\r\n        playerList: newPlayerList,\r\n        activePlayerNumber: newPlayerNumber,\r\n      };\r\n\r\n      return newState;\r\n    }\r\n  }\r\n};\r\n","import { InventoryType, PlayerListType } from \"../../types\";\r\n\r\nexport const deleteSelectedCard = (\r\n  playerList: PlayerListType,\r\n  activePlayerNumber: number\r\n) => {\r\n  const currInventory = playerList[activePlayerNumber].inventory;\r\n\r\n  const removedCardType = playerList[activePlayerNumber].inventory.cardSelected;\r\n\r\n  if (removedCardType) {\r\n    const newInventory: InventoryType = {\r\n      ...currInventory,\r\n      [removedCardType]: currInventory[removedCardType] - 1,\r\n      cardSelected: null,\r\n    };\r\n\r\n    return newInventory;\r\n  } else {\r\n    return currInventory;\r\n  }\r\n};\r\n","import { State } from \"../../types\";\r\nimport { ActionType } from \"../../reducer\";\r\n\r\nexport const thrownBattleDice = (state: State, action: ActionType): State => {\r\n  switch (action.type) {\r\n    case \"diceThrown\": {\r\n      return {\r\n        ...state,\r\n        dice: action.payload,\r\n        gameState: { ...state.gameState, type: \"interactWithEnemy\" },\r\n        doEffect: { type: \"!getBattleResult\" },\r\n      };\r\n    }\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { State } from \"../../types\";\r\nimport { ActionType } from \"../../reducer\";\r\nimport { changeSelectedCard } from \"./changeSelectedCard\";\r\n\r\nexport const selectCard = (state: State, action: ActionType) => {\r\n  const { playerList, activePlayerNumber } = state;\r\n  switch (action.type) {\r\n    case \"cardChoosed\": {\r\n      //TODO: now in battle we can chose any card from inventory\r\n\r\n      const currPlayerInventory = playerList[activePlayerNumber].inventory;\r\n\r\n      const isChosenCardWeapon =\r\n        action.payload.type === \"weapon\" ? true : false;\r\n\r\n      const hasWeapon = currPlayerInventory.weapon !== 0 ? true : false;\r\n\r\n      const chosenWeapon = isChosenCardWeapon && hasWeapon;\r\n\r\n      switch (chosenWeapon) {\r\n        case true: {\r\n          const newPlayerList = changeSelectedCard(state, action.payload.type);\r\n\r\n          const hasAnyCardSelected = newPlayerList[activePlayerNumber].inventory\r\n            .cardSelected\r\n            ? true\r\n            : false;\r\n\r\n          // The difference between weaponCard and other card that weapon are used in the battle.\r\n          // Obviously we need other stateWithoutSelectedCard for weapon\r\n          const stateWithSelectedCard: State = {\r\n            ...state,\r\n            playerList: newPlayerList,\r\n            gameState: {\r\n              ...state.gameState,\r\n              type: \"interactWithEnemy.applyCard\",\r\n            },\r\n          };\r\n\r\n          const stateWithoutSelectedCard: State = {\r\n            ...state,\r\n            playerList: newPlayerList,\r\n            gameState: {\r\n              ...state.gameState,\r\n              type: \"interactWithEnemy.makeBattleAction\",\r\n            },\r\n          };\r\n\r\n          switch (hasAnyCardSelected) {\r\n            case true:\r\n              return stateWithSelectedCard;\r\n            case false:\r\n              return stateWithoutSelectedCard;\r\n          }\r\n          break;\r\n        }\r\n        case false: {\r\n          return state;\r\n        }\r\n      }\r\n    }\r\n\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n","import { State, PlayerListType, TypeOfCard } from \"../../types\";\r\n\r\nexport const changeSelectedCard = (state: State, typeOfSelect: TypeOfCard) => {\r\n  const { playerList, activePlayerNumber } = state;\r\n  const inventory = playerList[activePlayerNumber].inventory;\r\n\r\n  const currentTypeOfSelect =\r\n    playerList[activePlayerNumber].inventory.cardSelected;\r\n\r\n  const isTheSameSelectType = currentTypeOfSelect === typeOfSelect;\r\n\r\n  const newSelectType = isTheSameSelectType ? null : typeOfSelect;\r\n\r\n  const newInventory = { ...inventory, cardSelected: newSelectType };\r\n\r\n  const newPlayerList: PlayerListType = {\r\n    ...playerList,\r\n    [activePlayerNumber]: {\r\n      ...playerList[activePlayerNumber],\r\n      inventory: newInventory,\r\n    },\r\n  };\r\n\r\n  return newPlayerList;\r\n};\r\n","import { State } from \"../../types\";\r\n\r\nimport { ActionType } from \"../../reducer\";\r\nimport { openEnemyCard } from \"./openEnemyCard\";\r\nimport { getBattleResult } from \"./getBattleResult\";\r\nimport { removeEnemyCard } from \"./removeEnemyCard\";\r\nimport { getStateClickedEnemy } from \"./getStateClickedEnemy\";\r\nimport { checkCardApperance } from \"./checkCardApperance\";\r\nimport { thrownBattleDice } from \"./thrownBattleDice\";\r\nimport { selectCard } from \"./selectCard\";\r\n\r\nexport const interactWithEnemy = (state: State, action: ActionType): State => {\r\n  const [, phaseInner] = state.gameState.type.split(\".\");\r\n\r\n  switch (phaseInner) {\r\n    case \"makeBattleAction\": {\r\n      switch (action.type) {\r\n        case \"diceThrown\": {\r\n          return thrownBattleDice(state, action);\r\n        }\r\n\r\n        case \"cardChoosed\": {\r\n          return selectCard(state, action);\r\n        }\r\n\r\n        default: {\r\n          return state;\r\n        }\r\n      }\r\n    }\r\n\r\n    case \"applyCard\": {\r\n      switch (action.type) {\r\n        case \"cardChoosed\": {\r\n          return selectCard(state, action);\r\n        }\r\n\r\n        case \"clickedEnemy\": {\r\n          return getStateClickedEnemy(state, action);\r\n        }\r\n        case \"req-removeEnemyCard\": {\r\n          return removeEnemyCard(state);\r\n        }\r\n\r\n        default: {\r\n          return state;\r\n        }\r\n      }\r\n    }\r\n\r\n    case \"throwBattleDice\": {\r\n      return thrownBattleDice(state, action);\r\n    }\r\n\r\n    default: {\r\n      switch (action.type) {\r\n        case \"req-checkEnemyCard\": {\r\n          return checkCardApperance(state);\r\n        }\r\n\r\n        case \"req-openEnemyCard\": {\r\n          return openEnemyCard(state);\r\n        }\r\n\r\n        case \"req-getBattleResult\": {\r\n          return getBattleResult(state);\r\n        }\r\n\r\n        default: {\r\n          return state;\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\n","import { ActionType } from \"../../reducer\";\r\nimport { State, EnemyCardType } from \"../../types\";\r\nimport { deleteSelectedCard } from \"../common/deleteSelectedCard\";\r\n\r\nexport const getStateClickedEnemy = (\r\n  state: State,\r\n  action: ActionType\r\n): State => {\r\n  switch (action.type) {\r\n    case \"clickedEnemy\": {\r\n      const { activePlayerNumber, playerList, enemyList } = state;\r\n      const currEnemy = action.payload.enemyCard;\r\n      const currEnemyCoord = playerList[activePlayerNumber].coord;\r\n\r\n      const playerCanFight =\r\n        playerList[activePlayerNumber].coord === currEnemyCoord;\r\n\r\n      const currEnemyIndex = Object.keys(enemyList).find((key) => {\r\n        return enemyList[Number(key)].coord === currEnemyCoord;\r\n      });\r\n\r\n      const defeatedEnemy: EnemyCardType = {\r\n        ...currEnemy,\r\n        apperance: \"defeated\",\r\n      };\r\n\r\n      const newEnemyList = {\r\n        ...state.enemyList,\r\n        [Number(currEnemyIndex)]: defeatedEnemy,\r\n      };\r\n\r\n      const newInventory = deleteSelectedCard(playerList, activePlayerNumber);\r\n\r\n      const newPlayerList = {\r\n        ...playerList,\r\n        [activePlayerNumber]: {\r\n          ...playerList[activePlayerNumber],\r\n          inventory: newInventory,\r\n        },\r\n      };\r\n\r\n      switch (playerCanFight) {\r\n        case true: {\r\n          return {\r\n            ...state,\r\n            enemyList: newEnemyList,\r\n            playerList: newPlayerList,\r\n            doEffect: { type: \"!removeEnemyCard\" },\r\n          };\r\n        }\r\n        case false: {\r\n          return state;\r\n        }\r\n      }\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n","import { EnemyListType, GameState, State } from \"../../types\";\r\nimport { getNextPlayerNumber } from \"../common/getNextPlayerNumber\";\r\n\r\nexport const removeEnemyCard = (state: State): State => {\r\n  const { enemyList, activePlayerNumber, playerList, gameState, gameField } =\r\n    state;\r\n\r\n  const currentCoord = playerList[activePlayerNumber].coord;\r\n\r\n  const newEnemyArray = Object.entries(enemyList).filter((enemyItem) => {\r\n    const [, enemyCard] = enemyItem;\r\n    return enemyCard.coord !== currentCoord;\r\n  });\r\n  const newEnemyList: EnemyListType = Object.fromEntries(newEnemyArray);\r\n\r\n  const newPlayerNumber = getNextPlayerNumber(state);\r\n\r\n  const { attackInitiator, ...newGameState } = gameState;\r\n\r\n  const cellHasCard = gameField.values[currentCoord].cardItem.length > 0;\r\n\r\n  switch (cellHasCard) {\r\n    case true: {\r\n      return {\r\n        ...state,\r\n        enemyList: newEnemyList,\r\n        dice: 0,\r\n        gameState: {\r\n          ...newGameState,\r\n          type: \"gameStarted.takeCard\",\r\n        },\r\n        doEffect: { type: \"!checkApperanceInventoryCard\" },\r\n      };\r\n    }\r\n\r\n    case false: {\r\n      return {\r\n        ...state,\r\n        enemyList: newEnemyList,\r\n        dice: 0,\r\n        gameState: {\r\n          ...newGameState,\r\n          type: \"gameStarted.rollDice\",\r\n        },\r\n        activePlayerNumber: newPlayerNumber,\r\n      };\r\n    }\r\n  }\r\n};\r\n","import { State } from \"../../types\";\r\n\r\nexport const checkCardApperance = (state: State): State => {\r\n  const { enemyList, playerList, activePlayerNumber } = state;\r\n  const currentCoord = playerList[activePlayerNumber].coord;\r\n\r\n  const currEnemy = Object.entries(enemyList)\r\n    .map((enemyItem) => {\r\n      const [index, enemyCard] = enemyItem;\r\n      return enemyCard;\r\n    })\r\n    .find((enemyCard) => {\r\n      return enemyCard.coord === currentCoord;\r\n    });\r\n\r\n  const isNeedOpenEnemyCard = currEnemy?.apperance === \"open\" ? false : true;\r\n\r\n  switch (true) {\r\n    case isNeedOpenEnemyCard: {\r\n      return {\r\n        ...state,\r\n        doEffect: { type: \"!openEnemyCard\" },\r\n      };\r\n    }\r\n\r\n    case !isNeedOpenEnemyCard: {\r\n      return {\r\n        ...state,\r\n        gameState: {\r\n          ...state.gameState,\r\n          type: \"interactWithEnemy.throwBattleDice\",\r\n        },\r\n\r\n        dice: 0,\r\n      };\r\n    }\r\n\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n","import { EnemyCardType, EnemyListType, State } from \"../../types\";\r\n\r\n/**\r\n * Need separate method for open EnemyCard\r\n * Because it dont lying structurally on cell\r\n */\r\nexport const openEnemyCard = (state: State): State => {\r\n  const { enemyList, playerList, activePlayerNumber } = state;\r\n  const currentCoord = playerList[activePlayerNumber].coord;\r\n\r\n  //TODO: we have one enemy in the same coordinate, but if not?\r\n  const currEnemyIndex = Object.entries(enemyList)\r\n    .filter(([index, enemyCard]) => {\r\n      return enemyCard.coord === currentCoord;\r\n    })\r\n    .map(([index, enemyCard]) => {\r\n      return index;\r\n    })\r\n    .join();\r\n\r\n  const newEnemyList = {\r\n    ...enemyList,\r\n    [currEnemyIndex]: {\r\n      ...enemyList[Number(currEnemyIndex)],\r\n      apperance: \"open\",\r\n    },\r\n  };\r\n\r\n  if (currEnemyIndex) {\r\n    return {\r\n      ...state,\r\n      enemyList: newEnemyList,\r\n      gameState: {\r\n        ...state.gameState,\r\n        type: \"interactWithEnemy.throwBattleDice\",\r\n      },\r\n      dice: 0,\r\n    };\r\n  } else {\r\n    return state;\r\n  }\r\n  /*   if (currEnemyCard) {\r\n    const openedEnemyCard: EnemyCardType = {\r\n      ...currEnemyCard,\r\n      apperance: \"open\",\r\n    };\r\n\r\n    const newEnemyList = { ...enemyList, [currentCoord]: openedEnemyCard };\r\n    return {\r\n      ...state,\r\n      enemyList: newEnemyList,\r\n      gameState: {\r\n        ...state.gameState,\r\n        type: \"interactWithEnemy.throwBattleDice\",\r\n      },\r\n      dice: 0,\r\n    };\r\n  } else return state; */\r\n};\r\n","import { State } from \"../../../types\";\r\n\r\nexport const getStateGiveCard = (\r\n  state: State,\r\n  recipientPlayerNumber: number\r\n): State => {\r\n  const { playerList, activePlayerNumber } = state;\r\n  const indexCurrPlayer = activePlayerNumber;\r\n\r\n  const currentPlayerInventory = playerList[indexCurrPlayer].inventory;\r\n  const recepientPlayerInventory = playerList[recipientPlayerNumber].inventory;\r\n\r\n  const sharedCardType = playerList[indexCurrPlayer].inventory.cardSelected;\r\n\r\n  if (sharedCardType) {\r\n    const newCurrentPlayerInventory = {\r\n      ...currentPlayerInventory,\r\n      [sharedCardType]: currentPlayerInventory[sharedCardType] - 1,\r\n      cardSelected: null,\r\n    };\r\n\r\n    const newRecepientPlayerInventory = {\r\n      ...recepientPlayerInventory,\r\n      [sharedCardType]: recepientPlayerInventory[sharedCardType] + 1,\r\n    };\r\n\r\n    const newPlayerList = {\r\n      ...playerList,\r\n      [indexCurrPlayer]: {\r\n        ...playerList[indexCurrPlayer],\r\n        inventory: newCurrentPlayerInventory,\r\n      },\r\n      [recipientPlayerNumber]: {\r\n        ...playerList[recipientPlayerNumber],\r\n        inventory: newRecepientPlayerInventory,\r\n      },\r\n    };\r\n\r\n    return {\r\n      ...state,\r\n      playerList: newPlayerList,\r\n      gameState: { ...state.gameState, type: \"gameStarted.playerMove\" },\r\n      doEffect: { type: \"!checkAvailableNeighboringCell\" },\r\n    };\r\n  } else {\r\n    return state;\r\n  }\r\n};\r\n","import { PlayerListType } from \"../../../types\";\r\n\r\nexport const changeHealth = (\r\n  playerList: PlayerListType,\r\n  indexTarget: number\r\n) => {\r\n  return playerList[indexTarget].health + 1;\r\n};\r\n","import { State, ContextMenuButtonType } from \"../../../types\";\r\nimport { getStateGiveCard } from \"./getStateGiveCard\";\r\nimport { getStateHealAnotherPlayer } from \"./getStateHealAnotherPlayer\";\r\n\r\nexport const getStateClickedContextMenu = (\r\n  state: State,\r\n  recipientPlayerNumber: number,\r\n  typeOfAction: ContextMenuButtonType\r\n): State => {\r\n  switch (typeOfAction) {\r\n    case \"heal\": {\r\n      const newState = getStateHealAnotherPlayer(state, recipientPlayerNumber);\r\n      const stateClosedContextMenu = closeContextMenu(\r\n        newState,\r\n        recipientPlayerNumber\r\n      );\r\n      return stateClosedContextMenu;\r\n    }\r\n\r\n    case \"share\": {\r\n      const newState = getStateGiveCard(state, recipientPlayerNumber);\r\n      const stateClosedContextMenu = closeContextMenu(\r\n        newState,\r\n        recipientPlayerNumber\r\n      );\r\n      return stateClosedContextMenu;\r\n    }\r\n\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n\r\nconst closeContextMenu = (state: State, recipientPlayerNumber: number) => {\r\n  const stateClosedContextMenu = {\r\n    ...state,\r\n    playerList: {\r\n      ...state.playerList,\r\n      [recipientPlayerNumber]: {\r\n        ...state.playerList[recipientPlayerNumber],\r\n        showContextMenu: false,\r\n      },\r\n    },\r\n  };\r\n  return stateClosedContextMenu;\r\n};\r\n","import { State, PlayerListType } from \"../../../types\";\r\n\r\nimport { deleteSelectedCard } from \"../../common/deleteSelectedCard\";\r\nimport { changeHealth } from \"./changeHealth\";\r\n\r\nexport const getStateHealAnotherPlayer = (\r\n  state: State,\r\n  indexChosenPlayer: number\r\n): State => {\r\n  const { playerList, activePlayerNumber } = state;\r\n  const indexCurrPlayer = activePlayerNumber;\r\n  const newInventory = deleteSelectedCard(playerList, activePlayerNumber);\r\n  const newHealth = changeHealth(playerList, indexChosenPlayer);\r\n\r\n  const newPlayerList: PlayerListType = {\r\n    ...playerList,\r\n    [indexChosenPlayer]: {\r\n      ...playerList[indexChosenPlayer],\r\n      health: newHealth,\r\n    },\r\n    [indexCurrPlayer]: {\r\n      ...playerList[indexCurrPlayer],\r\n      inventory: newInventory,\r\n    },\r\n  };\r\n\r\n  return {\r\n    ...state,\r\n    playerList: newPlayerList,\r\n    gameState: { ...state.gameState, type: \"gameStarted.playerMove\" },\r\n    doEffect: {\r\n      type: \"!checkAvailableNeighboringCell\",\r\n    },\r\n  };\r\n};\r\n","import { State, MoveDirection } from \"../../types\";\r\nimport { checkCellHasWall } from \".\";\r\n\r\n/** Cheking the cases when can't take the cell. In default we think that can. */\r\nexport const canInteractWithCell = (\r\n  state: State,\r\n  nextPlayerCoord: string,\r\n  direction: MoveDirection\r\n) => {\r\n  const { gameField } = state;\r\n  const nextCellForPlayer = gameField.values[nextPlayerCoord];\r\n  const nextCellOutOfGameField = nextCellForPlayer ? false : true;\r\n\r\n  switch (nextCellOutOfGameField) {\r\n    case true: {\r\n      return false;\r\n    }\r\n\r\n    case false: {\r\n      const metBarrier = checkCellHasWall(state, nextPlayerCoord, direction);\r\n\r\n      switch (true) {\r\n        case metBarrier: {\r\n          return false;\r\n        }\r\n\r\n        default: {\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n    default: {\r\n      return true;\r\n    }\r\n  }\r\n};\r\n","import { canInteractWithCell } from \"../../common/canInteractWithCell\";\r\nimport { State, PLayerType, AvailableCellListType } from \"../../../types\";\r\nimport { getNeighboringCellList } from \"../../common\";\r\nimport { getStateGiveCard } from \"./getStateGiveCard\";\r\nimport { getStateHealCurrPlayer } from \"./getStateHealCurrPlayer\";\r\n\r\nexport const getStateClickedPlayer = (\r\n  state: State,\r\n  clickedPlayerCard: PLayerType\r\n) => {\r\n  const { activePlayerNumber, playerList } = state;\r\n\r\n  const currPlayer = playerList[activePlayerNumber];\r\n  const isCurrentPlayer = clickedPlayerCard.orderNumber === activePlayerNumber;\r\n  const cellsForInteract = getCellsForInteract(state);\r\n  const listForHealing = cellsForInteract.concat(currPlayer.coord);\r\n  const canInteractWithPlayer = listForHealing.includes(\r\n    clickedPlayerCard.coord\r\n  );\r\n\r\n  const typeOfChosedCard =\r\n    playerList[activePlayerNumber].inventory.cardSelected;\r\n\r\n  switch (canInteractWithPlayer) {\r\n    case true: {\r\n      switch (typeOfChosedCard) {\r\n        case \"health\": {\r\n          switch (isCurrentPlayer) {\r\n            case true: {\r\n              return getStateHealCurrPlayer(state);\r\n            }\r\n\r\n            case false: {\r\n              const clickedPlayerCardNumber = clickedPlayerCard.orderNumber;\r\n              return openContextMenu(state, clickedPlayerCardNumber);\r\n            }\r\n\r\n            default: {\r\n              return state;\r\n            }\r\n          }\r\n        }\r\n\r\n        case \"weapon\":\r\n        case \"boards\": {\r\n          /**\r\n           * For preventing sharing any cards with himself\r\n           */\r\n          switch (isCurrentPlayer) {\r\n            case true: {\r\n              return state;\r\n            }\r\n\r\n            case false: {\r\n              return getStateGiveCard(state, clickedPlayerCard.orderNumber);\r\n            }\r\n\r\n            default: {\r\n              return state;\r\n            }\r\n          }\r\n        }\r\n\r\n        default: {\r\n          return state;\r\n        }\r\n      }\r\n    }\r\n\r\n    case false: {\r\n      console.log(\"–Ω–µ –º–æ–∂–µ–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å –∏–≥—Ä–æ–∫–æ–º \");\r\n      return state;\r\n    }\r\n\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Open context menu at recipient  card\r\n */\r\nconst openContextMenu = (state: State, recipientPlayerNumber: number) => {\r\n  const stateOpenedContextMenu: State = {\r\n    ...state,\r\n    playerList: {\r\n      ...state.playerList,\r\n      [recipientPlayerNumber]: {\r\n        ...state.playerList[recipientPlayerNumber],\r\n        showContextMenu: true,\r\n      },\r\n    },\r\n  };\r\n\r\n  return stateOpenedContextMenu;\r\n};\r\n\r\n/**\r\n * Show coordinates of cells with wich player can interact(apply card)\r\n */\r\nconst getCellsForInteract = (state: State) => {\r\n  const { gameState, playerList, activePlayerNumber, gameField } = state;\r\n  const prevPlayerCoord = playerList[activePlayerNumber].coord;\r\n\r\n  const neighboringCellList = getNeighboringCellList(\r\n    prevPlayerCoord,\r\n    gameField\r\n  );\r\n\r\n  const availableCellList: AvailableCellListType = neighboringCellList.filter(\r\n    (cellItem) => {\r\n      const { direction, coord } = cellItem;\r\n\r\n      return canInteractWithCell(state, coord, direction);\r\n    }\r\n  );\r\n\r\n  const availableCellsCoords = availableCellList.map((cellItem) => {\r\n    const { coord } = cellItem;\r\n    return coord;\r\n  });\r\n\r\n  switch (gameState.type) {\r\n    case \"gameStarted.applyCard\":\r\n      return availableCellsCoords;\r\n\r\n    default:\r\n      return [];\r\n  }\r\n};\r\n","import { State, PlayerListType } from \"../../../types\";\r\n\r\nimport { deleteSelectedCard } from \"../../common/deleteSelectedCard\";\r\nimport { changeHealth } from \"./changeHealth\";\r\n\r\nexport const getStateHealCurrPlayer = (state: State): State => {\r\n  const { playerList, activePlayerNumber } = state;\r\n  const indexCurrPlayer = activePlayerNumber;\r\n  const newHealth = changeHealth(playerList, indexCurrPlayer);\r\n  const newInventory = deleteSelectedCard(playerList, activePlayerNumber);\r\n  const newPlayerList: PlayerListType = {\r\n    ...playerList,\r\n    [indexCurrPlayer]: {\r\n      ...playerList[indexCurrPlayer],\r\n      inventory: newInventory,\r\n      health: newHealth,\r\n    },\r\n  };\r\n\r\n  return {\r\n    ...state,\r\n    playerList: newPlayerList,\r\n    gameState: { ...state.gameState, type: \"gameStarted.playerMove\" },\r\n    doEffect: {\r\n      type: \"!checkAvailableNeighboringCell\",\r\n    },\r\n  };\r\n};\r\n","import { State } from \"../../../types\";\r\nimport { ActionType } from \"../../../reducer\";\r\n\r\nimport { getStateCardSelected } from \"../../common/getStateCardSelected\";\r\nimport { getStateHoleFilled } from \"./getStateHoleFilled\";\r\nimport { getStateClickedContextMenu } from \"./getStateClickedContextMenu\";\r\nimport { getStateClickedPlayer } from \"./getStateClickedPlayer\";\r\nimport { getAvailableCards } from \"./getAvailableCards\";\r\n/**\r\n *  In payload get order number of chosen for interact player.\r\n * If this number = indexCurrPlayer we heal player.\r\n * If not - we give context menu: need heal or apply.\r\n */\r\nexport const applyCard = (state: State, action: ActionType): State => {\r\n  switch (action.type) {\r\n    case \"cardChoosed\": {\r\n      const typeOfSelect = action.payload.type;\r\n      return getStateCardSelected(state, typeOfSelect);\r\n    }\r\n\r\n    case \"req-fillHole\": {\r\n      const { coord, direction } = action.payload;\r\n      return getStateHoleFilled(state, coord, direction);\r\n    }\r\n\r\n    case \"clickedContextMenu\": {\r\n      const recipientPlayerNumber = action.payload.card.orderNumber;\r\n      const typeOfAction = action.payload.buttonType;\r\n      return getStateClickedContextMenu(\r\n        state,\r\n        recipientPlayerNumber,\r\n        typeOfAction\r\n      );\r\n    }\r\n\r\n    case \"clickedPlayer\": {\r\n      const clickedPlayerCard = action.payload;\r\n      return getStateClickedPlayer(state, clickedPlayerCard);\r\n    }\r\n\r\n    case \"req-checkAvailableNeighboringCards\": {\r\n      const coordOfAvailableCards = getAvailableCards(state);\r\n      return {\r\n        ...state,\r\n        gameState: { ...state.gameState, coordOfAvailableCards },\r\n      };\r\n    }\r\n\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n","import { State, PlayerListType, MoveDirection } from \"../../../types\";\r\n\r\nimport { deleteSelectedCard } from \"../../common/deleteSelectedCard\";\r\n\r\nexport const getStateHoleFilled = (\r\n  state: State,\r\n  coord: number,\r\n  direction: MoveDirection\r\n) => {\r\n  const { gameField, playerList, activePlayerNumber } = state;\r\n  const indexCurrPlayer = activePlayerNumber;\r\n  const newInventory = deleteSelectedCard(playerList, activePlayerNumber);\r\n  const cellWithChosedHole = gameField.values[coord];\r\n\r\n  if (cellWithChosedHole.name === \"commonCell\") {\r\n    const barriersWithClosedHole = cellWithChosedHole.barrierList?.map(\r\n      (barrier) => {\r\n        if (barrier.direction === direction) {\r\n          return { ...barrier, isOpen: false };\r\n        } else return barrier;\r\n      }\r\n    );\r\n\r\n    const newGameField = {\r\n      ...gameField,\r\n      values: {\r\n        ...gameField.values,\r\n        [coord]: {\r\n          ...gameField.values[coord],\r\n          barrierList: barriersWithClosedHole,\r\n        },\r\n      },\r\n    };\r\n\r\n    const newPlayerList: PlayerListType = {\r\n      ...playerList,\r\n      [indexCurrPlayer]: {\r\n        ...playerList[indexCurrPlayer],\r\n        inventory: newInventory,\r\n      },\r\n    };\r\n\r\n    const newState: State = {\r\n      ...state,\r\n      gameField: newGameField,\r\n      playerList: newPlayerList,\r\n      gameState: { ...state.gameState, type: \"gameStarted.playerMove\" },\r\n      doEffect: { type: \"!checkAvailableNeighboringCell\" },\r\n    };\r\n\r\n    return newState;\r\n  } else {\r\n    return state;\r\n  }\r\n};\r\n","import { canInteractWithCell } from \"../../common/canInteractWithCell\";\r\nimport { AvailableCellListType, State } from \"../../../types\";\r\nimport { getNeighboringCellList } from \"../../common\";\r\n\r\nexport const getAvailableCards = (state: State) => {\r\n  const { playerList, activePlayerNumber, gameField } = state;\r\n\r\n  const activePlayerCoord = playerList[activePlayerNumber].coord;\r\n\r\n  const neighboringCellList = getNeighboringCellList(\r\n    activePlayerCoord,\r\n    gameField\r\n  );\r\n\r\n  const availableCellList: AvailableCellListType = neighboringCellList.filter(\r\n    (cellItem) => {\r\n      const { direction, coord } = cellItem;\r\n\r\n      return canInteractWithCell(state, coord, direction);\r\n    }\r\n  );\r\n\r\n  const availableCellsCoords = availableCellList\r\n    .map((cellItem) => {\r\n      const { coord } = cellItem;\r\n      return coord;\r\n    })\r\n    .concat(activePlayerCoord);\r\n\r\n  return availableCellsCoords;\r\n};\r\n","import { State } from \"../../types\";\r\nimport { ActionType } from \"../../reducer\";\r\n\r\nexport const endGame = (state: State, action: ActionType): State => {\r\n  switch (action.type) {\r\n    case \"req-getEndScreen\": {\r\n      return {\r\n        ...state,\r\n        gameState: { ...state.gameState, type: \"getEndScreen\" },\r\n      };\r\n    }\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { State } from \"../../../types\";\r\nimport { ActionType } from \"../../../reducer\";\r\n\r\nexport const getPlayersOrder = (state: State, action: ActionType): State => {\r\n  const numberCurrPlayer = state.activePlayerNumber;\r\n  const commonPlayerList = { ...state.playerList, ...state.deadPlayerList };\r\n  const playerList = Object.entries(commonPlayerList);\r\n  const maxPlayersNumber = playerList.length - 1;\r\n  const minPlayersNumber = 0;\r\n  const nextPlayersNumber =\r\n    numberCurrPlayer + 1 > maxPlayersNumber\r\n      ? minPlayersNumber\r\n      : numberCurrPlayer + 1;\r\n\r\n  switch (action.type) {\r\n    case \"req-getNextPlayer\": {\r\n      return {\r\n        ...state,\r\n        activePlayerNumber: nextPlayersNumber,\r\n        gameState: { ...state.gameState, type: \"gameStarted.rollDice\" },\r\n      };\r\n    }\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import {\r\n  State,\r\n  PlayerListType,\r\n  MoveDirection,\r\n  EnemyListType,\r\n} from \"../../types\";\r\n\r\nimport { checkCellHasWall } from \"../common/checkCellHasWall\";\r\n/*\r\n * Cheking the cases when can't take the cell. In default we think that can.\r\n */\r\nexport const checkCanTakeCell = (\r\n  state: State,\r\n  nextPlayerCoord: string,\r\n  direction: MoveDirection\r\n) => {\r\n  const { dice, enemyList } = state;\r\n  const metBarrier = checkCellHasWall(state, nextPlayerCoord, direction);\r\n  const isLastStepOfMove = dice === 1;\r\n  const isNextCellOcupied = checkNextCellOccupied(enemyList, nextPlayerCoord);\r\n  const canNotTakeCell = isLastStepOfMove && isNextCellOcupied;\r\n\r\n  switch (true) {\r\n    case metBarrier: {\r\n      return false;\r\n    }\r\n\r\n    case canNotTakeCell: {\r\n      // TODO: –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è —Å—Ç–∞—Ç—É—Å–∞ —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º –æ –∑–∞–Ω—è—Ç–æ–π —á–µ–π–∫–µ\r\n      return false;\r\n    }\r\n    default: {\r\n      return true;\r\n    }\r\n  }\r\n};\r\n\r\nconst checkNextCellOccupied = (\r\n  enemyList: EnemyListType,\r\n  newCoord: string\r\n): boolean => {\r\n  const iterableEnemyList = Object.entries(enemyList);\r\n  const isCellOccupied = iterableEnemyList.some(([, enemyCard]) => {\r\n    return enemyCard.coord === newCoord && enemyCard.apperance !== \"closed\";\r\n  });\r\n  return isCellOccupied;\r\n};\r\n","import { AvailableCellListType, State } from \"../../types\";\r\nimport { getNeighboringCellList } from \"../common\";\r\nimport { checkCanTakeCell } from \"./checkCanTakeCell\";\r\n\r\n/**\r\n * Current player(deadPlayer) get field \"availableForTake\" with coordinate of cells that can be taken\r\n */\r\n\r\nexport const getAvailableCells = (state: State): State => {\r\n  const { activePlayerNumber, gameField, deadPlayerList, enemyList } = state;\r\n\r\n  const enemyIndex =\r\n    deadPlayerList && deadPlayerList[activePlayerNumber].index\r\n      ? deadPlayerList[activePlayerNumber].index\r\n      : null;\r\n\r\n  const deadPLayerCoord = enemyIndex ? enemyList[enemyIndex].coord : null;\r\n\r\n  if (deadPLayerCoord) {\r\n    const neighboringCellList = getNeighboringCellList(\r\n      deadPLayerCoord,\r\n      gameField\r\n    );\r\n\r\n    /**\r\n     * Returns the coordinates of cell that can be taken by deadPlayer.\r\n     */\r\n\r\n    const availableCellList: AvailableCellListType = neighboringCellList.filter(\r\n      (cellItem) => {\r\n        const { direction, coord } = cellItem;\r\n\r\n        return checkCanTakeCell(state, coord, direction);\r\n      }\r\n    );\r\n\r\n    const coordOfAvailableCells = availableCellList.map((cellItem) => {\r\n      const { coord } = cellItem;\r\n      return coord;\r\n    });\r\n\r\n    return {\r\n      ...state,\r\n      doEffect: null,\r\n      gameState: { ...state.gameState, coordOfAvailableCells },\r\n    };\r\n  } else {\r\n    return state;\r\n  }\r\n};\r\n","import { State, TypeOfCard } from \"../../types\";\r\n\r\nimport { ActionType } from \"../../reducer\";\r\n\r\nimport { getAvailableCells } from \"./getAvailableCells\";\r\nimport { getStateEnemySelected } from \"./getStateEnemySelected\";\r\nimport { getStateEnemyMoved } from \"./getStateEnemyMoved\";\r\nimport { getEnemyMoveResult } from \"./getEnemyMoveResult\";\r\nimport { getStateSwitchPlayer } from \"./getStateSwitchPlayer\";\r\n\r\nexport const enemyMove = (state: State, action: ActionType): State => {\r\n  const [, phaseInner] = state.gameState.type.split(\".\");\r\n\r\n  switch (phaseInner) {\r\n    case \"chooseEnemy\": {\r\n      switch (action.type) {\r\n        case \"clickedEnemy\": {\r\n          return getStateEnemySelected(state, action);\r\n        }\r\n\r\n        default: {\r\n          return state;\r\n        }\r\n      }\r\n    }\r\n\r\n    default: {\r\n      switch (action.type) {\r\n        case \"req-checkAvailableNeighboringCell\": {\r\n          return getAvailableCells(state);\r\n        }\r\n\r\n        case \"moveControlsClicked\": {\r\n          return getStateEnemyMoved(state, action);\r\n        }\r\n\r\n        case \"req-getPlayerMoveResult\": {\r\n          return getEnemyMoveResult(state);\r\n        }\r\n\r\n        case \"req-switchToNextPlayer\": {\r\n          return getStateSwitchPlayer(state);\r\n        }\r\n\r\n        default: {\r\n          return state;\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\n","import { ActionType } from \"../../reducer\";\r\nimport { State } from \"../../types\";\r\n\r\nexport const getStateEnemySelected = (\r\n  state: State,\r\n  action: ActionType\r\n): State => {\r\n  switch (action.type) {\r\n    case \"clickedEnemy\": {\r\n      const { enemyList, deadPlayerList, activePlayerNumber } = state;\r\n      const currEnemyCard = action.payload.enemyCard;\r\n\r\n      /**\r\n       * we should compare indexes. They doesnt change!!!\r\n       */\r\n      const currEnemyIndex = Object.keys(enemyList).find((key) => {\r\n        return (\r\n          enemyList[Number(key)].coord === currEnemyCard.coord &&\r\n          enemyList[Number(key)].apperance === \"open\"\r\n        );\r\n      });\r\n\r\n      if (deadPlayerList) {\r\n        /**\r\n         * Choose enemy once!\r\n         */\r\n        const hasEnemyCard = deadPlayerList[activePlayerNumber]?.index\r\n          ? false\r\n          : true;\r\n\r\n        const isOpenEnemyCard =\r\n          enemyList[Number(currEnemyIndex)].apperance === \"open\";\r\n\r\n        const canPickEnemyCard = hasEnemyCard && isOpenEnemyCard;\r\n\r\n        switch (canPickEnemyCard) {\r\n          case false: {\r\n            return state;\r\n          }\r\n          case true: {\r\n            const newDeadPLayerList = {\r\n              ...deadPlayerList,\r\n              [activePlayerNumber]: {\r\n                ...deadPlayerList[activePlayerNumber],\r\n                index: currEnemyIndex,\r\n              },\r\n            };\r\n\r\n            return {\r\n              ...state,\r\n              gameState: {\r\n                ...state.gameState,\r\n                type: \"enemyMove\",\r\n              },\r\n              doEffect: { type: \"!checkAvailableNeighboringCell\" },\r\n              deadPlayerList: newDeadPLayerList,\r\n            };\r\n          }\r\n        }\r\n      } else {\r\n        return state;\r\n      }\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n","import { ActionType } from \"../../reducer\";\r\nimport { EnemyListType, State } from \"../../types\";\r\nimport { getNextPlayerCoord } from \"../common\";\r\n\r\nexport const getStateEnemyMoved = (state: State, action: ActionType): State => {\r\n  switch (action.type) {\r\n    case \"moveControlsClicked\": {\r\n      const { deadPlayerList, activePlayerNumber, enemyList } = state;\r\n      const direction = action.payload;\r\n\r\n      const enemyIndex =\r\n        deadPlayerList && deadPlayerList[activePlayerNumber].index\r\n          ? deadPlayerList[activePlayerNumber].index\r\n          : null;\r\n\r\n      if (enemyIndex) {\r\n        const prevEnemyCoord = enemyList[enemyIndex].coord;\r\n\r\n        const nextEnemyCoord = getNextPlayerCoord(prevEnemyCoord, direction);\r\n\r\n        //TODO: Add check canTakeNextCell\r\n\r\n        const canTakeNextCell =\r\n          state.gameState.coordOfAvailableCells?.includes(nextEnemyCoord);\r\n        switch (canTakeNextCell) {\r\n          case true: {\r\n            const enemyListArray = Object.entries(enemyList).map(\r\n              (enemyItem) => {\r\n                const [key, enemy] = enemyItem;\r\n                if (Number(enemyIndex) === Number(key)) {\r\n                  const newEnemy = { ...enemy, coord: nextEnemyCoord };\r\n                  return [key, newEnemy];\r\n                } else return enemyItem;\r\n              }\r\n            );\r\n\r\n            const newEnemyList: EnemyListType =\r\n              Object.fromEntries(enemyListArray);\r\n\r\n            return {\r\n              ...state,\r\n              gameState: { ...state.gameState, coordOfAvailableCells: null },\r\n              enemyList: newEnemyList,\r\n              doEffect: { type: \"!getPlayerMoveResult\" },\r\n            };\r\n          }\r\n          case false: {\r\n            return state;\r\n          }\r\n\r\n          default: {\r\n            return state;\r\n          }\r\n        }\r\n      } else {\r\n        return state;\r\n      }\r\n    }\r\n  }\r\n\r\n  return state;\r\n};\r\n","import { DeadPlayerListType, State } from \"../../types\";\r\nimport { getNextPlayerNumber } from \"../common/getNextPlayerNumber\";\r\n\r\n/**\r\n * @returns  new state depending on the result of the enemys's movement.\r\n */\r\n\r\nexport const getEnemyMoveResult = (state: State) => {\r\n  const {\r\n    gameField,\r\n    playerList,\r\n    activePlayerNumber,\r\n    dice,\r\n    enemyList,\r\n    deadPlayerList,\r\n  } = state;\r\n\r\n  const enemyIndex =\r\n    deadPlayerList && deadPlayerList[activePlayerNumber].index\r\n      ? deadPlayerList[activePlayerNumber].index\r\n      : null;\r\n\r\n  const deadPLayerCoord = enemyIndex ? enemyList[enemyIndex].coord : null;\r\n\r\n  if (deadPLayerCoord) {\r\n    const newCellWithEnemy = gameField.values[deadPLayerCoord];\r\n    const isLastStepOfMove = dice === 1;\r\n\r\n    /**\r\n     * indexMetPlayerCard  can be 0\r\n     */\r\n    const indexMetPlayerCard = Object.values(playerList).find((playerItem) => {\r\n      return playerItem.coord === deadPLayerCoord;\r\n    })?.orderNumber;\r\n\r\n    const metPlayerCard =\r\n      indexMetPlayerCard || indexMetPlayerCard === 0 ? true : false;\r\n\r\n    // TODO: Is flat switch okey? Or i need it nested?!\r\n    switch (true) {\r\n      case metPlayerCard: {\r\n        if (\r\n          (deadPlayerList && indexMetPlayerCard) ||\r\n          (deadPlayerList && indexMetPlayerCard === 0)\r\n        ) {\r\n          /**\r\n           * DeadPlayerList without index of active card\r\n           */\r\n          const newDeadPlayerList: DeadPlayerListType = Object.fromEntries(\r\n            Object.entries(deadPlayerList).map(\r\n              ([orderIndex, deadPlayerItem]) => {\r\n                const { name, orderNumber } = deadPlayerItem;\r\n                return [orderIndex, { name, orderNumber }];\r\n              }\r\n            )\r\n          );\r\n\r\n          const newState: State = {\r\n            ...state,\r\n            dice: state.dice - 1,\r\n            gameState: {\r\n              ...state.gameState,\r\n              attackInitiator: activePlayerNumber,\r\n              type: \"interactWithEnemy.throwBattleDice\",\r\n            },\r\n            activePlayerNumber: indexMetPlayerCard,\r\n            deadPlayerList: newDeadPlayerList,\r\n          };\r\n\r\n          return newState;\r\n        } else {\r\n          return state;\r\n        }\r\n      }\r\n\r\n      case isLastStepOfMove: {\r\n        const newState: State = {\r\n          ...state,\r\n          doEffect: { type: \"!switchToNextPlayer\" },\r\n        };\r\n\r\n        return newState;\r\n      }\r\n\r\n      default: {\r\n        const newState: State = {\r\n          ...state,\r\n          dice: state.dice - 1,\r\n          doEffect: { type: \"!checkAvailableNeighboringCell\" },\r\n        };\r\n        return newState;\r\n      }\r\n    }\r\n  } else {\r\n    return state;\r\n  }\r\n};\r\n","import { DeadPlayerListType, State } from \"../../types\";\r\nimport { getNextPlayerNumber } from \"../common/getNextPlayerNumber\";\r\n\r\nexport const getStateSwitchPlayer = (state: State) => {\r\n  const { deadPlayerList } = state;\r\n\r\n  if (deadPlayerList) {\r\n    const newPlayerNumber = getNextPlayerNumber(state);\r\n\r\n    const newDeadPlayerList: DeadPlayerListType = Object.fromEntries(\r\n      Object.entries(deadPlayerList).map(([orderIndex, deadPlayerItem]) => {\r\n        const { name, orderNumber, index } = deadPlayerItem;\r\n        return [orderIndex, { name, orderNumber }];\r\n      })\r\n    );\r\n\r\n    const newState: State = {\r\n      ...state,\r\n      dice: 0,\r\n      gameState: { ...state.gameState, type: \"gameStarted.rollDice\" },\r\n      activePlayerNumber: newPlayerNumber,\r\n      deadPlayerList: newDeadPlayerList,\r\n    };\r\n    return newState;\r\n  } else {\r\n    return state;\r\n  }\r\n};\r\n","import { reducer } from \"./reducer\";\r\nimport { createStore} from \"redux\";\r\n\r\nexport const store = createStore(\r\n  reducer,\r\n  (window as any).__REDUX_DEVTOOLS_EXTENSION__ &&\r\n    (window as any).__REDUX_DEVTOOLS_EXTENSION__()\r\n);","import { initialState } from \"./initialState\";\r\nimport { waitingStart } from \"./phases/waitingStart\";\r\nimport {\r\n  rollDice,\r\n  playerMove,\r\n  takeCard,\r\n  interactWithEnemy,\r\n  applyCard,\r\n} from \"./phases/gameStarted\";\r\nimport { endGame } from \"./phases/endGame\";\r\nimport {\r\n  ContextMenuButtonType,\r\n  EnemyCardType,\r\n  MoveDirection,\r\n  PLayerType,\r\n  State,\r\n  TypeOfCard,\r\n} from \"./types\";\r\nimport { getPlayersOrder } from \"./phases/gameStarted/getPlayersOrder\";\r\nimport { enemyMove } from \"./phases/enemyMove\";\r\n\r\nexport type ActionType =\r\n  | { type: \"clickedStartButton\" }\r\n  | { type: \"diceThrown\"; payload: number }\r\n  | { type: \"moveControlsClicked\"; payload: MoveDirection }\r\n  | { type: \"req-openCard\" }\r\n  | { type: \"req-checkInventoryCard\" }\r\n  | { type: \"req-changePlayerHealth\" }\r\n  | { type: \"req-deleteCard\" }\r\n  | { type: \"req-checkEnemyCard\" }\r\n  | { type: \"req-openEnemyCard\" }\r\n  | { type: \"req-getBattleResult\" }\r\n  | { type: \"req-getEndScreen\" }\r\n  | { type: \"req-checkAvailableNeighboringCell\" }\r\n  | { type: \"req-checkAvailableNeighboringCards\" }\r\n  | { type: \"req-getPlayerMoveResult\" }\r\n  | { type: \"req-switchToNextPlayer\" }\r\n  | { type: \"req-takeCard\" }\r\n  | {\r\n      type: \"cardChoosed\";\r\n      payload: { type: TypeOfCard };\r\n    }\r\n  | { type: \"req-choosePlayer\" }\r\n  | {\r\n      type: \"req-fillHole\";\r\n      payload: { coord: number; direction: MoveDirection };\r\n    }\r\n  | { type: \"clickedEnemy\"; payload: { enemyCard: EnemyCardType } }\r\n  | { type: \"req-removeEnemyCard\" }\r\n  | { type: \"clickedPlayer\"; payload: PLayerType }\r\n  | {\r\n      type: \"clickedContextMenu\";\r\n      payload: { card: PLayerType; buttonType: ContextMenuButtonType };\r\n    }\r\n  | { type: \"req-getNextPlayer\" };\r\n\r\nexport const reducer = (\r\n  state: State = initialState,\r\n  action: ActionType\r\n): State => {\r\n  const [phaseOuter, phaseInner] = state.gameState.type.split(\".\");\r\n\r\n  switch (phaseOuter) {\r\n    case \"waitingStart\": {\r\n      return waitingStart(state, action);\r\n    }\r\n\r\n    case \"gameStarted\": {\r\n      switch (phaseInner) {\r\n        case \"rollDice\": {\r\n          return rollDice(state, action);\r\n        }\r\n\r\n        case \"playerMove\": {\r\n          return playerMove(state, action);\r\n        }\r\n\r\n        case \"takeCard\": {\r\n          return takeCard(state, action);\r\n        }\r\n        case \"applyCard\": {\r\n          return applyCard(state, action);\r\n        }\r\n\r\n        case \"getPlayersOrder\": {\r\n          return getPlayersOrder(state, action);\r\n        }\r\n\r\n        default:\r\n          return state;\r\n      }\r\n    }\r\n\r\n    case \"enemyMove\": {\r\n      return enemyMove(state, action);\r\n    }\r\n\r\n    case \"interactWithEnemy\": {\r\n      return interactWithEnemy(state, action);\r\n    }\r\n\r\n    case \"endGame\": {\r\n      return endGame(state, action);\r\n    }\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { Provider, useSelector } from \"react-redux\";\r\n\r\nimport styled from \"styled-components\";\r\nimport \"./index.css\";\r\nimport { PlayGrid, MoveControls, Dice, StatusList } from \"./features\";\r\nimport { StartScreen, EndScreen } from \"./pages\";\r\nimport { State } from \"./business/types\";\r\nimport { store } from \"./business/store\";\r\n\r\nimport {\r\n  useOpenCard,\r\n  useEndScreen,\r\n  usePlayerMove,\r\n  useInteractWithEnemy,\r\n  useApplyCard,\r\n} from \"./business/effects\";\r\n\r\n/* import { PlayerStatus } from \"./features/PlayerStatus\"; */\r\n\r\nconst Field = styled.div`\r\n  margin: 0 auto;\r\n`;\r\n\r\nconst Game = styled.div`\r\n  width: 900px;\r\n  height: 600px;\r\n  margin: 40px auto;\r\n  display: flex;\r\n  justify-content: center;\r\n\r\n  cursor: default;\r\n  & > * {\r\n  }\r\n`;\r\n\r\nconst RightPanel = styled.div`\r\n  width: 300px;\r\n  height: 600px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  flex-grow: 0;\r\n  align-items: start;\r\n  margin: 0 30px;\r\n  padding: 50px 0;\r\n  box-sizing: border-box;\r\n  & > * {\r\n  }\r\n`;\r\n\r\nconst LeftPanel = styled.div`\r\n  display: flex;\r\n  align-self: start;\r\n  background-color: white;\r\n  height: 100px;\r\n  margin: 0 30px;\r\n  border-radius: 5px;\r\n  padding: 5px 0;\r\n`;\r\n\r\nconst GameControls = styled.div`\r\n  display: flex;\r\n  width: 100%;\r\n  justify-content: space-between;\r\n  padding: 0 15px;\r\n  box-sizing: border-box;\r\n`;\r\n\r\nexport function GetApp() {\r\n  const { gameState } = useSelector((state: State) => ({ ...state }));\r\n\r\n  useOpenCard();\r\n  usePlayerMove();\r\n  useEndScreen();\r\n  useInteractWithEnemy();\r\n  useApplyCard();\r\n\r\n  const getGameScreen = () => {\r\n    switch (gameState.type) {\r\n      case \"waitingStart\":\r\n        return <StartScreen />;\r\n\r\n      case \"getEndScreen\":\r\n        return <EndScreen />;\r\n\r\n      default:\r\n        return (\r\n          <>\r\n            <LeftPanel>{/*  <PlayersStatusList /> */}</LeftPanel>\r\n            <Field id=\"field\">\r\n              <PlayGrid />\r\n            </Field>\r\n            <RightPanel>\r\n              <StatusList />\r\n              <GameControls>\r\n                <Dice />\r\n                <MoveControls />\r\n              </GameControls>\r\n              {/*  <PlayerStatus /> */}\r\n            </RightPanel>\r\n          </>\r\n        );\r\n    }\r\n  };\r\n\r\n  return <Game>{getGameScreen()}</Game>;\r\n}\r\n\r\nexport const App = () => {\r\n  return (\r\n    <Provider store={store}>\r\n      <GetApp />\r\n    </Provider>\r\n  );\r\n};\r\n","import { useEffect } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\n\r\nimport { State } from \"../types\";\r\n\r\nexport function useOpenCard() {\r\n  const [doEffect] = useSelector((state: State) => [state.doEffect]);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(\r\n    function openCard() {\r\n      switch (doEffect?.type) {\r\n        case \"!checkApperanceInventoryCard\": {\r\n          dispatch({\r\n            type: \"req-checkInventoryCard\",\r\n          });\r\n          break;\r\n        }\r\n\r\n        case \"!openCard\": {\r\n          const timerOpen = setTimeout(\r\n            () =>\r\n              dispatch({\r\n                type: \"req-openCard\",\r\n              }),\r\n            1000\r\n          );\r\n          return () => {\r\n            clearTimeout(timerOpen);\r\n          };\r\n        }\r\n\r\n        case \"!takeCard\": {\r\n          const timerTakeCard = setTimeout(\r\n            () =>\r\n              dispatch({\r\n                type: \"req-takeCard\",\r\n              }),\r\n            500\r\n          );\r\n          return () => {\r\n            clearTimeout(timerTakeCard);\r\n          };\r\n        }\r\n\r\n        case \"!changePlayerHealth\": {\r\n          const timerChangePlayerHealth = setTimeout(\r\n            () =>\r\n              dispatch({\r\n                type: \"req-changePlayerHealth\",\r\n              }),\r\n            500\r\n          );\r\n          return () => {\r\n            clearTimeout(timerChangePlayerHealth);\r\n          };\r\n        }\r\n\r\n        case \"!deleteCard\": {\r\n          const timerDeleteCard = setTimeout(\r\n            () =>\r\n              dispatch({\r\n                type: \"req-deleteCard\",\r\n              }),\r\n            500\r\n          );\r\n          return () => {\r\n            clearTimeout(timerDeleteCard);\r\n          };\r\n        }\r\n\r\n        default: {\r\n          break;\r\n        }\r\n      }\r\n    },\r\n    //eslint-disable-next-line\r\n    [doEffect]\r\n  );\r\n}\r\n","import { useEffect } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\n\r\nimport { State } from \"../types\";\r\n\r\nexport function usePlayerMove() {\r\n  const [doEffect] = useSelector((state: State) => [state.doEffect]);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(\r\n    function playerMove() {\r\n      switch (doEffect?.type) {\r\n        case \"!checkAvailableNeighboringCell\": {\r\n          dispatch({\r\n            type: \"req-checkAvailableNeighboringCell\",\r\n          });\r\n          break;\r\n        }\r\n\r\n        case \"!getPlayerMoveResult\": {\r\n          dispatch({\r\n            type: \"req-getPlayerMoveResult\",\r\n          });\r\n          break;\r\n        }\r\n\r\n        case \"!switchToNextPlayer\": {\r\n          const timerMoveResult = setTimeout(\r\n            () =>\r\n              dispatch({\r\n                type: \"req-switchToNextPlayer\",\r\n              }),\r\n            500\r\n          );\r\n\r\n          return () => {\r\n            clearTimeout(timerMoveResult);\r\n          };\r\n        }\r\n\r\n        default:\r\n          break;\r\n      }\r\n    },\r\n    //eslint-disable-next-line\r\n    [doEffect]\r\n  );\r\n}\r\n","import { useEffect } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\n\r\nimport { State } from \"../types\";\r\n\r\nexport function useEndScreen() {\r\n  const dispatch = useDispatch();\r\n  const gameState = useSelector((state: State) => state.gameState);\r\n\r\n  useEffect(\r\n    function getEndScreen() {\r\n      switch (gameState.type) {\r\n        case \"endGame\":\r\n          const timer = setTimeout(\r\n            () => dispatch({ type: \"req-getEndScreen\" }),\r\n            1000\r\n          );\r\n\r\n          return () => clearTimeout(timer);\r\n\r\n        default:\r\n          break;\r\n      }\r\n    },\r\n    //eslint-disable-next-line\r\n    [gameState.type, dispatch]\r\n  );\r\n}\r\n","import { useEffect } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\n\r\nimport { State } from \"../types\";\r\n\r\nexport function useInteractWithEnemy() {\r\n  const [doEffect] = useSelector((state: State) => [state.doEffect]);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    switch (doEffect?.type) {\r\n      case \"!checkApperanceEnemyCard\": {\r\n        dispatch({\r\n          type: \"req-checkEnemyCard\",\r\n        });\r\n        break;\r\n      }\r\n\r\n      case \"!openEnemyCard\": {\r\n        const timerOpen = setTimeout(\r\n          () =>\r\n            dispatch({\r\n              type: \"req-openEnemyCard\",\r\n            }),\r\n          1000\r\n        );\r\n        return () => {\r\n          clearTimeout(timerOpen);\r\n        };\r\n      }\r\n\r\n      case \"!getBattleResult\": {\r\n        const timerGetResult = setTimeout(\r\n          () => dispatch({ type: \"req-getBattleResult\" }),\r\n          2000\r\n        );\r\n\r\n        return () => {\r\n          clearTimeout(timerGetResult);\r\n        };\r\n      }\r\n\r\n      case \"!removeEnemyCard\": {\r\n        const timerRemoveEnemy = setTimeout(\r\n          () => dispatch({ type: \"req-removeEnemyCard\" }),\r\n          1000\r\n        );\r\n        return () => {\r\n          clearTimeout(timerRemoveEnemy);\r\n        };\r\n      }\r\n      default: {\r\n        break;\r\n      }\r\n    }\r\n    //eslint-disable-next-line\r\n  }, [doEffect]);\r\n}\r\n","import { useEffect } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\n\r\nimport { State } from \"../types\";\r\n\r\nexport function useApplyCard() {\r\n  const [doEffect] = useSelector((state: State) => [state.doEffect]);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(\r\n    function playerMove() {\r\n      switch (doEffect?.type) {\r\n        case \"!checkAvailableNeighboringCards\": {\r\n          dispatch({\r\n            type: \"req-checkAvailableNeighboringCards\",\r\n          });\r\n          break;\r\n        }\r\n\r\n        default:\r\n          break;\r\n      }\r\n    },\r\n    //eslint-disable-next-line\r\n    [doEffect]\r\n  );\r\n}\r\n","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport {App} from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}