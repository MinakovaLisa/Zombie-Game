{"version":3,"sources":["features/MoveControls.tsx","features/Dice.tsx","shared/config/walls.ts","shared/config/index.ts","components/CommonCard/brain_4.png","components/CommonCard/CommonCard.tsx","components/Health/health.png","components/Health/Health.tsx","business/phases/common/getNextPlayerCoord.ts","business/phases/common/getNeighboringCellList.ts","business/phases/common/checkCellHasWall.ts","components/Player/player.png","components/Player/index.tsx","components/Player/canInteractWithCell.ts","components/Enemy/zombie.png","components/Enemy/zombie_defeated.png","components/Enemy/Enemy.tsx","components/Boards/boards.png","components/Boards/BoardsCard.tsx","components/Weapon/weapon.png","components/Weapon/WeaponCard.tsx","features/PlayGrid/getCards.tsx","features/PlayGrid/getPlayersList.tsx","features/PlayGrid/getEnemyList.tsx","assets/door2.png","assets/window2.png","features/PlayGrid/Barrier.tsx","assets/door.png","assets/window.png","features/PlayGrid/getFilledPlayGrid.tsx","features/PlayGrid/index.tsx","features/PlayGrid/house_2.png","components/HealthSlots.tsx","components/Inventory.tsx","features/PlayerStatus.tsx","features/StatusList.tsx","pages/EndScreen.tsx","features/PlayersStatusList.tsx","pages/StartScreen.tsx","business/initialState/getGameField/getFieldCells.ts","business/initialState/getGameField/spreadCards.ts","business/initialState/getGameField/index.ts","business/initialState/getPlayers.ts","business/initialState/getEnemies.ts","business/initialState/index.ts","business/phases/waitingStart/index.ts","business/phases/gameStarted/playerMove/checkCanTakeCell.ts","business/phases/common/getStateCardSelected.ts","business/phases/gameStarted/playerMove/index.ts","business/phases/gameStarted/playerMove/getPlayerMoveResult.ts","business/phases/gameStarted/playerMove/changePlayerCoord.ts","business/phases/gameStarted/takeCard/index.ts","business/phases/gameStarted/takeCard/openCard.ts","business/phases/gameStarted/takeCard/deleteCard.ts","business/phases/gameStarted/trownDice.ts","business/phases/interactWithEnemy/getBattleResult.ts","business/phases/common/deleteSelectedCard.ts","business/phases/interactWithEnemy/trownBattleDice.ts","business/phases/interactWithEnemy/selectCard.ts","business/phases/interactWithEnemy/changeSelectedCard.ts","business/phases/interactWithEnemy/index.ts","business/phases/interactWithEnemy/defeatEnemy.ts","business/phases/interactWithEnemy/removeEnemyCard.ts","business/phases/interactWithEnemy/checkCardApperance.ts","business/phases/interactWithEnemy/openEnemyCard.ts","business/phases/gameStarted/applyCard/changeHealth.ts","business/phases/gameStarted/applyCard/index.ts","business/phases/gameStarted/applyCard/getStateGiveCard.ts","business/phases/gameStarted/applyCard/getStateHealCurrPlayer.ts","business/phases/gameStarted/applyCard/getStateHealAnotherPlayer.ts","business/phases/gameStarted/applyCard/getStateHoleFilled.ts","business/phases/gameStarted/getPlayersOrder.ts","business/phases/endGame/index.ts","business/store.ts","business/reducer.ts","App.tsx","business/effects/useOpenCard.ts","business/effects/usePlayerMove.ts","business/effects/useEndScreen.ts","business/effects/useInteractWithEnemy.ts","reportWebVitals.ts","index.tsx"],"names":["Arrow","styled","div","props","direction","ArrowContainer","MoveControls","dispatch","useDispatch","renderArrow","onClick","type","payload","DiceWrap","DiceButton","button","DiceNumber","Dice","useSelector","state","dice","diceNumber","Math","floor","random","CELLS_BARRIERS_LIST","coord","hor","vert","barrierList","name","isOpen","START_COORD","FINISH_COORD","CARD_APPERANCE","PLAY_GRID_MODE","MOVE_DIRECTION_LIST","StyledCommonCard","css","img","StyledHealthCard","apperance","Health","getNextPlayerCoord","currentCoord","split","currPlayerHor","currPlayerVert","nextPlayerVert","parseInt","nextPlayerHor","prevPlayerVert","prevPlayerHor","getNeighboringCellList","prevPlayerCoord","gameField","map","directionItem","filter","cellItem","values","checkCellHasWall","newPlayerCoord","playerList","numberOfPlayer","currCellCoord","currCell","nextCell","oppositeDirection","getOppositeDirection","currCellHasBarrier","checkCellOnBarrier","nextCellHasBarrier","cell","cellHasWall","find","barrier","cellHasClosedHole","PLayersPortal","Number","coordX","coordY","PlayerCard","isCurrent","needHighlightning","PlayerCardList","needSplitCard","PlayerList","playerListOnCell","getContextMenu","listForInteract","getAvailableCellList","currPlayerCoord","listForHealing","concat","typeOfChosedCard","inventory","cardSelected","length","playerCardList","playerCardItem","index","canInteractWithPlayer","includes","canHealPlayer","id","orderNumber","calculateHighlightning","playerClickedHandler","fieildElem","document","getElementById","ReactDOM","createPortal","gameState","availableCellsCoords","nextPlayerCoord","canInteractWithCell","isCurrentPlayer","console","log","EnemyCard","zombie_defeated","zombie","EnemiesCardList","EnemyList","enemyArray","list","enemyCard","StyledBoardsCard","BoardsCard","StyledWeaponCard","WeaponCard","getCards","healthCardItem","cardItem","boardsCardItem","weaponCardItem","className","getPlayersList","playersList","playersArr","playerKey","push","getEnemyList","enemiesList","enemiesArr","enemiesKey","CommonWall","barrierItem","highlightningList","item","WallImage","closedDoor","closedWindow","Barrier","orderIndex","cellValues","neighboringCellList","needCheckHighlightning","getHighlightningList","getHigtlightningDirection","mode","cellType","currCoord","availableCellList","currCellHasHole","checkCellOnHole","nextCellHasHole","availableCell","cellHasWindow","cellHasDoor","Wrap","CellItem","UnderlayerItem","getFilledPlayGrid","enemyList","orderGameCells","order","availableCells","playerX","playerY","isNeedSepareteCards","cardList","Fragment","GridItem","ContextMenu","x","y","Button","PlayGrid","useState","contextMenuState","updatecontextMenuState","height","playerEl","playerCoord","getBoundingClientRect","useEffect","bodyElement","querySelector","callback","e","target","stopPropagation","prevState","removeEventListener","capture","addEventListener","playerNumber","HealthSlotList","HealthSlot","isFilled","HealthSlots","getHealthSlot","healthSlotFilled","playerHealth","getPlayerHealth","Array","fill","reduce","prev","currSlot","health","InventoryWrap","InwentoryRow","Image","boards","weapon","highlighting","Counter","Inventory","PlayerStatusCard","Status","HealthStatus","InventoryStatus","Column","PlayerStatus","StatusList","status","updateStatus","doEffect","gameResult","newStatus","getTextStatus","GameScore","amount","EndScreen","StartButton","StartScreen","createEmptyFieldCells","cellList","emptyFieldItem","newEmptyGameField","forEach","getOrganizedFieldCells","emptyField","startIndex","finishIndex","getCellsWalls","cellsWithBarrierList","cellBarrier","cellIndex","cellWithoutBarrier","cellsWithBarriers","Object","fromEntries","cardsList","card","setCards","currCardSet","cellListWithCards","cellWithCards","getListForCards","emptyCellsList","entries","AMOUNT_EMPTY_CELLS","amoutCurrentCards","prevkeyList","randomNumber","getRandomNumber","keyItem","arrNumber","maxNumber","number","getGameField","getCellOrder","gameFieldCells","cellsWithAllCards","filled–°ells","gameFieldCellsWithPrevios","cellsForCards","filledWithCardsFieldCells","spreadCards","emptyFieldCells","fieldCellsWithWalls","getFieldCells","width","orderList","getPlayers","startCoord","player","getEnemies","getEmptyList","enemiesCoords","getListOfIndexes","getListOfEnemy","power","initialState","gameFieldWithoutEnemy","getInitialState","waitingStart","action","checkNextCellOccupied","newCoord","some","getStateCardSelected","typeOfSelect","newPlayerList","changeSelectedCard","selectedCard","stateWithSelectedCard","stateWithoutSelectedCard","isTheSameSelectType","newInventoryCardUnSelected","newInventoryCardSelected","playerMove","getAvailableCells","getStatePlayerMoved","getStateClearedAvailableCells","newCellWithPlayer","isLastStepOfMove","takeFinish","takeCard","metEnemyCard","getPlayerMoveResult","typeofCard","changePlayerCoord","metBarrier","isNextCellOcupied","checkCanTakeCell","getStateOpenCard","getStateCardTaken","getStateDeletedCard","playerCoordIndex","cellWithOpenCard","cardItemWithOpenCard","openCard","newGameField","cardItems","emptyInventory","structuredCardItems","prevItem","currentItem","newInventory","newPlayer","cellWithoutCard","deleteCard","trownDice","getStatePlayerCanFight","getStatePlayerRunsAway","getStatePlayetLoseHealth","isPlayerAlive","deleteSelectedCard","indexCurrPlayer","currInventory","removedCardType","trownBattleDice","selectCard","hasAnyCardSelected","interactWithEnemy","currEnemyCoord","currEnemy","defeatedEnemy","newEnemyList","defeatEnemy","removeEnemyCard","isNeedOpenEnemyCard","checkCardApperance","currEnemyCard","openedEnemyCard","openEnemyCard","getBattleResult","changeHealth","indexTarget","applyCard","chosenCardType","recipientPlayerNumber","currentPlayerInventory","recepientPlayerInventory","sharedCardType","newCurrentPlayerInventory","newRecepientPlayerInventory","getStateGiveCard","indexChosenPlayer","newHealth","getStateHealCurrPlayer","getStateHealAnotherPlayer","cellWithChosedHole","barriersWithClosedHole","getStateHoleFilled","getPlayersOrder","numberCurrPlayer","nextPlayersNumber","endGame","store","createStore","phaseOuter","phaseInner","window","__REDUX_DEVTOOLS_EXTENSION__","Field","Game","RightPanel","LeftPanel","GameControls","GetApp","timerOpen","setTimeout","clearTimeout","timerTakeCard","timerChangePlayerHealth","timerDeleteCard","useOpenCard","timerMarkCell","usePlayerMove","timer","useEndScreen","timerGetResult","timerRemoveEnemy","useInteractWithEnemy","getGameScreen","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","render","StrictMode"],"mappings":"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","file":"static/js/main.f47677ed.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\n\r\nimport styled from \"styled-components\";\r\n\r\nimport { MoveDirection } from \"../business/types\";\r\n\r\ntype ArrowProps = {\r\n  direction: MoveDirection;\r\n};\r\n\r\nconst Arrow = styled.div<ArrowProps>`\r\n  text-align: center;\r\n  vertical-align: middle;\r\n  border: 1px solid lightgrey;\r\n  cursor: pointer;\r\n  &:hover {\r\n    color: pink;\r\n  }\r\n\r\n  &:active {\r\n    color: red;\r\n  }\r\n\r\n  transform: ${(props) => {\r\n    switch (props.direction) {\r\n      case \"top\":\r\n        return \"rotate(-90deg)\";\r\n      case \"bottom\":\r\n        return \"rotate(90deg)\";\r\n      case \"left\":\r\n        return \"rotate(-180deg)\";\r\n    }\r\n  }};\r\n\r\n  grid-area: ${(props) => {\r\n    switch (props.direction) {\r\n      case \"top\":\r\n        return \"arrow_top;\";\r\n      case \"bottom\":\r\n        return \"arrow_bottom\";\r\n      case \"left\":\r\n        return \"arrow_left\";\r\n      case \"right\":\r\n        return \"arrow_right\";\r\n    }\r\n  }};\r\n`;\r\n\r\nconst ArrowContainer = styled.div`\r\n  display: grid;\r\n  grid-template-areas:\r\n    \". arrow_top .\"\r\n    \"arrow_left . arrow_right \"\r\n    \". arrow_bottom . \";\r\n  width: 100px;\r\n  height: 100px;\r\n  & > * {\r\n    padding: 6px;\r\n    box-sizing: border-box;\r\n    background-color: white;\r\n  }\r\n`;\r\n\r\nexport const MoveControls = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const renderArrow = (direction: MoveDirection) => {\r\n    return (\r\n      <Arrow\r\n        direction={direction}\r\n        onClick={() => {\r\n          dispatch({ type: \"playerMoved\", payload: direction });\r\n        }}\r\n      >\r\n        &gt;\r\n      </Arrow>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <ArrowContainer>\r\n      {renderArrow(\"top\")}\r\n      {renderArrow(\"right\")}\r\n      {renderArrow(\"left\")}\r\n      {renderArrow(\"bottom\")}\r\n    </ArrowContainer>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nimport styled from \"styled-components\";\r\n\r\nimport { State } from \"../business/types\";\r\n\r\nconst DiceWrap = styled.div`\r\n  border: 1px solid lightgray;\r\n  width: 100px;\r\n  height: 100px;\r\n  display: grid;\r\n  background-color: white;\r\n`;\r\n\r\nconst DiceButton = styled.button`\r\n  margin: 0 auto;\r\n  cursor: pointer;\r\n`;\r\n\r\nconst DiceNumber = styled.div`\r\n  height: 30px;\r\n  margin-top: 20px;\r\n  text-align: center;\r\n`;\r\n\r\nconst maxNumber = 4;\r\n\r\nexport const Dice = () => {\r\n  const dispatch = useDispatch();\r\n  const [diceNumber] = useSelector((state: State) => [state.dice]);\r\n  const getNumber = () => {\r\n    return Math.floor(Math.random() * maxNumber + 1);\r\n  };\r\n\r\n  return (\r\n    <DiceWrap>\r\n      <DiceNumber>{diceNumber}</DiceNumber>\r\n      <DiceButton\r\n        onClick={() => {\r\n          dispatch({\r\n            type: \"diceThrown\",\r\n            payload: getNumber(),\r\n          });\r\n        }}\r\n      >\r\n        –±—Ä–æ—Å–∏—Ç—å –∫—É–±–∏–∫\r\n      </DiceButton>\r\n    </DiceWrap>\r\n  );\r\n};\r\n","import { CellsBarrierListType } from \"../../business/types\";\r\n\r\n// The array is convenient for iterating\r\nexport const CELLS_BARRIERS_LIST: CellsBarrierListType = [\r\n  {\r\n    coord: { hor: 2, vert: 2 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 2, vert: 3 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 2, vert: 4 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 2, vert: 5 },\r\n    barrierList: [\r\n      {\r\n        name: \"window\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 2, vert: 6 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  \r\n  {\r\n    coord: { hor: 2, vert: 7 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 2, vert: 8 },\r\n    barrierList: [\r\n      {\r\n        name: \"window\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 2, vert: 9 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 2, vert: 10 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 3, vert: 10 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 4, vert: 10 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 5, vert: 10 },\r\n    barrierList: [\r\n      {\r\n        name: \"door\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 6, vert: 10 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 7, vert: 10 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 8, vert: 10 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 9, vert: 10 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 10, vert: 10 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 7, vert: 9 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 3, vert: 2 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 4, vert: 2 },\r\n    barrierList: [\r\n      {\r\n        name: \"door\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 5, vert: 2 },\r\n    barrierList: [\r\n      {\r\n        name: \"window\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 6, vert: 2 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 7, vert: 2 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 8, vert: 2 },\r\n    barrierList: [\r\n      {\r\n        name: \"window\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 9, vert: 2 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 10, vert: 2 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 10, vert: 7 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 3, vert: 7 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 4, vert: 9 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 4, vert: 8 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 4, vert: 7 },\r\n    barrierList: [\r\n      {\r\n        name: \"door\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n      {\r\n        name: \"door\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 5, vert: 7 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 6, vert: 7 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 7, vert: 7 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 7, vert: 8 },\r\n    barrierList: [\r\n      {\r\n        name: \"door\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 8, vert: 7 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 9, vert: 7 },\r\n    barrierList: [\r\n      {\r\n        name: \"door\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 7, vert: 6 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 7, vert: 5 },\r\n    barrierList: [\r\n      {\r\n        name: \"door\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 7, vert: 4 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 7, vert: 3 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 11, vert: 9 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 11, vert: 8 },\r\n    barrierList: [\r\n      {\r\n        name: \"window\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 11, vert: 7 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 11, vert: 6 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 11, vert: 5 },\r\n    barrierList: [\r\n      {\r\n        name: \"window\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 11, vert: 4 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 11, vert: 3 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 11, vert: 2 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n\r\n  //it is needed for now for pretty  wall painting\r\n  {\r\n    coord: { hor: 11, vert: 10 },\r\n    barrierList: [\r\n      {\r\n        name: null,\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n];\r\n","import {\r\n  MoveDirectionList,\r\n  CardApperance,\r\n  PlayGridMode,\r\n} from \"../../business/types\";\r\n\r\nexport const START_COORD = { hor: 0, vert: 0 };\r\nexport const FINISH_COORD = { hor: 11, vert: 11 };\r\nexport const INITIAL_PLAYER_HEALTH = 3;\r\nexport const AMOUNT_HEALTH_ITEMS = 30;\r\nexport const AMOUNT_BOARDS_ITEMS = 30;\r\nexport const AMOUNT_WEAPONS_ITEMS = 30;\r\nexport const AMOUNT_PLAYERS = 1;\r\nexport const AMOUNT_ENEMIES = 30;\r\n\r\nexport const CARD_APPERANCE: CardApperance = \"closed\";\r\n\r\nexport const PLAY_GRID_MODE: PlayGridMode = \"image\";\r\n\r\nexport const MAX_HEALTH_AMOUNT = 7;\r\n\r\nexport const MOVE_DIRECTION_LIST: MoveDirectionList = [\r\n  \"top\",\r\n  \"right\",\r\n  \"bottom\",\r\n  \"left\",\r\n];\r\n\r\nexport { CELLS_BARRIERS_LIST } from \"./walls\";\r\n","export default __webpack_public_path__ + \"static/media/brain_4.c48babfd.png\";","import styled, { css } from \"styled-components\";\r\nimport img from \"./brain_4.png\";\r\n\r\nexport const StyledCommonCard = css`\r\n  position: absolute;\r\n  width: 50px;\r\n  height: 50px;\r\n  background-image: url(${img});\r\n  background-size: 44px;\r\n  background-repeat: no-repeat;\r\n  background-position: 3px;\r\n`;\r\n","export default __webpack_public_path__ + \"static/media/health.d3aa03e8.png\";","import styled from \"styled-components\";\r\nimport { StyledCommonCard } from \"../CommonCard/CommonCard\";\r\nimport img from \"./health.png\";\r\n\r\ntype HealthApperanceType = {\r\n  apperance?: \"closed\" | \"open\";\r\n  className?: string;\r\n};\r\n\r\nexport const StyledHealthCard = styled.div<HealthApperanceType>`\r\n  ${StyledCommonCard}\r\n  background-color: ${(props) => {\r\n    if (props.apperance === \"open\") {\r\n      return \"unset\";\r\n    }\r\n  }};\r\n\r\n  background-image: ${(props) => {\r\n    if (props.apperance === \"open\") {\r\n      return `url(${img})`;\r\n    }\r\n  }};\r\n`;\r\n\r\nexport const Health = (props: HealthApperanceType) => {\r\n  return <StyledHealthCard {...props}></StyledHealthCard>;\r\n};\r\n","import { MoveDirection } from \"../../types\";\r\n\r\n/**\r\n * Returns new coordinate of player.\r\n * @param currentCoord A string of current coordinate.\r\n * @param direction  A string of direction.\r\n * @returns A string with new coordinate.\r\n */\r\n\r\nexport const getNextPlayerCoord = (\r\n  currentCoord: string,\r\n  direction: MoveDirection\r\n) => {\r\n  \r\n  const [currPlayerHor, currPlayerVert] = currentCoord.split(\".\");\r\n  const nextPlayerVert = parseInt(currPlayerVert) + 1;\r\n  const nextPlayerHor = parseInt(currPlayerHor) + 1;\r\n  const prevPlayerVert = parseInt(currPlayerVert) - 1;\r\n  const prevPlayerHor = parseInt(currPlayerHor) - 1;\r\n\r\n  switch (direction) {\r\n    case \"top\": {\r\n      return `${currPlayerHor}.${nextPlayerVert}`;\r\n    }\r\n\r\n    case \"bottom\": {\r\n      return `${currPlayerHor}.${prevPlayerVert}`;\r\n    }\r\n\r\n    case \"left\": {\r\n      return `${prevPlayerHor}.${currPlayerVert}`;\r\n    }\r\n\r\n    case \"right\": {\r\n      return `${nextPlayerHor}.${currPlayerVert}`;\r\n    }\r\n\r\n    default:\r\n      return `${currPlayerHor}.${currPlayerVert}`;\r\n  }\r\n};\r\n","import { State, AvailableCellListType, GameField } from \"../../types\";\r\nimport { MOVE_DIRECTION_LIST } from \"../../../shared/config\";\r\nimport { getNextPlayerCoord } from \"./getNextPlayerCoord\";\r\n\r\n/**\r\n * Returns the coordinates of neighboribgCells that lying in the GameField.\r\n */\r\nexport const getNeighboringCellList = (\r\n  prevPlayerCoord: string,\r\n  gameField: GameField\r\n): AvailableCellListType => {\r\n  const coordNeighboringCells: AvailableCellListType = MOVE_DIRECTION_LIST.map(\r\n    (directionItem) => {\r\n      return {\r\n        direction: directionItem,\r\n        coord: getNextPlayerCoord(prevPlayerCoord, directionItem),\r\n      };\r\n    }\r\n  );\r\n\r\n  /**\r\n   * Returns the coordinates that lying in the GameField.\r\n   */\r\n  const existanceInGameFieldCells: AvailableCellListType =\r\n    coordNeighboringCells.filter((cellItem) => {\r\n      const { direction, coord } = cellItem;\r\n      return gameField.values[coord];\r\n    });\r\n  return existanceInGameFieldCells;\r\n};\r\n","import { State, PlayerListType, MoveDirection, CellType } from \"../../types\";\r\n\r\n/**\r\n * Returns true if current or next cell has wall\r\n */\r\nexport const checkCellHasWall = (\r\n  state: State,\r\n  newPlayerCoord: string,\r\n  direction: MoveDirection\r\n) => {\r\n  const { playerList, numberOfPlayer, gameField } = state;\r\n  const currCellCoord = playerList[numberOfPlayer].coord;\r\n  const currCell = gameField.values[currCellCoord];\r\n  const nextCell = gameField.values[newPlayerCoord];\r\n  const oppositeDirection = getOppositeDirection(direction);\r\n  const currCellHasBarrier = checkCellOnBarrier(currCell, direction);\r\n\r\n  const nextCellHasBarrier = checkCellOnBarrier(nextCell, oppositeDirection);\r\n\r\n  if (currCellHasBarrier || nextCellHasBarrier) {\r\n    return true;\r\n  } else {\r\n    return false;\r\n  }\r\n};\r\n\r\nconst checkCellOnBarrier = (cell: CellType, direction: MoveDirection) => {\r\n  if (cell.name === \"commonCell\") {\r\n    //Now in config just left and bottom walls\r\n    if (direction === \"left\" || direction === \"bottom\") {\r\n      const cellHasWall = cell.barrierList?.find(\r\n        (barrier) => barrier.name === \"wall\" && barrier.direction === direction\r\n      )\r\n        ? true\r\n        : false;\r\n      const cellHasClosedHole = cell.barrierList?.find(\r\n        (barrier) => barrier.isOpen === false && barrier.direction === direction\r\n      )\r\n        ? true\r\n        : false;\r\n      const cellHasBarrier = cellHasWall || cellHasClosedHole;\r\n      return cellHasBarrier;\r\n    }\r\n    return false;\r\n  }\r\n};\r\n\r\nconst getOppositeDirection = (direction: MoveDirection): MoveDirection => {\r\n  switch (direction) {\r\n    case \"top\": {\r\n      return \"bottom\";\r\n    }\r\n    case \"bottom\": {\r\n      return \"top\";\r\n    }\r\n    case \"left\": {\r\n      return \"right\";\r\n    }\r\n    case \"right\": {\r\n      return \"left\";\r\n    }\r\n  }\r\n};\r\n","export default __webpack_public_path__ + \"static/media/player.78f136ce.png\";","import ReactDOM from \"react-dom\";\r\n\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport styled from \"styled-components\";\r\n\r\nimport {\r\n  PlayerCardType,\r\n  AvailableCellListType,\r\n  State,\r\n  TypeOfCard,\r\n} from \"../../business/types\";\r\nimport { getNeighboringCellList } from \"../../business/phases/common/getNeighboringCellList\";\r\nimport { canInteractWithCell } from \"./canInteractWithCell\";\r\n\r\nimport img from \"./player.png\";\r\nimport React from \"react\";\r\n\r\ntype PlayerItem = {\r\n  isCurrent: boolean;\r\n  needHighlightning?: boolean;\r\n};\r\n\r\ntype PlayerCardListType = {\r\n  needSplitCard?: boolean;\r\n};\r\n\r\ntype PlayerListItem = {\r\n  playerListOnCell: PlayerCardType[];\r\n  getContextMenu: Function;\r\n};\r\n\r\ntype ContextMenuType = {\r\n  visible: boolean;\r\n};\r\n\r\ntype PLayersPortalType = {\r\n  coordX: string;\r\n  coordY: string;\r\n};\r\n\r\nconst PLayersPortal = styled.div<PLayersPortalType>`\r\n  position: relative;\r\n  display: flex;\r\n  left: ${(props) => {\r\n    return `${Number(props.coordX) * 50}px`;\r\n  }};\r\n\r\n  bottom: ${(props) => {\r\n    return `${Number(props.coordY) * 50 + 50}px`;\r\n  }};\r\n`;\r\n\r\nconst PlayerCard = styled.div<PlayerItem>`\r\n  width: 50px;\r\n  height: 50px;\r\n  margin: 0px;\r\n  text-align: center;\r\n  padding: 2px;\r\n  box-sizing: border-box;\r\n  cursor: default;\r\n  background-repeat: no-repeat;\r\n  background-position: 0px;\r\n  background-image: url(${img});\r\n  background-size: 44px;\r\n  background-position: 3px;\r\n\r\n  z-index: ${(props) => {\r\n    if (props.isCurrent) {\r\n      return \"4\";\r\n    } else {\r\n      return \"3\";\r\n    }\r\n  }};\r\n\r\n  &:before {\r\n    content: \"\";\r\n    position: absolute;\r\n    width: 24px;\r\n    height: 24px;\r\n    border-radius: 1px;\r\n    border: ${(props) => {\r\n      if (props.isCurrent) {\r\n        return \"5px solid #8834b8\";\r\n      }\r\n    }};\r\n    pointer-events: none;\r\n    opacity: 0.5;\r\n    padding: 4px;\r\n    left: 4px;\r\n    top: 4px;\r\n  }\r\n  &:after {\r\n    content: \"\";\r\n    position: absolute;\r\n    width: 36px;\r\n    height: 36px;\r\n    border-radius: 1px;\r\n    border: ${(props) => {\r\n      if (props.needHighlightning) {\r\n        return \"3px solid rgb(55 163 0 / 52%);\";\r\n      }\r\n    }};\r\n    padding: 4px;\r\n    left: 0px;\r\n    top: 0px;\r\n  }\r\n`;\r\n\r\nconst PlayerCardList = styled.div<PlayerCardListType>`\r\n  display: flex;\r\n  flex-wrap: nowrap;\r\n  position: absolute;\r\n  z-index: 3;\r\n  font-size: 12px;\r\n  font-weight: bold;\r\n\r\n  > * {\r\n    position: ${(props) => {\r\n      if (props.needSplitCard) {\r\n        return \"relative !important\";\r\n      }\r\n    }};\r\n\r\n    margin: ${(props) => {\r\n      if (props.needSplitCard) {\r\n        return \"0 -12px\";\r\n      }\r\n    }};\r\n  }\r\n`;\r\n\r\nexport const PlayerList = (props: PlayerListItem) => {\r\n  const dispatch = useDispatch();\r\n  const state = useSelector((state: State) => ({\r\n    ...state,\r\n  }));\r\n  const { playerList, numberOfPlayer } = state;\r\n\r\n  /**\r\n   *  playerListOnCell -is all player in one cell\r\n   */\r\n  const { playerListOnCell, getContextMenu } = props;\r\n\r\n  const listForInteract = getAvailableCellList(state);\r\n  const currPlayerCoord = playerList[numberOfPlayer].coord;\r\n  const listForHealing = listForInteract.concat(currPlayerCoord);\r\n  const currPlayer = playerList[numberOfPlayer];\r\n  const typeOfChosedCard = currPlayer.inventory.cardSelected;\r\n\r\n  const needSplitCard = playerListOnCell.length > 1;\r\n\r\n  /*  const typeOfChosedCard = chosedCard?.name || null; */\r\n\r\n  const playerCardList = (\r\n    <PlayerCardList needSplitCard={needSplitCard}>\r\n      {playerListOnCell.map((playerCardItem, index) => {\r\n        const canInteractWithPlayer = listForInteract.includes(\r\n          playerCardItem.coord\r\n        );\r\n\r\n        const canHealPlayer = listForHealing.includes(playerCardItem.coord);\r\n\r\n        return (\r\n          <PlayerCard\r\n            id={`player${playerCardItem.orderNumber}`}\r\n            key={index}\r\n            isCurrent={numberOfPlayer == playerCardItem.orderNumber}\r\n            needHighlightning={calculateHighlightning(\r\n              canInteractWithPlayer,\r\n              canHealPlayer,\r\n              typeOfChosedCard\r\n            )}\r\n            onClick={() => {\r\n              playerClickedHandler(\r\n                getContextMenu,\r\n                playerCardItem,\r\n                numberOfPlayer,\r\n                canInteractWithPlayer,\r\n                typeOfChosedCard,\r\n                dispatch\r\n              );\r\n            }}\r\n          ></PlayerCard>\r\n        );\r\n      })}\r\n    </PlayerCardList>\r\n  );\r\n\r\n  switch (needSplitCard) {\r\n    case false: {\r\n      return playerCardList;\r\n    }\r\n    case true: {\r\n      const fieildElem = document.getElementById(\"field\");\r\n      switch (fieildElem) {\r\n        case null: {\r\n          return playerCardList;\r\n        }\r\n\r\n        default: {\r\n          const [hor, vert] = playerListOnCell[0].coord.split(\".\");\r\n          const portal = ReactDOM.createPortal(\r\n            <PLayersPortal coordX={hor} coordY={vert}>\r\n              {playerCardList}\r\n            </PLayersPortal>,\r\n            fieildElem\r\n          );\r\n          return portal;\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nconst getAvailableCellList = (state: State) => {\r\n  const { gameState, playerList, numberOfPlayer, gameField } = state;\r\n  const prevPlayerCoord = playerList[numberOfPlayer].coord;\r\n  const neighboringCellList = getNeighboringCellList(\r\n    prevPlayerCoord,\r\n    gameField\r\n  );\r\n  const availableCellList: AvailableCellListType = neighboringCellList.filter(\r\n    (cellItem) => {\r\n      const { direction, coord } = cellItem;\r\n\r\n      return canInteractWithCell(state, coord, direction);\r\n    }\r\n  );\r\n\r\n  const availableCellsCoords = availableCellList.map((cellItem) => {\r\n    const { direction, coord } = cellItem;\r\n    return coord;\r\n  });\r\n\r\n  switch (gameState.type) {\r\n    case \"gameStarted.applyCard\":\r\n      return availableCellsCoords;\r\n\r\n    default:\r\n      return [];\r\n  }\r\n};\r\n\r\nconst playerClickedHandler = (\r\n  getContextMenu: Function,\r\n  playerCardItem: PlayerCardType,\r\n  numberOfPlayer: number,\r\n  canInteractWithPlayer: boolean,\r\n  typeOfChosedCard: TypeOfCard,\r\n  dispatch: Function\r\n) => {\r\n  const isCurrentPlayer = playerCardItem.orderNumber == numberOfPlayer;\r\n  switch (canInteractWithPlayer) {\r\n    case true: {\r\n      switch (typeOfChosedCard) {\r\n        case \"health\": {\r\n          switch (isCurrentPlayer) {\r\n            case true: {\r\n              dispatch({\r\n                type: \"req-healPlayer\",\r\n                payload: playerCardItem.orderNumber,\r\n              });\r\n              break;\r\n            }\r\n\r\n            case false: {\r\n              getContextMenu(playerCardItem.orderNumber);\r\n            }\r\n          }\r\n\r\n          break;\r\n        }\r\n        case \"weapon\":\r\n        case \"boards\": {\r\n          /**\r\n           * For preventing sharing any cards with himself\r\n           */\r\n          switch (isCurrentPlayer) {\r\n            case true: {\r\n              break;\r\n            }\r\n            case false: {\r\n              dispatch({\r\n                type: \"req-shareCard\",\r\n                payload: playerCardItem.orderNumber,\r\n              });\r\n              break;\r\n            }\r\n          }\r\n        }\r\n      }\r\n      break;\r\n    }\r\n    case false: {\r\n      console.log(\"–Ω–µ –º–æ–∂–µ–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å –∏–≥—Ä–æ–∫–æ–º –∏–≥—Ä–æ–∫–∞\");\r\n      break;\r\n    }\r\n    default:\r\n      break;\r\n  }\r\n};\r\n\r\nconst calculateHighlightning = (\r\n  canInteractWithPlayer: boolean,\r\n  canHealPlayer: boolean,\r\n  typeOfChosedCard: TypeOfCard\r\n) => {\r\n  switch (canHealPlayer) {\r\n    case true: {\r\n      switch (typeOfChosedCard) {\r\n        case \"health\": {\r\n          return true;\r\n        }\r\n\r\n        case \"weapon\":\r\n        case \"boards\": {\r\n          switch (canInteractWithPlayer) {\r\n            case true: {\r\n              return true;\r\n            }\r\n            case false: {\r\n              return false;\r\n            }\r\n          }\r\n        }\r\n        default: {\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n    case false: {\r\n      return false;\r\n    }\r\n  }\r\n};\r\n","import {\r\n  State,\r\n  PlayerListType,\r\n  MoveDirection,\r\n  CellType,\r\n} from \"../../business/types\";\r\nimport { checkCellHasWall } from \"../../business/phases/common\";\r\n/** Cheking the cases when can't take the cell. In default we think that can. */\r\nexport const canInteractWithCell = (\r\n  state: State,\r\n  nextPlayerCoord: string,\r\n  direction: MoveDirection\r\n) => {\r\n  const { gameField, playerList, dice } = state;\r\n  const nextCellForPlayer = gameField.values[nextPlayerCoord];\r\n  const nextCellOutOfGameField = nextCellForPlayer ? false : true;\r\n\r\n  switch (nextCellOutOfGameField) {\r\n    case true: {\r\n      return false;\r\n    }\r\n\r\n    case false: {\r\n      const metBarrier = checkCellHasWall(state, nextPlayerCoord, direction);\r\n\r\n      switch (true) {\r\n        case metBarrier: {\r\n          return false;\r\n        }\r\n\r\n        default: {\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n    default: {\r\n      return true;\r\n    }\r\n  }\r\n};\r\n","export default __webpack_public_path__ + \"static/media/zombie.0f20e592.png\";","export default __webpack_public_path__ + \"static/media/zombie_defeated.6e922b33.png\";","import { useDispatch, useSelector } from \"react-redux\";\r\nimport styled from \"styled-components\";\r\n\r\nimport { EnemyCardType, State } from \"../../business/types\";\r\nimport { StyledCommonCard } from \"../CommonCard/CommonCard\";\r\n\r\nimport zombie from \"./zombie.png\";\r\nimport zombie_defeated from \"./zombie_defeated.png\";\r\n\r\ntype EnemyArray = {\r\n  list: EnemyCardType[];\r\n};\r\n\r\nconst EnemyCard = styled.div<EnemyCardType>`\r\n  ${StyledCommonCard}\r\n\r\n  font-size: 47px;\r\n  text-align: start;\r\n  vertical-align: bottom;\r\n  line-height: 0.15;\r\n  text-transform: unset;\r\n  font-family: sans-serif;\r\n  text-indent: -4px;\r\n  cursor: pointer;\r\n  background-color: ${(props) => {\r\n    if (props.apperance === \"open\" || props.apperance === \"defeated\") {\r\n      return \"unset\";\r\n    }\r\n  }};\r\n\r\n  cursor: ${(props) => {\r\n    if (props.apperance === \"closed\") {\r\n      return \"default\";\r\n    } else {\r\n      return \"pointer\";\r\n    }\r\n  }};\r\n\r\n  background-image: ${(props) => {\r\n    switch (props.apperance) {\r\n      case \"defeated\": {\r\n        return `url(${zombie_defeated})`;\r\n      }\r\n      case \"open\": {\r\n        return `url(${zombie})`;\r\n      }\r\n    }\r\n  }};\r\n`;\r\n\r\nconst EnemiesCardList = styled.div`\r\n  display: flex;\r\n  position: absolute;\r\n`;\r\n\r\nexport const EnemyList = (props: EnemyArray) => {\r\n  const dispatch = useDispatch();\r\n  const state = useSelector((state: State) => ({\r\n    ...state,\r\n  }));\r\n  const { numberOfPlayer, playerList } = state;\r\n  const enemyArray = props.list;\r\n\r\n  return (\r\n    <EnemiesCardList>\r\n      {enemyArray.map((enemyCard, index) => {\r\n        return (\r\n          <EnemyCard\r\n            key={index}\r\n            {...enemyCard}\r\n            onClick={() => {\r\n              const canFight =\r\n                playerList[numberOfPlayer].coord === enemyCard.coord;\r\n              if (canFight) {\r\n                dispatch({\r\n                  type: \"req-defeatEnemy\",\r\n                });\r\n              } else {\r\n                return null;\r\n              }\r\n            }}\r\n          >\r\n            {/*  {enemyCard.apperance === \"defeated\" ? \"x\" : null} */}\r\n          </EnemyCard>\r\n        );\r\n      })}\r\n    </EnemiesCardList>\r\n  );\r\n};\r\n","export default __webpack_public_path__ + \"static/media/boards.3824da3f.png\";","import styled from \"styled-components\";\r\nimport { StyledCommonCard } from \"../CommonCard/CommonCard\";\r\nimport img from \"./boards.png\";\r\n\r\ntype BoardsApperanceType = {\r\n  apperance?: \"closed\" | \"open\";\r\n};\r\n\r\nconst StyledBoardsCard = styled.div<BoardsApperanceType>`\r\n  ${StyledCommonCard}\r\n  background-color: ${(props) => {\r\n    if (props.apperance === \"open\") {\r\n      return \"unset\";\r\n    }\r\n  }};\r\n\r\n  background-image: ${(props) => {\r\n    if (props.apperance === \"open\") {\r\n      return `url(${img})`;\r\n    }\r\n  }};\r\n\r\n  border-color: ${(props) => {\r\n    if (props.apperance === \"open\") {\r\n      return \"gray\";\r\n    }\r\n  }};\r\n`;\r\n\r\nexport const BoardsCard = (props: BoardsApperanceType) => {\r\n  return (\r\n    <StyledBoardsCard {...props}>\r\n      {/*  {props.apperance === \"closed\" ? null : \"X\"} */}\r\n    </StyledBoardsCard>\r\n  );\r\n};\r\n","export default __webpack_public_path__ + \"static/media/weapon.b3c5e028.png\";","import styled from \"styled-components\";\r\nimport { StyledCommonCard } from \"../CommonCard/CommonCard\";\r\nimport img from \"./weapon.png\";\r\n\r\ntype WeaponApperanceType = {\r\n  apperance?: \"closed\" | \"open\";\r\n};\r\n\r\nconst StyledWeaponCard = styled.div<WeaponApperanceType>`\r\n  ${StyledCommonCard}\r\n  background-color: ${(props) => {\r\n    if (props.apperance === \"open\") {\r\n      return \"unset\";\r\n    }\r\n  }};\r\n\r\n  border-color: ${(props) => {\r\n    if (props.apperance === \"open\") {\r\n      return \"gray\";\r\n    }\r\n  }};\r\n  background-image: ${(props) => {\r\n    if (props.apperance === \"open\") {\r\n      return `url(${img})`;\r\n    }\r\n  }};\r\n`;\r\n\r\nexport const WeaponCard = (props: WeaponApperanceType) => {\r\n  return (\r\n    <StyledWeaponCard {...props}>\r\n      {/*      {props.apperance === \"closed\" ? null : \"O\"} */}\r\n    </StyledWeaponCard>\r\n  );\r\n};\r\n","import { Health, BoardsCard, WeaponCard } from \"../../components\";\r\nimport { CellType } from \"../../business/types\";\r\nimport styled from \"styled-components\";\r\n\r\nexport const getCards = (cell: CellType, hor: string, vert: string) => {\r\n  const healthCardItem = cell.cardItem.find(\r\n    (cardItem) => cardItem?.name === \"health\"\r\n  );\r\n\r\n  const boardsCardItem = cell.cardItem.find(\r\n    (cardItem) => cardItem?.name === \"boards\"\r\n  );\r\n  const weaponCardItem = cell.cardItem.find(\r\n    (cardItem) => cardItem?.name === \"weapon\"\r\n  );\r\n\r\n  return (\r\n    <>\r\n      {healthCardItem ? (\r\n        <Health\r\n          apperance={healthCardItem.apperance}\r\n          className={\"\"}\r\n          key={`${hor}.${vert}.health`}\r\n        />\r\n      ) : null}\r\n      {boardsCardItem ? (\r\n        <BoardsCard\r\n          apperance={boardsCardItem.apperance}\r\n          key={`${hor}.${vert}.boards`}\r\n        />\r\n      ) : null}\r\n      {weaponCardItem ? (\r\n        <WeaponCard\r\n          apperance={weaponCardItem.apperance}\r\n          key={`${hor}.${vert}.weapon`}\r\n        />\r\n      ) : null}\r\n    </>\r\n  );\r\n};\r\n","import { PlayerList } from \"../../components\";\r\n\r\nimport { PlayerListType, PlayerCardType } from \"../../business/types\";\r\n\r\nexport const getPlayersList = (\r\n  index: string,\r\n  playersList: PlayerListType,\r\n  numberOfPlayer: number,\r\n  getContextMenu: Function,\r\n  hor: string,\r\n  vert: string\r\n) => {\r\n  let playersArr: PlayerCardType[] = [];\r\n\r\n  for (let playerKey in playersList) {\r\n    const playerCard = playersList[playerKey];\r\n    const playerCoord = playerCard.coord;\r\n    if (playerCoord === index) {\r\n      playersArr.push(playersList[playerKey]);\r\n    }\r\n  }\r\n  if (playersArr.length > 0) {\r\n    return (\r\n      (\r\n        <PlayerList\r\n          playerListOnCell={playersArr}\r\n          getContextMenu={getContextMenu}\r\n        />\r\n      ) || null\r\n    );\r\n  } else return null;\r\n};\r\n","import { EnemyList } from \"../../components\";\r\n\r\nimport { EnemyListType, EnemyCardType } from \"../../business/types\";\r\n\r\nexport const getEnemyList = (\r\n  index: string,\r\n  enemiesList: EnemyListType,\r\n  hor: string,\r\n  vert: string\r\n) => {\r\n  let enemiesArr: EnemyCardType[] = [];\r\n  for (let enemiesKey in enemiesList) {\r\n    const enemiesCard = enemiesList[enemiesKey];\r\n    const enemiesCoord = enemiesCard.coord;\r\n    if (enemiesCoord === index) {\r\n      enemiesArr.push(enemiesList[enemiesKey]);\r\n    }\r\n  }\r\n  if (enemiesArr.length > 0) {\r\n    return <EnemyList list={enemiesArr} key={`${hor}.${vert}.enemy`} />;\r\n  } else return null;\r\n};\r\n","export default __webpack_public_path__ + \"static/media/door2.026ae7fc.png\";","export default __webpack_public_path__ + \"static/media/window2.5b58d59d.png\";","import { useDispatch, useSelector } from \"react-redux\";\r\nimport { useEffect, useState } from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\n\r\nimport { getNeighboringCellList } from \"../../business/phases/common/getNeighboringCellList\";\r\n\r\nimport closedDoor from \"../../assets/door2.png\";\r\nimport closedWindow from \"../../assets/window2.png\";\r\nimport door from \"../../assets/door.png\";\r\nimport window from \"../../assets/window.png\";\r\n\r\nimport {\r\n  State,\r\n  MoveDirection,\r\n  BarrierItem,\r\n  AvailableCellListType,\r\n  GameField,\r\n  GameState,\r\n  PlayerListType,\r\n  CellType,\r\n  AvailableCellType,\r\n  PlayGridMode,\r\n} from \"../../business/types\";\r\n\r\nimport { PLAY_GRID_MODE } from \"../../shared/config\";\r\nimport { switchCase } from \"@babel/types\";\r\n\r\ntype WallType = {\r\n  barrierItem?: BarrierItem;\r\n  //TODO: –ø–æ–ø—Ä–∞–≤–∏—Ç—å —Ç–∏–ø?\r\n  highlightningList: (MoveDirection | null)[] | null;\r\n  onClick: Function;\r\n  mode: PlayGridMode;\r\n};\r\n\r\ntype BarrierCoord = {\r\n  orderIndex: string;\r\n};\r\n\r\nconst CommonWall = styled.div<WallType>`\r\n  pointer-events: ${(props) => {\r\n    if (props.barrierItem?.isOpen) {\r\n      const needHighlightning = props.highlightningList?.find((item) => {\r\n        return item === \"bottom\" || \"left\";\r\n      });\r\n      if (needHighlightning) {\r\n        return \"defaulr\";\r\n      } else {\r\n        return \"none\";\r\n      }\r\n    } else {\r\n      return \"none\";\r\n    }\r\n  }};\r\n\r\n  cursor: ${(props) => {\r\n    switch (props.barrierItem?.name) {\r\n      case \"wall\": {\r\n        return \"default\";\r\n      }\r\n      case \"door\": {\r\n        return \"pointer\";\r\n      }\r\n      case \"window\": {\r\n        return \"pointer\";\r\n      }\r\n      default:\r\n        return \"default\";\r\n    }\r\n  }};\r\n\r\n  &:before {\r\n    content: \"\";\r\n    position: absolute;\r\n    width: 50px;\r\n    height: 50px;\r\n    bottom: 0px;\r\n    z-index: 5;\r\n  }\r\n`;\r\n\r\nconst WallImage = styled(CommonWall)<WallType>`\r\n  /*   cursor: default; */\r\n\r\n  transform: ${(props) => {\r\n    switch (props.barrierItem?.direction) {\r\n      case \"left\": {\r\n        return \"rotate(90deg)\";\r\n      }\r\n      default: {\r\n        return \"null\";\r\n      }\r\n    }\r\n  }};\r\n\r\n  &:before {\r\n    bottom: ${(props) => {\r\n      switch (props.barrierItem?.direction) {\r\n        case \"bottom\": {\r\n          return \"-30px\";\r\n        }\r\n        case \"left\": {\r\n          return \"-55px\";\r\n        }\r\n        default: {\r\n          return \"null\";\r\n        }\r\n      }\r\n    }};\r\n\r\n    left: ${(props) => {\r\n      switch (props.barrierItem?.direction) {\r\n        case \"left\": {\r\n          return \"-25px\";\r\n        }\r\n        default: {\r\n          return \"null\";\r\n        }\r\n      }\r\n    }};\r\n\r\n    background-size: 44px;\r\n    background-image: ${(props) => {\r\n      switch (props.barrierItem?.isOpen) {\r\n        case true: {\r\n          switch (props.barrierItem?.name) {\r\n            case \"door\": {\r\n              return `url(${door})`;\r\n            }\r\n            case \"window\": {\r\n              return `url(${window})`;\r\n            }\r\n            default: {\r\n              return \"unset\";\r\n            }\r\n          }\r\n        }\r\n        case false: {\r\n          switch (props.barrierItem?.name) {\r\n            case \"door\": {\r\n              return `url(${closedDoor})`;\r\n            }\r\n            case \"window\": {\r\n              return `url(${closedWindow})`;\r\n            }\r\n            default: {\r\n              return \"unset\";\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }};\r\n  }\r\n  &:after {\r\n    content: \"\";\r\n    z-index: 5;\r\n    position: absolute;\r\n    width: 50px;\r\n    height: 50px;\r\n    z-index: 5;\r\n\r\n    top: ${(props) => {\r\n      if (props.barrierItem?.direction === \"left\") {\r\n        return \"14px\";\r\n      }\r\n    }};\r\n\r\n    width: ${(props) => {\r\n      if (props.barrierItem?.direction === \"left\") {\r\n        return \"50px\";\r\n      }\r\n    }};\r\n\r\n    height: ${(props) => {\r\n      if (\r\n        props.barrierItem?.direction === \"bottom\" ||\r\n        props.barrierItem?.direction === \"left\"\r\n      ) {\r\n        return \"20px\";\r\n      }\r\n    }};\r\n\r\n    bottom: ${(props) => {\r\n      if (props.barrierItem?.direction === \"bottom\") {\r\n        return \"-10px\";\r\n      }\r\n    }};\r\n\r\n    left: ${(props) => {\r\n      if (props.barrierItem?.direction === \"left\") {\r\n        return \"-25px\";\r\n      }\r\n    }};\r\n\r\n    background-color: ${(props) => {\r\n      if (props.barrierItem?.isOpen) {\r\n        const needHighlightning = props.highlightningList?.find((item) => {\r\n          return item === \"bottom\" || \"left\";\r\n        });\r\n        if (needHighlightning) {\r\n          return \"#79fe2f42\";\r\n        } else {\r\n          return \"none\";\r\n        }\r\n      }\r\n    }};\r\n  }\r\n`;\r\n\r\nconst Wall = styled(CommonWall)<WallType>`\r\n  &:before {\r\n    pointer-events: none;\r\n    height: ${(props) => {\r\n      if (props.barrierItem?.direction === \"bottom\") {\r\n        if (props.barrierItem?.isOpen === false) {\r\n          return \"10px\";\r\n        } else {\r\n          switch (props.barrierItem.name) {\r\n            case \"wall\": {\r\n              return \"5px\";\r\n            }\r\n            case \"door\": {\r\n              return \"3px\";\r\n            }\r\n            case \"window\": {\r\n              return \"3px\";\r\n            }\r\n            default:\r\n              return \"0px\";\r\n          }\r\n        }\r\n      } else if (\r\n        props.barrierItem &&\r\n        props.barrierItem.direction === \"left\" &&\r\n        props.barrierItem.name !== null\r\n      ) {\r\n        return \"50px\";\r\n        //it is needed for now for pretty  wall painting\r\n      } else if (props.barrierItem && props.barrierItem.name === null) {\r\n        return \"5px\";\r\n      } else {\r\n        return \"0px\";\r\n      }\r\n    }};\r\n    width: ${(props) => {\r\n      if (props.barrierItem?.direction === \"left\") {\r\n        if (props.barrierItem?.isOpen === false) {\r\n          return \"10px\";\r\n        } else {\r\n          switch (props.barrierItem.name) {\r\n            case \"wall\": {\r\n              return \"5px \";\r\n            }\r\n            case \"door\": {\r\n              return \"3px\";\r\n            }\r\n            case \"window\": {\r\n              return \"3px\";\r\n            }\r\n            default:\r\n              return \"5px\";\r\n          }\r\n        }\r\n      } else {\r\n        return \"none\";\r\n      }\r\n    }};\r\n    background-color: ${(props) => {\r\n      if (props.barrierItem?.isOpen) {\r\n        const needHighlightning = props.highlightningList?.find((item) => {\r\n          return item === \"bottom\" || \"left\";\r\n        });\r\n        switch (props.barrierItem.name) {\r\n          case \"wall\": {\r\n            return \"#f09308;\";\r\n          }\r\n          case \"door\": {\r\n            if (needHighlightning) {\r\n              return \"#78ff2d\";\r\n            } else {\r\n              return \" #584324;\";\r\n            }\r\n          }\r\n          case \"window\": {\r\n            if (needHighlightning) {\r\n              return \"#78ff2d\";\r\n            } else {\r\n              return \" #a3cdd8;\";\r\n            }\r\n          }\r\n          default:\r\n            return \"#f09308\";\r\n        }\r\n      } else if (props.barrierItem?.isOpen === false) {\r\n        return \"#66615d;\";\r\n      } else {\r\n        return \"none\";\r\n      }\r\n    }};\r\n  }\r\n  &:after {\r\n    content: \"\";\r\n    z-index: 5;\r\n    position: absolute;\r\n    width: 50px;\r\n    height: 50px;\r\n    z-index: 5;\r\n\r\n    top: ${(props) => {\r\n      if (props.barrierItem?.direction === \"left\") {\r\n        return \"0\";\r\n      }\r\n    }};\r\n\r\n    height: ${(props) => {\r\n      if (props.barrierItem?.direction === \"bottom\" && props.barrierItem) {\r\n        return \"20px\";\r\n      }\r\n    }};\r\n\r\n    width: ${(props) => {\r\n      if (props.barrierItem?.direction === \"left\") {\r\n        return \"20px\";\r\n      }\r\n    }};\r\n\r\n    bottom: ${(props) => {\r\n      if (props.barrierItem?.direction === \"bottom\") {\r\n        return \"-10px\";\r\n      }\r\n    }};\r\n\r\n    left: ${(props) => {\r\n      if (props.barrierItem?.direction === \"left\") {\r\n        return \"-10px\";\r\n      }\r\n    }};\r\n\r\n    background-color: ${(props) => {\r\n      if (props.barrierItem?.isOpen) {\r\n        const needHighlightning = props.highlightningList?.find((item) => {\r\n          return item === \"bottom\" || \"left\";\r\n        });\r\n        if (needHighlightning) {\r\n          return \"#79fe2f42\";\r\n        } else {\r\n          return \"none\";\r\n        }\r\n      }\r\n    }};\r\n  }\r\n`;\r\n\r\nexport const Barrier = (props: BarrierCoord) => {\r\n  const dispatch = useDispatch();\r\n  const state = useSelector((state: State) => ({\r\n    ...state,\r\n  }));\r\n\r\n  const { gameField, playerList, numberOfPlayer, gameState } = state;\r\n\r\n  const orderIndex = props.orderIndex;\r\n  const cellValues = gameField.values[orderIndex];\r\n  const currPlayerCoord = playerList[numberOfPlayer].coord;\r\n\r\n  const neighboringCellList = getNeighboringCellList(\r\n    currPlayerCoord,\r\n    gameField\r\n  );\r\n\r\n  const neighboringCellListCoord = neighboringCellList.map((cellItem) => {\r\n    const { direction, coord } = cellItem;\r\n    return coord;\r\n  });\r\n\r\n  const checkCellListCoord = neighboringCellListCoord.concat(currPlayerCoord);\r\n\r\n  const needCheckHighlightning = checkCellListCoord.find(\r\n    (coord) => orderIndex === coord\r\n  );\r\n\r\n  const highlightningList = getHighlightningList(\r\n    neighboringCellList,\r\n    gameField,\r\n    currPlayerCoord,\r\n    gameState,\r\n    playerList,\r\n    numberOfPlayer\r\n  );\r\n\r\n  switch (cellValues.name) {\r\n    case \"commonCell\": {\r\n      const barrierList = cellValues.barrierList?.map((barrier) => {\r\n        switch (PLAY_GRID_MODE) {\r\n          case \"cssStyle\": {\r\n            return (\r\n              <Wall\r\n                key={barrier.direction}\r\n                barrierItem={barrier}\r\n                highlightningList={\r\n                  needCheckHighlightning\r\n                    ? getHigtlightningDirection(\r\n                        highlightningList,\r\n                        orderIndex,\r\n                        barrier.direction\r\n                      )\r\n                    : null\r\n                }\r\n                mode={PLAY_GRID_MODE}\r\n                onClick={() => {\r\n                  const canCloseHole = highlightningList.find((cellType) => {\r\n                    return (\r\n                      cellType?.coord === orderIndex &&\r\n                      cellType?.direction === barrier.direction &&\r\n                      barrier.isOpen === true\r\n                    );\r\n                  })\r\n                    ? true\r\n                    : false;\r\n                  if (canCloseHole) {\r\n                    dispatch({\r\n                      type: \"req-fillHole\",\r\n                      payload: {\r\n                        coord: orderIndex,\r\n                        direction: barrier.direction,\r\n                      },\r\n                    });\r\n                  } else {\r\n                    return null;\r\n                  }\r\n                }}\r\n              >\r\n                {\" \"}\r\n              </Wall>\r\n            );\r\n          }\r\n          case \"image\": {\r\n            return (\r\n              <WallImage\r\n                key={barrier.direction}\r\n                barrierItem={barrier}\r\n                highlightningList={\r\n                  needCheckHighlightning\r\n                    ? getHigtlightningDirection(\r\n                        highlightningList,\r\n                        orderIndex,\r\n                        barrier.direction\r\n                      )\r\n                    : null\r\n                }\r\n                mode={PLAY_GRID_MODE}\r\n                onClick={() => {\r\n                  const canCloseHole = highlightningList.find((cellType) => {\r\n                    return (\r\n                      cellType?.coord === orderIndex &&\r\n                      cellType?.direction === barrier.direction &&\r\n                      barrier.isOpen === true\r\n                    );\r\n                  })\r\n                    ? true\r\n                    : false;\r\n                  if (canCloseHole) {\r\n                    dispatch({\r\n                      type: \"req-fillHole\",\r\n                      payload: {\r\n                        coord: orderIndex,\r\n                        direction: barrier.direction,\r\n                      },\r\n                    });\r\n                  } else {\r\n                    return null;\r\n                  }\r\n                }}\r\n              >\r\n                {\" \"}\r\n              </WallImage>\r\n            );\r\n          }\r\n        }\r\n      });\r\n      return <>{barrierList}</>;\r\n    }\r\n    default: {\r\n      return null;\r\n    }\r\n  }\r\n};\r\n\r\nconst getHigtlightningDirection = (\r\n  highlightningList: (AvailableCellType | null)[],\r\n  orderIndex: string,\r\n  direction: MoveDirection\r\n) => {\r\n  const currList = highlightningList.filter((cellItem) => {\r\n    return cellItem?.coord === orderIndex && cellItem?.direction === direction;\r\n  });\r\n\r\n  const structuredList = currList.map((cellItem) => {\r\n    if (cellItem) {\r\n      const { direction, coord } = cellItem;\r\n      return direction;\r\n    } else {\r\n      return null;\r\n    }\r\n  });\r\n\r\n  return structuredList;\r\n};\r\n\r\n/**\r\n * Check the neifhboring of that coord.\r\n * Have they door or window\r\n */\r\nconst getHighlightningList = (\r\n  neighboringCellList: AvailableCellListType,\r\n  gameField: GameField,\r\n  currCoord: string,\r\n  gameState: GameState,\r\n  playerList: PlayerListType,\r\n  numberOfPlayer: number\r\n) => {\r\n  const currCell = gameField.values[currCoord];\r\n\r\n  const availableCellList = neighboringCellList\r\n    .map((cellItem) => {\r\n      const { direction, coord } = cellItem;\r\n      const currCellHasHole = checkCellOnHole(currCell, direction);\r\n      const nextCell = gameField.values[coord];\r\n      const oppositeDirection = getOppositeDirection(direction);\r\n      const nextCellHasHole = checkCellOnHole(nextCell, oppositeDirection);\r\n      if (currCellHasHole) {\r\n        const cellItemWithHole: AvailableCellType = {\r\n          direction,\r\n          coord: currCoord,\r\n        };\r\n\r\n        return cellItemWithHole;\r\n      } else if (nextCellHasHole) {\r\n        const cellItemWithHole: AvailableCellType = {\r\n          direction: oppositeDirection,\r\n          coord,\r\n        };\r\n        return cellItemWithHole;\r\n      } else {\r\n        return null;\r\n      }\r\n    })\r\n    .filter((availableCell) => availableCell !== null);\r\n\r\n  switch (gameState.type) {\r\n    case \"gameStarted.applyCard\":\r\n      const cardItemList = playerList[numberOfPlayer].inventory;\r\n      const typeOfSelectedCard = cardItemList.cardSelected;\r\n      /*  const typeOfSelectedCard = selectedCard?.name; */\r\n      if (typeOfSelectedCard === \"boards\") {\r\n        return availableCellList;\r\n      } else {\r\n        return [];\r\n      }\r\n\r\n    default:\r\n      return [];\r\n  }\r\n};\r\n\r\nconst checkCellOnHole = (cell: CellType, direction: MoveDirection) => {\r\n  if (cell.name === \"commonCell\") {\r\n    if (direction === \"left\" || direction === \"bottom\") {\r\n      const cellHasWindow = cell.barrierList?.find(\r\n        (barrier) => barrier.name === \"window\"\r\n      )\r\n        ? true\r\n        : false;\r\n      const cellHasDoor = cell.barrierList?.find(\r\n        (barrier) => barrier.name === \"door\"\r\n      )\r\n        ? true\r\n        : false;\r\n      const cellHasHole = cellHasWindow || cellHasDoor;\r\n      return cellHasHole;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n  return false;\r\n};\r\n\r\nconst getOppositeDirection = (direction: MoveDirection): MoveDirection => {\r\n  switch (direction) {\r\n    case \"top\": {\r\n      return \"bottom\";\r\n    }\r\n    case \"bottom\": {\r\n      return \"top\";\r\n    }\r\n    case \"left\": {\r\n      return \"right\";\r\n    }\r\n    case \"right\": {\r\n      return \"left\";\r\n    }\r\n  }\r\n};\r\n","export default \"data:image/png;base64,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RBkBABBlBABAlBEAAFFGAABEGQEAEGUEAECUEQAAUUYAAEQZAQAQZQQAQJQRAABRRgAARBkBABBlBABAlBEAAFFGAABEGQEAEGUEAECUEQAAUUYAAEQZAQAQZQQAQJQRAABRRgAARBkBABBlBABAlBEAAFFGAABEGQEAEGUEAECUEQAAUUYAAEQZAQAQZQQAQJQRAABRRgAARBkBABBlBABAlBEAAFFGAABEGQEAEGUEAECUEQAAUUYAAEQZAQAQZQQAQJQRAABRRgAARBkBABBlBABAlBEAAFFGAABEGQEAEGUEAECUEQAAUUYAAEQZAQAQZQQAQJQRAABRRgAARBkBABBlBABAlBEAAFFGAABEGQEAEGUEAECUEQAAUUYAAEQZAQAQZQQAQJQRAABRRgAARBkBABBlBABAlBEAAFFGAABEGQEAEGUEAECUEQAAUUYAAEQZAQAQZQQAQJQRAABRRgAARBkBABBlBABAlBEAAFFGAABEGQEAEGUEAECUEQAAUUYAAEQZAQAQZQQAQJQRAABRRgAARBkBABBlBABAlBEAAFFGAABEGQEAEGUEAECUEQAAUUYAAEQZAQAQZQQAQJQRAABRRgAARBkBABBlBABAlBEAAFFGAABEGQEAEGUEAECUEQAAUUYAAEQZAQAQZQQAQJQRAABRRgAARBkBABBlBABAlBEAAEXb/gfqHj58J38MQgAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,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AABRRgAARBkBABBlBABAlBEAAFFGAABEGQEAEGUEAECUEQAAUUYAAEQZAQAQZQQAQJQRAABRRgAARBkBABBlBABAlBEAAFFGAABEGQEAEGUEAECUEQAAUUYAAEQZAQAQZQQAQJQRAABRRgAARBkBABBlBABAlBEAAFFGAABEGQEAEGUEAECUEQAAUUYAAEQZAQAQZQQAQJQRAABRRgAARBkBABBlBABAlBEAAFFGAABEGQEAEGUEAECUEQAAUUYAAEQZAQAQZQQAQJQRAABRRgAARBkBABBlBABAlBEAAFFGAABEGQEAEGUEAECUEQAAUUYAAEQZAQAQZQQAQJQRAABRRgAARBkBABBlBABAlBEAAFFGAABEGQEAEGUEAECUEQAAUUYAAEQZAQAQZQQAQJQRAABRRgAARBkBABBlBABAlBEAAFFGAABEGQEAEGUEAECUEQAAUUYAAEQZAQAQZQQAQJQRAABRRgAARBkBABBlBABAlBEAAFFGAABEGQEAEGUEAECUEQAAUUYAAEQZAQAQZQQAQJQRAABRRgAARBkBABBlBABAlBEAAFFGAABEGQEAEGUEAECUEQAAUUYAAEQZAQAQZQQAQJQRAABRRgAARBkBABBlBABAlBEAAFFGAABEGQEAEGUEAECUEQAAUUYAAEQZAQAQZQQAQJQRAABRRgAARBkBABBlBABA0bb/AQYXRF3lFXNFAAAAAElFTkSuQmCC\"","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport styled from \"styled-components\";\r\n\r\nimport { State, PlayGridMode } from \"../../business/types\";\r\nimport { getCards } from \"./getCards\";\r\nimport { getPlayersList } from \"./getPlayersList\";\r\nimport { getEnemyList } from \"./getEnemyList\";\r\nimport { Barrier } from \"./Barrier\";\r\n\r\nimport { PLAY_GRID_MODE } from \"../../shared/config\";\r\n\r\ntype CellApperance = {\r\n  needHighlightning?: boolean;\r\n  mode: PlayGridMode;\r\n};\r\n\r\ntype UnderlayerType = {\r\n  coordX: string;\r\n  coordY: string;\r\n};\r\n\r\nconst Wrap = styled.div`\r\n  position: relative;\r\n`;\r\n\r\nconst CellItem = styled.div<CellApperance>`\r\n  display: flex;\r\n  position: relative;\r\n  box-sizing: border-box;\r\n\r\n  font-size: 14px;\r\n  text-align: right;\r\n  width: 50px;\r\n  height: 50px;\r\n  color: lightgrey;\r\n\r\n  border: ${(props) => {\r\n    if (props.mode === \"cssStyle\") {\r\n      return \"1px solid lightgray\";\r\n    }\r\n  }};\r\n\r\n  background-color: ${(props) => {\r\n    if (props.needHighlightning) {\r\n      return \"rgb(55 163 0 / 52%);\";\r\n    }\r\n  }};\r\n`;\r\n\r\nconst UnderlayerItem = styled.div<UnderlayerType>`\r\n  position: relative;\r\n  display: flex;\r\n  width: 134px;\r\n  height: 100px;\r\n  background-color: rgb(47 84 96 / 77%);\r\n  left: -30px;\r\n  bottom: 120px;\r\n  flex-direction: row;\r\n  justify-content: center;\r\n  border-radius: 10px;\r\n  box-shadow: 0px 0px 12px 1px rgb(62 76 81 / 98%);\r\n\r\n  left: ${(props) => {\r\n    return `${Number(props.coordX) * 50 - 30}px`;\r\n  }};\r\n\r\n  bottom: ${(props) => {\r\n    return `${Number(props.coordY) * 50 + 70}px`;\r\n  }};\r\n\r\n  & > * {\r\n    position: relative !important;\r\n    margin: 30px 0;\r\n    width: 50px;\r\n    height: 50px;\r\n    z-index: 3;\r\n  }\r\n\r\n  flex-direction: row;\r\n  align-items: center;\r\n`;\r\n\r\nexport const getFilledPlayGrid = (state: State, getContextMenu: Function) => {\r\n  const { gameField, playerList, numberOfPlayer, gameState, enemyList } = state;\r\n  const orderGameCells = gameField.order;\r\n\r\n  const currPlayerCoord = playerList[numberOfPlayer].coord;\r\n\r\n  const availableCells = state.availableCellsCoords?.concat(currPlayerCoord);\r\n\r\n  const fullPlayerGrid = orderGameCells.map((orderIndex: string) => {\r\n    const cellValues = gameField.values[orderIndex];\r\n    const [hor, vert] = orderIndex.split(\".\");\r\n\r\n    const needHighlightning = availableCells?.includes(orderIndex);\r\n\r\n    const [playerX, playerY] = currPlayerCoord.split(\".\");\r\n\r\n    const isPhaseCardsSeparate =\r\n      gameState.type.includes(\"interactWithEnemy\") ||\r\n      gameState.type === \"gameStarted.takeCard\";\r\n\r\n    //For creating portal\r\n    const isNeedSepareteCards =\r\n      isPhaseCardsSeparate && playerX === hor && playerY === vert;\r\n\r\n    const cardList = (\r\n      <>\r\n        {getPlayersList(\r\n          orderIndex,\r\n          playerList,\r\n          numberOfPlayer,\r\n          getContextMenu,\r\n          hor,\r\n          vert\r\n        )}\r\n\r\n        {getCards(cellValues, hor, vert)}\r\n\r\n        {cellValues.name === \"commonCell\"\r\n          ? getEnemyList(orderIndex, enemyList, hor, vert)\r\n          : null}\r\n      </>\r\n    );\r\n\r\n    switch (isNeedSepareteCards) {\r\n      case true: {\r\n        const fieildElem = document.getElementById(\"field\");\r\n        switch (fieildElem) {\r\n          case null: {\r\n            return null;\r\n          }\r\n          default: {\r\n            return (\r\n              <React.Fragment key={`${hor}.${vert}`}>\r\n                <Wrap key={`${hor}.${vert}`}>\r\n                  <CellItem\r\n                    needHighlightning={needHighlightning}\r\n                    mode={PLAY_GRID_MODE}\r\n                  >\r\n                    {PLAY_GRID_MODE === \"cssStyle\" ? `${hor}.${vert}` : null}\r\n                  </CellItem>\r\n                  {cellValues.name === \"commonCell\" ? (\r\n                    <Barrier orderIndex={orderIndex}></Barrier>\r\n                  ) : null}\r\n                </Wrap>\r\n\r\n                {ReactDOM.createPortal(\r\n                  <>\r\n                    <UnderlayerItem coordX={hor} coordY={vert}>\r\n                      {cardList}\r\n                    </UnderlayerItem>\r\n                  </>,\r\n                  fieildElem\r\n                )}\r\n              </React.Fragment>\r\n            );\r\n          }\r\n        }\r\n        return null;\r\n      }\r\n      case false: {\r\n        return (\r\n          <Wrap key={`${hor}.${vert}`}>\r\n            <CellItem\r\n              needHighlightning={needHighlightning}\r\n              mode={PLAY_GRID_MODE}\r\n            >\r\n              {cardList}\r\n\r\n              {PLAY_GRID_MODE === \"cssStyle\" ? `${hor}.${vert}` : null}\r\n            </CellItem>\r\n            {cellValues.name === \"commonCell\" ? (\r\n              <Barrier orderIndex={orderIndex}></Barrier>\r\n            ) : null}\r\n          </Wrap>\r\n        );\r\n      }\r\n    }\r\n  });\r\n\r\n  return fullPlayerGrid;\r\n};\r\n","import { useDispatch, useSelector } from \"react-redux\";\r\nimport { useEffect, useState } from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nimport { FINISH_COORD } from \"../../shared/config\";\r\nimport { State, PlayGridMode } from \"../../business/types\";\r\nimport { getFilledPlayGrid } from \"./getFilledPlayGrid\";\r\nimport { PLAY_GRID_MODE } from \"../../shared/config\";\r\n\r\nimport img from \"./house_2.png\";\r\n\r\ntype GridProps = {\r\n  vert: number;\r\n  mode: PlayGridMode;\r\n};\r\n\r\ntype ContextMenuType = {\r\n  type: \"visible\" | \"hidden\";\r\n  coord?: { x?: number; y?: number };\r\n};\r\n\r\ntype WrapType = {};\r\n\r\nconst GridItem = styled.div<GridProps>`\r\n  outline: ${(props) => {\r\n    if (props.mode === \"cssStyle\") {\r\n      return \"2px solid lightgray\";\r\n    }\r\n  }};\r\n\r\n  margin: 0 auto;\r\n  width: 100%;\r\n  transform: rotate(270deg);\r\n  display: grid;\r\n  grid-column-start: -1;\r\n  //–ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∏—Ä—É—é –ø–æ —à–∏—Ä–∏–Ω–µ –ø–æ–ª—è\r\n  grid-template-columns: ${(props) => {\r\n    return `repeat(${props.vert} ,50px)`;\r\n  }};\r\n\r\n  grid-gap: 0px;\r\n  > * {\r\n    transform: rotate(90deg);\r\n  }\r\n\r\n  background-image: ${(props) => {\r\n    if (props.mode === \"image\") {\r\n      return `url(${img})`;\r\n    }\r\n  }};\r\n\r\n  background-color: white;\r\n  background-size: 600px;\r\n  box-shadow: 0 0 10px rgb(0 0 0 / 50%);\r\n`;\r\n\r\nconst ContextMenu = styled.div<ContextMenuType>`\r\n  display: ${(props) => {\r\n    if (props.type === \"visible\") {\r\n      return \"block\";\r\n    } else {\r\n      return \"none\";\r\n    }\r\n  }};\r\n\r\n  flex-direction: column;\r\n  position: absolute;\r\n  width: 100px;\r\n  height: 100px;\r\n  background-color: #ffffff;\r\n  box-shadow: 0 0 10px rgb(0 0 0 / 50%);\r\n  justify-content: start;\r\n  padding: 21px 0 0 12px;\r\n  box-sizing: border-box;\r\n  left: ${(props) => {\r\n    if (props.coord?.x) {\r\n      return `${props.coord?.x + 50}px`;\r\n    } else {\r\n      return \"0px\";\r\n    }\r\n  }};\r\n  top: ${(props) => {\r\n    return `${props.coord?.y}px`;\r\n  }};\r\n`;\r\n\r\nconst Button = styled.button`\r\n  height: 30px;\r\n  width: 70px;\r\n`;\r\n\r\nexport const PlayGrid = () => {\r\n  const dispatch = useDispatch();\r\n  const state = useSelector((state: State) => ({\r\n    ...state,\r\n  }));\r\n\r\n  type contextMenuType = {\r\n    type: \"visible\" | \"hidden\";\r\n    playerNumber?: Number;\r\n    coord?: { x?: number; y?: number };\r\n  };\r\n\r\n  const initialContextMenuState: contextMenuType = { type: \"hidden\" };\r\n\r\n  const [contextMenuState, updatecontextMenuState] = useState(\r\n    initialContextMenuState\r\n  );\r\n\r\n  const { gameField, playerList, enemyList, numberOfPlayer } = state;\r\n\r\n  const { vert: maxVert } = FINISH_COORD;\r\n  const height = maxVert + 1;\r\n  const playerEl = document.getElementById(`player${numberOfPlayer}`);\r\n  const playerCoord = {\r\n    x: playerEl?.getBoundingClientRect().x,\r\n    y: playerEl?.getBoundingClientRect().y,\r\n  };\r\n\r\n  const getContextMenu = (numberOfPlayer: number) => {\r\n    updatecontextMenuState({\r\n      type: \"visible\",\r\n      playerNumber: numberOfPlayer,\r\n      coord: playerCoord,\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    switch (contextMenuState.type) {\r\n      case \"visible\": {\r\n        const bodyElement = document.querySelector(\"body\");\r\n\r\n        const callback = (e: MouseEvent) => {\r\n          /**\r\n           * Its for avoiding event on currentPlayer\r\n           */\r\n          if (\r\n            e.target ===\r\n            document.getElementById(`player${state.numberOfPlayer}`)\r\n          ) {\r\n            e.stopPropagation();\r\n          }\r\n\r\n          updatecontextMenuState((prevState) => {\r\n            return { ...prevState, type: \"hidden\" };\r\n          });\r\n\r\n          bodyElement?.removeEventListener(\"click\", callback, {\r\n            capture: true,\r\n          });\r\n        };\r\n\r\n        bodyElement?.addEventListener(\"click\", callback, {\r\n          capture: true,\r\n        });\r\n\r\n        return () => {\r\n          bodyElement?.removeEventListener(\"click\", callback, {\r\n            capture: true,\r\n          });\r\n        };\r\n      }\r\n\r\n      default:\r\n        break;\r\n    }\r\n  }, [contextMenuState.type]);\r\n\r\n  return (\r\n    <>\r\n      <GridItem\r\n        key={\"grid\"}\r\n        vert={height}\r\n        /*  type={contextMenuState.type} */\r\n        mode={PLAY_GRID_MODE}\r\n      >\r\n        {getFilledPlayGrid(state, getContextMenu)}\r\n      </GridItem>\r\n\r\n      <ContextMenu\r\n        type={contextMenuState.type}\r\n        id={\"contextMenu\"}\r\n        className={\"contextMenu\"}\r\n        coord={contextMenuState.coord}\r\n      >\r\n        <Button\r\n          className={\"contextMenu\"}\r\n          onClick={() => {\r\n            dispatch({\r\n              type: \"req-shareCard\",\r\n              payload: contextMenuState.playerNumber,\r\n            });\r\n          }}\r\n        >\r\n          –ø–µ—Ä–µ–¥–∞—Ç—å\r\n        </Button>\r\n        <Button\r\n          onClick={() => {\r\n            dispatch({\r\n              type: \"req-healPlayer\",\r\n              payload: contextMenuState.playerNumber,\r\n            });\r\n          }}\r\n        >\r\n          –ª–µ—á–∏—Ç—å\r\n        </Button>\r\n      </ContextMenu>\r\n    </>\r\n  );\r\n};\r\n","export default \"data:image/png;base64,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\"","import { useSelector } from \"react-redux\";\r\n\r\nimport styled from \"styled-components\";\r\n\r\nimport { State, PlayerListType } from \"../business/types\";\r\n\r\nimport { AMOUNT_PLAYERS, MAX_HEALTH_AMOUNT } from \"../shared/config\";\r\n\r\ntype HealthSlotType = {\r\n  isFilled: boolean;\r\n};\r\n\r\nconst HealthSlotList = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\nconst HealthSlot = styled.div<HealthSlotType>`\r\n  width: 5px;\r\n  height: 5px;\r\n  border-radius: 50%;\r\n  border: 1px solid #f09292;\r\n  margin: 1px;\r\n  background-color: ${(props) => {\r\n    if (props.isFilled) {\r\n      return \"#f09292\";\r\n    } else return \"none\";\r\n  }};\r\n`;\r\n\r\nexport const HealthSlots = (props: { index: number }) => {\r\n  const { playerList } = useSelector((state: State) => ({\r\n    ...state,\r\n  }));\r\n\r\n  return (\r\n    <HealthSlotList>\r\n      {getHealthSlot(playerList, props.index).map(\r\n        (healthSlotFilled: boolean, index: number) => {\r\n          return (\r\n            <HealthSlot key={index} isFilled={healthSlotFilled}></HealthSlot>\r\n          );\r\n        }\r\n      )}\r\n    </HealthSlotList>\r\n  );\r\n};\r\n\r\nconst getHealthSlot = (playerList: PlayerListType, index: number) => {\r\n  const playerHealth = getPlayerHealth(playerList, index);\r\n  const maxHealthSlotList = new Array(MAX_HEALTH_AMOUNT).fill(0);\r\n\r\n  const filledHealthSlotList = maxHealthSlotList.reduce(\r\n    (prev, currSlot, index) => {\r\n      if (index < playerHealth) {\r\n        return [...prev, true];\r\n      } else {\r\n        return [...prev, false];\r\n      }\r\n    },\r\n    []\r\n  );\r\n  return filledHealthSlotList;\r\n};\r\n\r\nconst getPlayerHealth = (\r\n  playersList: PlayerListType,\r\n  numberOfPlayer: number\r\n) => {\r\n  return playersList[numberOfPlayer].health;\r\n};\r\n","import { useDispatch, useSelector } from \"react-redux\";\r\n\r\nimport styled from \"styled-components\";\r\n\r\nimport { State, CardItem, InventoryType, TypeOfCard } from \"../business/types\";\r\nimport { Health } from \"./Health/Health\";\r\nimport { BoardsCard } from \"./Boards/BoardsCard\";\r\nimport { WeaponCard } from \"./Weapon/WeaponCard\";\r\n\r\nimport health from \"../components/Health/health.png\";\r\nimport boards from \"../components/Boards/boards.png\";\r\nimport weapon from \"../components/Weapon/weapon.png\";\r\n\r\ntype SlotType = {\r\n  /*   onClick: Function; */\r\n  highlighting?: boolean;\r\n};\r\n\r\ntype ImageType = {\r\n  type: TypeOfCard;\r\n  highlighting?: boolean;\r\n};\r\n\r\nconst InventoryWrap = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  flex-wrap: wrap;\r\n  align-content: flex-start;\r\n`;\r\n\r\nconst InwentoryRow = styled.div`\r\n  display: flex;\r\n  width: 100%;\r\n  flex-wrap: nowrap;\r\n  align-items: center;\r\n`;\r\n\r\n//Todo: can replace switch to calculated props?\r\nconst Image = styled.div<ImageType>`\r\n  width: 50px;\r\n  height: 50px;\r\n  background-size: 44px;\r\n  background-repeat: no-repeat;\r\n  background-position: 3px;\r\n  background-image: ${(props) => {\r\n    switch (props.type) {\r\n      case \"health\": {\r\n        return `url(${health})`;\r\n      }\r\n\r\n      case \"boards\": {\r\n        return `url(${boards})`;\r\n      }\r\n\r\n      case \"weapon\": {\r\n        return `url(${weapon})`;\r\n      }\r\n    }\r\n  }};\r\n  outline: ${(props) => {\r\n    if (props.highlighting === true) {\r\n      return \"1px solid red \";\r\n    }\r\n  }};\r\n`;\r\n\r\nconst Counter = styled.div`\r\n  margin-left: 10px;\r\n  font-size: 22px;\r\n`;\r\n\r\nconst Slot = styled.div<SlotType>`\r\n  display: flex;\r\n  cursor: pointer;\r\n\r\n  & > * {\r\n    margin: 2px;\r\n    position: relative;\r\n  }\r\n\r\n  outline: ${(props) => {\r\n    if (props.highlighting === true) {\r\n      return \"1px solid red \";\r\n    }\r\n  }};\r\n`;\r\n\r\nexport const Inventory = (props: { index: number }) => {\r\n  const dispatch = useDispatch();\r\n  const { playerList, gameState } = useSelector((state: State) => ({\r\n    ...state,\r\n  }));\r\n\r\n  const inventory: InventoryType = playerList[props.index].inventory;\r\n\r\n  return (\r\n    <InventoryWrap>\r\n      <InwentoryRow>\r\n        <Image\r\n          type=\"health\"\r\n          highlighting={inventory.cardSelected === \"health\"}\r\n          onClick={() => {\r\n            dispatch({\r\n              type: \"cardChoosed\",\r\n              payload: { type: \"health\" },\r\n            });\r\n          }}\r\n        ></Image>\r\n        <Counter> x {inventory[\"health\"] || 0}</Counter>\r\n      </InwentoryRow>\r\n      <InwentoryRow>\r\n        <Image\r\n          type=\"boards\"\r\n          highlighting={inventory.cardSelected === \"boards\"}\r\n          onClick={() => {\r\n            dispatch({\r\n              type: \"cardChoosed\",\r\n              payload: { type: \"boards\" },\r\n            });\r\n          }}\r\n        ></Image>\r\n        <Counter> x {inventory[\"boards\"] || 0}</Counter>\r\n      </InwentoryRow>\r\n      <InwentoryRow>\r\n        <Image\r\n          type=\"weapon\"\r\n          highlighting={inventory.cardSelected === \"weapon\"}\r\n          onClick={() => {\r\n            dispatch({\r\n              type: \"cardChoosed\",\r\n              payload: { type: \"weapon\" },\r\n            });\r\n          }}\r\n        ></Image>\r\n        <Counter> x {inventory[\"weapon\"] || 0}</Counter>\r\n      </InwentoryRow>\r\n\r\n      <InwentoryRow></InwentoryRow>\r\n      <InwentoryRow></InwentoryRow>\r\n    </InventoryWrap>\r\n  );\r\n};\r\n\r\n{\r\n}\r\n\r\nconst getChildrenComponent = (inventoryCard: CardItem) => {\r\n  switch (inventoryCard?.name) {\r\n    case \"health\": {\r\n      return <Health apperance={inventoryCard.apperance} />;\r\n    }\r\n    case \"boards\": {\r\n      return <BoardsCard apperance={inventoryCard.apperance} />;\r\n    }\r\n    case \"weapon\": {\r\n      return <WeaponCard apperance={inventoryCard.apperance} />;\r\n    }\r\n    default: {\r\n      return null;\r\n    }\r\n  }\r\n};\r\n","import { useSelector } from \"react-redux\";\r\n\r\nimport styled from \"styled-components\";\r\n\r\nimport { State, PlayerListType } from \"../business/types\";\r\n\r\nimport { MAX_HEALTH_AMOUNT } from \"../shared/config\";\r\nimport { HealthSlots } from \"../components/HealthSlots\";\r\nimport { Inventory } from \"../components/Inventory\";\r\n\r\ntype HealthSlotType = {\r\n  isFilled: boolean;\r\n};\r\n\r\nconst PlayerStatusCard = styled.div`\r\n  width: 250px;\r\n  height: 220px;\r\n  border: 1px solid lightgray;\r\n  padding: 10px;\r\n  box-sizing: border-box;\r\n  display: flex;\r\n  justify-content: center;\r\n  background-color: white;\r\n`;\r\n\r\nconst CharacterAvatar = styled.div`\r\n  width: 50px;\r\n  height: 70px;\r\n  border: 1px solid lightgray;\r\n  font-size: 14px;\r\n  text-align: center;\r\n`;\r\n\r\nconst Status = styled.div`\r\n  display: flex;\r\n  border: 1px solid lightgray;\r\n\r\n  padding: 3px;\r\n  margin-bottom: 15px;\r\n  font-size: 14px;\r\n  width: 150px;\r\n`;\r\n\r\nconst HealthStatus = styled(Status)`\r\n  height: 20px;\r\n`;\r\n\r\nconst InventoryStatus = styled(Status)`\r\n  /*   height: 100px; */\r\n`;\r\n\r\nconst Column = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n`;\r\n\r\nexport const PlayerStatus = () => {\r\n  const { numberOfPlayer } = useSelector((state: State) => ({\r\n    ...state,\r\n  }));\r\n\r\n  // TODO: why pass the index?\r\n  return (\r\n    <PlayerStatusCard>\r\n      {/* <Column>\r\n        <CharacterAvatar>–∏–≥—Ä–æ–∫ {`${numberOfPlayer + 1}`}</CharacterAvatar>\r\n      </Column> */}\r\n      <Column>\r\n        <HealthStatus>\r\n          {`–∑–¥–æ—Ä–æ–≤—å–µ:  `}\r\n          <HealthSlots index={numberOfPlayer}></HealthSlots>\r\n        </HealthStatus>\r\n        <InventoryStatus>\r\n          {/*    {`–ø—Ä–µ–¥–º–µ—Ç—ã:  `} */}\r\n          <Inventory index={numberOfPlayer} />\r\n        </InventoryStatus>\r\n      </Column>\r\n    </PlayerStatusCard>\r\n  );\r\n};\r\n","import { useSelector } from \"react-redux\";\r\nimport { useState, useEffect } from \"react\";\r\n\r\nimport styled from \"styled-components\";\r\n\r\nimport {\r\n  State,\r\n  GameState,\r\n  TypeEffect,\r\n  PlayerListType,\r\n} from \"../business/types\";\r\n\r\nimport { PlayerStatus } from \"./PlayerStatus\";\r\nimport { PlayersStatusList } from \"./PlayersStatusList\";\r\n\r\nconst Status = styled.div`\r\n  width: 200px;\r\n  min-height: 18px;\r\n  width: 250px;\r\n  height: 100px;\r\n  border: 1px solid lightgray;\r\n  background-color: #fff2d9;\r\n  text-align: center;\r\n  font-size: 20px;\r\n  color: #5f5757;\r\n  padding-top: 15px;\r\n  box-sizing: border-box;\r\n`;\r\n\r\nexport const StatusList = () => {\r\n  type statusType = string;\r\n  const initialStatus: statusType = \"\";\r\n  const [status, updateStatus] = useState(initialStatus);\r\n\r\n  const { dice, playerList, gameState, doEffect, gameResult } = useSelector(\r\n    (state: State) => ({\r\n      ...state,\r\n    })\r\n  );\r\n\r\n  const newStatus = getTextStatus(gameState, doEffect, dice, gameResult);\r\n  const batlePhrase = \"p–µ–∂–∏–º –±–æ—è\";\r\n  useEffect(() => {\r\n    updateStatus(() => {\r\n      if (gameState.type.includes(\"interactWithEnemy\")) {\r\n        if (gameState.type === \"interactWithEnemy\") {\r\n          return newStatus;\r\n        } else {\r\n          return `${batlePhrase}: ${newStatus}`;\r\n        }\r\n      } else {\r\n        return newStatus;\r\n      }\r\n    });\r\n  }, [gameState.type, doEffect?.type]);\r\n  return (\r\n    <>\r\n      <Status>{status}</Status>\r\n      <PlayerStatus />\r\n    </>\r\n  );\r\n};\r\n\r\nconst getTextStatus = (\r\n  gameState: GameState,\r\n  doEffect: TypeEffect,\r\n  dice: number,\r\n  gameResult: string\r\n) => {\r\n  switch (gameState.type) {\r\n    case \"gameStarted.trownDice\":\r\n      return \"–±—Ä–æ—Å–∏—Ç—å –∫—É–±–∏–∫\";\r\n    case \"gameStarted.playerMove\":\r\n      return \"—Å–¥–µ–ª–∞—Ç—å —Ö–æ–¥\";\r\n    case \"gameStarted.takeCard\":\r\n      return \"–æ—Ç–∫—Ä—ã–≤–∞–µ–º –∫–∞—Ä—Ç–æ—á–∫—É\";\r\n    case \"gameStarted.applyCard\":\r\n      return \"–ø—Ä–∏–º–µ–Ω–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É\";\r\n\r\n    /*   case \"interactWithEnemy.applyCard\":\r\n      return \"–ø—Ä–∏–º–µ–Ω–∏—Ç—å –æ—Ä—É–∂–∏–µ\"; */\r\n    case \"interactWithEnemy.throwBattleDice\": {\r\n      return \"–±—Ä–æ—Å–∏—Ç—å –∫—É–±–∏–∫\";\r\n    }\r\n    case \"interactWithEnemy.applyCard\": {\r\n      return \"–ø—Ä–∏–º–µ–Ω–∏—Ç—å –æ—Ä—É–∂–∏–µ\";\r\n    }\r\n\r\n    case \"interactWithEnemy.makeBattleAction\":\r\n    case \"interactWithEnemy\":\r\n      switch (doEffect?.type) {\r\n        case \"!openEnemyCard\": {\r\n          return \"–æ—Ç–∫—Ä—ã–≤–∞–µ–º –∫–∞—Ä—Ç–æ—á–∫—É\";\r\n        }\r\n\r\n        case \"!getBattleResult\": {\r\n          switch (dice) {\r\n            case 1:\r\n            case 2: {\r\n              return `–≤—ã–ø–∞–ª–æ ${dice}: –∏–≥—Ä–æ–∫ –ø—Ä–∏–º–µ–Ω—è–µ—Ç –æ—Ä—É–∂–∏–µ –∏–ª–∏ –±—Ä–æ—Å–∞–µ—Ç –∫—É–±–∏–∫ `;\r\n            }\r\n            case 3: {\r\n              return `–≤—ã–ø–∞–ª–æ ${dice}: –∏–≥—Ä–æ–∫ —Ç–µ—Ä—è–µ—Ç 1 –∑–¥–æ—Ä–æ–≤—å–µ`;\r\n            }\r\n            case 4: {\r\n              return `–≤—ã–ø–∞–ª–æ ${dice}: –∏–≥—Ä–æ–∫ —Å–ø–∞—Å–∞–µ—Ç—Å—è –±–µ–≥—Å—Ç–≤–æ–º `;\r\n            }\r\n            default:\r\n              return \"–±—Ä–æ—Å–∏—Ç—å –∫—É–±–∏–∫ –∏–ª–∏ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –æ—Ä—É–∂–∏–µ\";\r\n          }\r\n        }\r\n        default:\r\n          return \"—Å–¥–µ–ª–∞—Ç—å —Ö–æ–¥\";\r\n      }\r\n\r\n    /*   case \"gameStarted.interactWithEnemy.fightOrKeepBattle\":\r\n      return \"–ø—Ä–∏–º–µ–Ω–∏—Ç—å  –æ—Ä—É–∂–∏–µ –∏–ª–∏ –±—Ä–æ—Å–∏—Ç—å –∫—É–±–∏–∫\"; */\r\n\r\n    case \"endGame\":\r\n      return gameResult;\r\n    default:\r\n      return \"\";\r\n  }\r\n};\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nimport styled from \"styled-components\";\r\n\r\nimport { State } from \"../business/types\";\r\n\r\nconst GameScore = styled.div`\r\n  margin: 100px;\r\n`;\r\n\r\nexport const EndScreen = () => {\r\n  const gameResult = useSelector((state: State) => state.gameResult);\r\n  return (\r\n    <>\r\n      <GameScore>–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞. {gameResult}</GameScore>\r\n    </>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nimport styled from \"styled-components\";\r\n\r\nimport { State, PlayerListType } from \"../business/types\";\r\n\r\nimport { AMOUNT_PLAYERS, MAX_HEALTH_AMOUNT } from \"../shared/config\";\r\nimport { HealthSlots } from \"../components/HealthSlots\";\r\nimport { Inventory } from \"../components/Inventory\";\r\n\r\ntype HealthSlotType = {\r\n  isFilled: boolean;\r\n};\r\n\r\ntype AmountOfPlayers = {\r\n  amount: number;\r\n};\r\n\r\nconst PlayersListWrap = styled.div<AmountOfPlayers>`\r\n  /*  width: 130px; */\r\n  width: 100%;\r\n  height: 100px;\r\n  /*   border: 1px solid lightgray; */\r\n  display: grid;\r\n\r\n  grid-template-rows: 20% auto auto;\r\n  grid-template-columns: ${(props) => {\r\n    return `repeat(${props.amount} ,25px)`;\r\n  }};\r\n  pointer-events: none;\r\n`;\r\n\r\nconst CharacterAvatar = styled.div`\r\n  font-size: 12px;\r\n  text-align: center;\r\n  grid-row-start: 1;\r\n  grid-row-end: 2;\r\n`;\r\n\r\nconst HealthSlotsWrap = styled.div`\r\n  grid-row-start: 2;\r\n  grid-row-end: 3;\r\n  & > * {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    flex-direction: column;\r\n    width: 100%;\r\n  }\r\n`;\r\n\r\nconst InventorysWrap = styled.div`\r\n  grid-row-start: 3;\r\n  grid-row-end: 4;\r\n  & * {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    flex-direction: column;\r\n    box-sizing: border-box;\r\n    outline: none;\r\n    /*  & > * {\r\n      box-sizing: border-box;\r\n    } */\r\n  }\r\n`;\r\n\r\nexport const PlayersStatusList = () => {\r\n  return (\r\n    <PlayersListWrap amount={AMOUNT_PLAYERS}>\r\n      {new Array(AMOUNT_PLAYERS).fill(0).map((player, index) => {\r\n        return (\r\n          <React.Fragment key={index}>\r\n            <CharacterAvatar>{`${index + 1}`}</CharacterAvatar>\r\n            <HealthSlotsWrap>\r\n              <HealthSlots index={index}></HealthSlots>\r\n            </HealthSlotsWrap>\r\n            <InventorysWrap>\r\n              <Inventory index={index} />\r\n            </InventorysWrap>\r\n          </React.Fragment>\r\n        );\r\n      })}\r\n    </PlayersListWrap>\r\n  );\r\n};\r\n","import { useDispatch } from \"react-redux\";\r\n\r\nimport styled from \"styled-components\";\r\n\r\nconst StartButton = styled.button`\r\n  height: 22px;\r\n  margin: 140px;\r\n`;\r\n\r\nexport const StartScreen = () => {\r\n  const dispatch = useDispatch();\r\n  return (\r\n    <>\r\n      <StartButton\r\n        onClick={() => {\r\n          dispatch({ type: \"clickedStartButton\" });\r\n        }}\r\n      >\r\n        {\" \"}\r\n        –Ω–∞—á–∞—Ç—å –∏–≥—Ä—É\r\n      </StartButton>\r\n    </>\r\n  );\r\n};\r\n","import {\r\n  StartCell,\r\n  CommonCell,\r\n  FinishCell,\r\n  GameFieldCells,\r\n  CellType,\r\n} from \"../../types\";\r\n\r\nimport {\r\n  FINISH_COORD,\r\n  START_COORD,\r\n  CELLS_BARRIERS_LIST,\r\n} from \"../../../shared/config\";\r\n\r\n/**\r\n *  Returns an object with start and finish  in structure of GameValues.\r\n */\r\nexport const getFieldCells = (cellList: string[]): GameFieldCells => {\r\n  const emptyFieldCells = createEmptyFieldCells(cellList);\r\n  const fieldCellsWithWalls = getCellsWalls(emptyFieldCells);\r\n  const organizedFieldCells = getOrganizedFieldCells(fieldCellsWithWalls);\r\n  return organizedFieldCells;\r\n};\r\n\r\n/**\r\n * Creates an object with keys and empty cells in structure of GameValues.\r\n */\r\nconst createEmptyFieldCells = (cellList: Array<string>): GameFieldCells => {\r\n  const emptyFieldItem: CommonCell = {\r\n    name: \"commonCell\",\r\n    cardItem: [],\r\n  };\r\n\r\n  let newEmptyGameField: GameFieldCells = {};\r\n\r\n  cellList.forEach((cell: string) => {\r\n    newEmptyGameField[cell] = emptyFieldItem;\r\n  });\r\n\r\n  return newEmptyGameField;\r\n};\r\n\r\n/**\r\n *  Creates an object with start, finish and walls in structure of GameValues.\r\n */\r\nconst getOrganizedFieldCells = (emptyField: GameFieldCells): GameFieldCells => {\r\n  const startIndex = `${START_COORD.hor}.${START_COORD.vert}`;\r\n  const finishIndex = `${FINISH_COORD.hor}.${FINISH_COORD.vert}`;\r\n\r\n  const startCell: StartCell = {\r\n    name: \"start\",\r\n    cardItem: [],\r\n  };\r\n\r\n  const finishCell: FinishCell = {\r\n    name: \"finish\",\r\n    cardItem: [],\r\n  };\r\n\r\n  const organizedGameFieldCells = {\r\n    ...emptyField,\r\n    [startIndex]: startCell,\r\n    [finishIndex]: finishCell,\r\n  };\r\n\r\n  return organizedGameFieldCells;\r\n};\r\n\r\n/**\r\n * @returns The object in structure GameFieldCells. With walls(barriers) in cells.\r\n */\r\nconst getCellsWalls = (emptyField: GameFieldCells): GameFieldCells => {\r\n  // TODO: Need add checking for CommonCell?\r\n\r\n  /**\r\n   * Returns list of Cells with walls(barriers)\r\n   */\r\n  const cellsWithBarrierList = CELLS_BARRIERS_LIST.map((cellBarrier): [\r\n    string,\r\n    CellType\r\n  ] => {\r\n    const { coord, barrierList } = cellBarrier;\r\n    const cellIndex = `${coord.hor}.${coord.vert}`;\r\n\r\n    const cellWithoutBarrier = emptyField[cellIndex];\r\n\r\n    if (cellWithoutBarrier.name === \"commonCell\") {\r\n      const cellWithBarrier = {\r\n        ...cellWithoutBarrier,\r\n        barrierList: barrierList,\r\n      };\r\n\r\n      return [cellIndex, cellWithBarrier];\r\n    } else {\r\n      return [cellIndex, cellWithoutBarrier];\r\n    }\r\n  });\r\n\r\n  const cellsWithBarriers: GameFieldCells =\r\n    Object.fromEntries(cellsWithBarrierList);\r\n\r\n  const fieldCellsWithWalls = { ...emptyField, ...cellsWithBarriers };\r\n  return fieldCellsWithWalls;\r\n};\r\n","import { CommonCell, GameFieldCells, CardItem } from \"../../types\";\r\n\r\nimport {\r\n  AMOUNT_HEALTH_ITEMS,\r\n  AMOUNT_BOARDS_ITEMS,\r\n  CARD_APPERANCE,\r\n  AMOUNT_WEAPONS_ITEMS,\r\n} from \"../../../shared/config\";\r\n\r\ntype CardSet = {\r\n  card: CardItem;\r\n  amount: number;\r\n};\r\n\r\nconst cardsList: CardSet[] = [\r\n  {\r\n    card: {\r\n      name: \"health\",\r\n      apperance: CARD_APPERANCE,\r\n    },\r\n    amount: AMOUNT_HEALTH_ITEMS,\r\n  },\r\n  {\r\n    card: {\r\n      name: \"boards\",\r\n      apperance: CARD_APPERANCE,\r\n    },\r\n    amount: AMOUNT_BOARDS_ITEMS,\r\n  },\r\n  {\r\n    card: {\r\n      name: \"weapon\",\r\n      apperance: CARD_APPERANCE,\r\n    },\r\n    amount: AMOUNT_WEAPONS_ITEMS,\r\n  },\r\n];\r\n\r\n/**\r\n * Returns an object in structure of FieldCells with spreaded cards in random picked cells.\r\n */\r\nexport const spreadCards = (gameFieldCells: GameFieldCells): GameFieldCells => {\r\n  /**\r\n   * filled–°ells - its object with filling cells\r\n   * currCardSet -curr set of cards\r\n   * from cardset making object with cards\r\n   */\r\n  const cellsWithAllCards = cardsList.reduce((filled–°ells, currCardSet) => {\r\n    const gameFieldCellsWithPrevios = { ...gameFieldCells, ...filled–°ells };\r\n\r\n    const cellsForCards = getListForCards(\r\n      gameFieldCellsWithPrevios,\r\n      currCardSet\r\n    );\r\n\r\n    /**\r\n     * Adding filled with previos cardSet cells\r\n     */\r\n    const filledWithCardsFieldCells = setCards(cellsForCards, currCardSet);\r\n    const filledWithAllCardsCells = {\r\n      ...filled–°ells,\r\n      ...filledWithCardsFieldCells,\r\n    };\r\n    return filledWithAllCardsCells;\r\n  }, {});\r\n\r\n  const gameFieldFull = { ...gameFieldCells, ...cellsWithAllCards };\r\n  return gameFieldFull;\r\n};\r\n\r\n/**\r\n *  Creates an object with spreaded cards into cells from cellsForCards.\r\n */\r\nconst setCards = (\r\n  cellList: [string, CommonCell][],\r\n  currCardSet: CardSet\r\n): GameFieldCells => {\r\n  const cellListWithCards = cellList.map(\r\n    (cellWithCards: [string, CommonCell]) => {\r\n      const [index, cell] = cellWithCards;\r\n\r\n      const cellWithCard: CommonCell = {\r\n        ...cell,\r\n        cardItem: [currCardSet.card],\r\n      };\r\n      return [index, cellWithCard];\r\n    }\r\n  );\r\n\r\n  const fieldCellsWithCards = Object.fromEntries(cellListWithCards);\r\n\r\n  return fieldCellsWithCards;\r\n};\r\n\r\n/**\r\n * Returns an array with random empty cell witch suitable for card.\r\n * Array lenght is equal AMOUNT_..._ITEMS.\r\n */\r\nconst getListForCards = (\r\n  gameField: GameFieldCells,\r\n  currCardSet: CardSet\r\n): [string, CommonCell][] => {\r\n  const listGameField = Object.entries(gameField);\r\n\r\n  /**\r\n   * This array contains only empty cells\r\n   */\r\n\r\n  const emptyCellsList = listGameField.filter(\r\n    (cellItem): cellItem is [string, CommonCell] => {\r\n      const [, item] = cellItem;\r\n\r\n      return item.name === \"commonCell\" && item.cardItem.length === 0;\r\n    }\r\n  );\r\n\r\n  const AMOUNT_EMPTY_CELLS = emptyCellsList.length;\r\n  const amoutCurrentCards = currCardSet.amount;\r\n\r\n  /**\r\n   * Is a list with number of indexes of empty cells.\r\n   */\r\n  const keyList: Array<number> = new Array(amoutCurrentCards)\r\n    .fill(0)\r\n    .reduce((prevkeyList) => {\r\n      const randomNumber = getRandomNumber(prevkeyList, AMOUNT_EMPTY_CELLS);\r\n\r\n      if (prevkeyList) {\r\n        return [...prevkeyList, randomNumber];\r\n      } else {\r\n        return [randomNumber];\r\n      }\r\n    }, []);\r\n\r\n  const listForCards = keyList.map((keyItem: number): [string, CommonCell] => {\r\n    return emptyCellsList[keyItem];\r\n  });\r\n\r\n  return listForCards;\r\n};\r\n\r\n/**\r\n * Gets an array with the previously selected random numbers and the maximum number to select.\r\n * Returns a random number satisfying the conditions.\r\n */\r\nconst getRandomNumber = (\r\n  arrNumber: Array<number>,\r\n  maxNumber: number\r\n): number => {\r\n  const number = Math.floor(Math.random() * maxNumber);\r\n\r\n  if (arrNumber) {\r\n    return arrNumber.includes(number)\r\n      ? getRandomNumber(arrNumber, maxNumber)\r\n      : number;\r\n  } else {\r\n    return number;\r\n  }\r\n};\r\n","import { FINISH_COORD } from \"../../../shared/config\";\r\nimport { getFieldCells} from \"./getFieldCells\";\r\n/* import { spreadHealthCards } from \"./spreadHealthCards\"; */\r\nimport { spreadCards } from \"./spreadCards\";\r\n\r\n//TODO: Need add some config object for all cards and spreading them simultaneously.\r\nexport const getGameField = () => {\r\n  const order = getCellOrder();\r\n  const gameFieldCells = getFieldCells(order);\r\n  const filledWithCardsCells = spreadCards(gameFieldCells);\r\n  const gameField = { order, values: filledWithCardsCells };\r\n  return gameField;\r\n};\r\n\r\n/**\r\n * Creates an array with cell index order.\r\n */\r\nconst getCellOrder = (): Array<string> => {\r\n  const width = FINISH_COORD.hor;\r\n  const height = FINISH_COORD.vert;\r\n\r\n  let orderList: Array<string> = [];\r\n\r\n  for (let hor = 0; hor <= width; hor++) {\r\n    for (let vert = 0; vert <= height; vert++) {\r\n      const index: string = `${hor}.${vert}`;\r\n      orderList.push(index);\r\n    }\r\n  }\r\n\r\n  return orderList;\r\n};\r\n","import { PlayerListType } from \"../types\";\r\n\r\nimport {\r\n  AMOUNT_PLAYERS,\r\n  INITIAL_PLAYER_HEALTH,\r\n  START_COORD,\r\n} from \"../../shared/config\";\r\n\r\nexport const getPlayers = (): PlayerListType => {\r\n  const startCoord = `${START_COORD.hor}.${START_COORD.vert}`;\r\n  const playersList = new Array(AMOUNT_PLAYERS).fill(0).map((player, index) => {\r\n    const playerCard = {\r\n      name: \"player\",\r\n      health: INITIAL_PLAYER_HEALTH,\r\n      orderNumber: index,\r\n      coord: startCoord,\r\n      //TODO: Added const emptyInventory\r\n      inventory: { boards: 0, weapon: 0, health: 0, cardSelected: null },\r\n    };\r\n    return [index, playerCard];\r\n  });\r\n\r\n  const playersObj: PlayerListType = Object.fromEntries(playersList);\r\n  return playersObj;\r\n};\r\n","import { EnemyListType, GameField, CommonCell, CellType } from \"../types\";\r\n\r\nimport { AMOUNT_ENEMIES, CARD_APPERANCE } from \"../../shared/config\";\r\n\r\nexport const getEnemies = (gameField: GameField): EnemyListType => {\r\n  const emptyCellsList = getEmptyList(gameField);\r\n  const enemiesCoords = getListOfIndexes(emptyCellsList);\r\n  const enemiesObj = getListOfEnemy(enemiesCoords);\r\n  return enemiesObj;\r\n};\r\n\r\n/**\r\n * For every element checks that cell has no cards on it.\r\n * Returns the list of cells without any cards.\r\n */\r\nconst getEmptyList = (gameField: GameField): [string, CommonCell][] => {\r\n  const listCells = Object.entries(gameField.values);\r\n  const emptyCellsList = listCells.filter(\r\n    (cellItem): cellItem is [string, CommonCell] => {\r\n      const [, item] = cellItem;\r\n      return item.name === \"commonCell\" && item.cardItem.length === 0;\r\n    }\r\n  );\r\n  return emptyCellsList;\r\n};\r\n\r\n/**\r\n * Returns the list of random picked indexes of emptyCellsList\r\n */\r\nconst getListOfIndexes = (emptyCellsList: [string, CommonCell][]) => {\r\n  const AMOUNT_EMPTY_CELLS = emptyCellsList.length;\r\n\r\n  // TODO: it may be taking out as separate module with getRandomNumber?\r\n  const keyList: Array<number> = new Array(AMOUNT_ENEMIES)\r\n    .fill(0)\r\n    .reduce((prevkeyList) => {\r\n      const randomNumber = getRandomNumber(prevkeyList, AMOUNT_EMPTY_CELLS);\r\n\r\n      if (prevkeyList) {\r\n        return [...prevkeyList, randomNumber];\r\n      } else {\r\n        return [randomNumber];\r\n      }\r\n    }, []);\r\n\r\n  const idexesListForCards = keyList.map((keyItem: number): string => {\r\n    const [index] = emptyCellsList[keyItem];\r\n    return index;\r\n  });\r\n\r\n  return idexesListForCards;\r\n};\r\n\r\n/**\r\n * Returns the object of all enemies\r\n */\r\nconst getListOfEnemy = (enemiesCoords: string[]) => {\r\n  const enemyList = enemiesCoords.map((coord) => {\r\n    const enemyCard = {\r\n      name: \"enemy\",\r\n      power: 1,\r\n      coord: coord,\r\n      apperance: CARD_APPERANCE,\r\n    };\r\n    return [enemyCard.coord, enemyCard];\r\n  });\r\n\r\n  const enemiesObj: EnemyListType = Object.fromEntries(enemyList);\r\n  return enemiesObj;\r\n};\r\n\r\n/**\r\n * Gets an array with the previously selected random numbers and the maximum number to select.\r\n * Returns a random number satisfying the conditions.\r\n */\r\nconst getRandomNumber = (\r\n  arrNumber: Array<number>,\r\n  maxNumber: number\r\n): number => {\r\n  const number = Math.floor(Math.random() * maxNumber);\r\n\r\n  if (arrNumber) {\r\n    return arrNumber.includes(number)\r\n      ? getRandomNumber(arrNumber, maxNumber)\r\n      : number;\r\n  } else {\r\n    return number;\r\n  }\r\n};\r\n","import { State } from \"../types\";\r\n\r\nimport { getGameField } from \"./getGameField\";\r\nimport { getPlayers } from \"./getPlayers\";\r\nimport { getEnemies } from \"./getEnemies\";\r\n\r\nconst getInitialState = (): State => {\r\n  //–æ—Ç–¥–∞–µ–º gameFieldWithoutEnemy –¥–ª—è —Ä–∞–Ω–¥–æ–º–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –≤—Ä–∞–≥–æ–≤ –∏–∑ –ø—É—Å—Ç—ã—Ö —è—á–µ–µ–∫\r\n  const gameFieldWithoutEnemy = getGameField();\r\n\r\n  return {\r\n    gameState: { type: \"waitingStart\" },\r\n    dice: 0,\r\n    gameResult: \"\",\r\n    playerList: getPlayers(),\r\n    enemyList: getEnemies(gameFieldWithoutEnemy),\r\n    gameField: gameFieldWithoutEnemy,\r\n    doEffect: null,\r\n    numberOfPlayer: 0,\r\n  };\r\n};\r\n\r\nexport const initialState = getInitialState();\r\n","import { State } from \"../../types\";\r\nimport { ActionType } from \"../../reducer\";\r\n\r\nexport const waitingStart = ( state: State,action: ActionType): State => {\r\n  switch (action.type) {\r\n    case \"clickedStartButton\": {\r\n      return {\r\n        ...state,\r\n        gameState: {\r\n          type: \"gameStarted.trownDice\",\r\n        },\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { State, PlayerListType, MoveDirection, CellType } from \"../../../types\";\r\n\r\nimport { checkCellHasWall } from \"../../common/checkCellHasWall\";\r\n/** Cheking the cases when can't take the cell. In default we think that can. */\r\nexport const checkCanTakeCell = (\r\n  state: State,\r\n  nextPlayerCoord: string,\r\n  direction: MoveDirection\r\n) => {\r\n  const { playerList, dice } = state;\r\n  const metBarrier = checkCellHasWall(state, nextPlayerCoord, direction);\r\n  const isLastStepOfMove = dice === 1;\r\n  const isNextCellOcupied = checkNextCellOccupied(playerList, nextPlayerCoord);\r\n  const canNotTakeCell = isLastStepOfMove && isNextCellOcupied;\r\n\r\n  switch (true) {\r\n    case metBarrier: {\r\n      return false;\r\n    }\r\n\r\n    case canNotTakeCell: {\r\n      // TODO: –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è —Å—Ç–∞—Ç—É—Å–∞ —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º –æ –∑–∞–Ω—è—Ç–æ–π —á–µ–π–∫–µ\r\n      return false;\r\n    }\r\n    default: {\r\n      return true;\r\n    }\r\n  }\r\n};\r\n\r\nconst checkNextCellOccupied = (\r\n  playersList: PlayerListType,\r\n  newCoord: string\r\n): boolean => {\r\n  const iterablePlayerList = Object.entries(playersList);\r\n  const isCellOccupied = iterablePlayerList.some((player) => {\r\n    const [, playerValue] = player;\r\n    return playerValue.coord === newCoord;\r\n  });\r\n  return isCellOccupied;\r\n};\r\n","import {\r\n  State,\r\n  PlayerListType,\r\n  CardItem,\r\n  TypeOfCard,\r\n  InventoryType,\r\n} from \"../../types\";\r\n\r\n/**\r\n * We need to give highlighting to healthCard\r\n */\r\n\r\nexport const getStateCardSelected = (\r\n  state: State,\r\n  typeOfSelect: TypeOfCard\r\n) => {\r\n  // TODO: Need to restrict select unneceserry card -?!\r\n  // Add switch on type of cards\r\n  const { numberOfPlayer } = state;\r\n\r\n  const newPlayerList = changeSelectedCard(state, typeOfSelect);\r\n\r\n  const selectedCard = newPlayerList[numberOfPlayer].inventory.cardSelected\r\n    ? true\r\n    : false;\r\n\r\n  // The difference between weaponCard and other  card that weapon are usedin the battle.\r\n  //Obviously we need other stateWithoutSelectedCard for weapon\r\n  const stateWithSelectedCard: State = {\r\n    ...state,\r\n    playerList: newPlayerList,\r\n    gameState: {\r\n      type: \"gameStarted.applyCard\",\r\n    },\r\n    availableCellsCoords: null,\r\n  };\r\n\r\n  const stateWithoutSelectedCard: State = {\r\n    ...state,\r\n    playerList: newPlayerList,\r\n    gameState: {\r\n      type: /* cardType === \"weapon\"\r\n          ? \"gameStarted.interactWithEnemy\"\r\n          :  */ \"gameStarted.playerMove\",\r\n    },\r\n    doEffect: { type: \"!checkAvailableNeighboringCell\" },\r\n  };\r\n\r\n  switch (selectedCard) {\r\n    case true:\r\n      return stateWithSelectedCard;\r\n    case false:\r\n      return stateWithoutSelectedCard;\r\n  }\r\n};\r\n\r\nconst changeSelectedCard = (state: State, typeOfSelect: TypeOfCard) => {\r\n  const { playerList, numberOfPlayer } = state;\r\n  const inventory = playerList[numberOfPlayer].inventory;\r\n  if (typeOfSelect !== null) {\r\n    const isTheSameSelectType = inventory.cardSelected === typeOfSelect;\r\n    const hasCards = inventory[typeOfSelect] !== 0;\r\n\r\n    switch (hasCards) {\r\n      case true: {\r\n        switch (isTheSameSelectType) {\r\n          case true: {\r\n            const newInventoryCardUnSelected: InventoryType = {\r\n              ...inventory,\r\n              cardSelected: null,\r\n            };\r\n\r\n            const newPlayerList: PlayerListType = {\r\n              ...playerList,\r\n              [numberOfPlayer]: {\r\n                ...playerList[numberOfPlayer],\r\n                inventory: newInventoryCardUnSelected,\r\n              },\r\n            };\r\n\r\n            return newPlayerList;\r\n          }\r\n\r\n          case false: {\r\n            const newInventoryCardSelected: InventoryType = {\r\n              ...inventory,\r\n              cardSelected: typeOfSelect,\r\n            };\r\n\r\n            const newPlayerList: PlayerListType = {\r\n              ...playerList,\r\n              [numberOfPlayer]: {\r\n                ...playerList[numberOfPlayer],\r\n                inventory: newInventoryCardSelected,\r\n              },\r\n            };\r\n\r\n            return newPlayerList;\r\n          }\r\n        }\r\n      }\r\n\r\n      case false: {\r\n        return playerList;\r\n      }\r\n    }\r\n  } else {\r\n    return playerList;\r\n  }\r\n};\r\n","import {\r\n  State,\r\n  MoveDirection,\r\n  AvailableCellListType,\r\n  TypeOfCard,\r\n} from \"../../../types\";\r\n\r\nimport { ActionType } from \"../../../reducer\";\r\nimport { MOVE_DIRECTION_LIST } from \"../../../../shared/config\";\r\n\r\nimport { getNextPlayerCoord } from \"../../common/getNextPlayerCoord\";\r\nimport { getPlayerMoveResult } from \"./getPlayerMoveResult\";\r\nimport { checkCanTakeCell } from \"./checkCanTakeCell\";\r\nimport { changePlayerCoord } from \"./changePlayerCoord\";\r\nimport { getStateCardSelected } from \"../../common/getStateCardSelected\";\r\nimport { getNeighboringCellList } from \"../../common/getNeighboringCellList\";\r\n\r\nexport const playerMove = (state: State, action: ActionType): State => {\r\n  switch (action.type) {\r\n    case \"req-checkAvailableNeighboringCell\": {\r\n      return getAvailableCells(state);\r\n    }\r\n\r\n    case \"playerMoved\": {\r\n      const direction = action.payload;\r\n      return getStatePlayerMoved(state, direction);\r\n    }\r\n\r\n    case \"req-cleanAvailableCells\": {\r\n      return getStateClearedAvailableCells(state);\r\n    }\r\n\r\n    case \"req-getPlayerMoveResult\": {\r\n      return getPlayerMoveResult(state);\r\n    }\r\n\r\n    case \"cardChoosed\": {\r\n      const typeofCard: TypeOfCard = action.payload.type;\r\n      return getStateCardSelected(state, typeofCard);\r\n    }\r\n\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Changing coordinates of player if he can take the cell in certain direction.\r\n */\r\nconst getStatePlayerMoved = (state: State, direction: MoveDirection): State => {\r\n  const { playerList, numberOfPlayer, gameField } = state;\r\n\r\n  const prevPlayerCoord = playerList[numberOfPlayer].coord;\r\n  const nextPlayerCoord = getNextPlayerCoord(prevPlayerCoord, direction);\r\n\r\n  /*   const canTakeNextCell = gameField.values[nextPlayerCoord].availableForTake;\r\n   */\r\n\r\n  const canTakeNextCell = state.availableCellsCoords?.includes(nextPlayerCoord);\r\n\r\n  switch (canTakeNextCell) {\r\n    case true: {\r\n      const newPlayerList = changePlayerCoord(state, nextPlayerCoord);\r\n      const newState: State = {\r\n        ...state,\r\n        playerList: newPlayerList,\r\n        doEffect: { type: \"!cleanMarkedCell\" },\r\n      };\r\n      return newState;\r\n    }\r\n    case false: {\r\n      return state;\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Current player get field \"availableForTake\" with coordinate of cells that can be taken\r\n */\r\n\r\nexport const getAvailableCells = (state: State): State => {\r\n  const { playerList, numberOfPlayer, gameField } = state;\r\n  const prevPlayerCoord = playerList[numberOfPlayer].coord;\r\n  const neighboringCellList = getNeighboringCellList(\r\n    prevPlayerCoord,\r\n    gameField\r\n  );\r\n\r\n  /**\r\n   * Returns the coordinates of Cell that can be taken by player.\r\n   */\r\n  const availableCellList: AvailableCellListType = neighboringCellList.filter(\r\n    (cellItem) => {\r\n      const { direction, coord } = cellItem;\r\n\r\n      return checkCanTakeCell(state, coord, direction);\r\n    }\r\n  );\r\n\r\n  const availableCellsCoords = availableCellList.map((cellItem) => {\r\n    const { direction, coord } = cellItem;\r\n    return coord;\r\n  });\r\n\r\n  return {\r\n    ...state,\r\n    availableCellsCoords,\r\n  };\r\n};\r\n\r\n/**\r\n *Remove from current player availableCellList\r\n */\r\nconst getStateClearedAvailableCells = (state: State): State => {\r\n  const { playerList, numberOfPlayer, gameField } = state;\r\n\r\n  return {\r\n    ...state,\r\n    doEffect: { type: \"!getPlayerMoveResult\" },\r\n    availableCellsCoords: null,\r\n  };\r\n};\r\n","import { State, PlayerListType, MoveDirection, CellType } from \"../../../types\";\r\n\r\nimport { switchToNextPlayer } from \"../../../../shared/State\";\r\n/**\r\n * @returns A new state depending on the result of the player's movement.\r\n */\r\n\r\nexport const getPlayerMoveResult = (state: State) => {\r\n  const { gameField, playerList, numberOfPlayer, dice } = state;\r\n\r\n  const newPlayerCoord = playerList[numberOfPlayer].coord;\r\n  const newCellWithPlayer = gameField.values[newPlayerCoord];\r\n  const isLastStepOfMove = dice === 1;\r\n\r\n  const takeFinish = newCellWithPlayer?.name === \"finish\";\r\n\r\n  const takeCard =\r\n    newCellWithPlayer?.name === \"commonCell\" &&\r\n    newCellWithPlayer.cardItem.length > 0;\r\n\r\n\r\n  const metEnemyCard =\r\n    newCellWithPlayer?.name === \"commonCell\" && state.enemyList[newPlayerCoord]\r\n      ? true\r\n      : false;\r\n\r\n  // TODO: Is flat switch okey? Or i need it nested?!\r\n  switch (true) {\r\n    // TODO: –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è —á–∞—Å—Ç—å state\r\n    case takeFinish: {\r\n      const newState: State = {\r\n        ...state,\r\n        dice: state.dice - 1,\r\n        gameResult: \"–í—ã –≤—ã–∏–≥—Ä–∞–ª–∏\",\r\n      };\r\n      return newState;\r\n    }\r\n\r\n    case takeCard: {\r\n      const newState: State = {\r\n        ...state,\r\n        dice: state.dice - 1,\r\n        gameState: {\r\n          type: \"gameStarted.takeCard\",\r\n        },\r\n        doEffect: { type: \"!openCard\" },\r\n      };\r\n      return newState;\r\n    }\r\n\r\n    case metEnemyCard: {\r\n      const newState: State = {\r\n        ...state,\r\n        dice: state.dice - 1,\r\n        gameState: {\r\n          type: \"interactWithEnemy\",\r\n        },\r\n        doEffect: { type: \"!checkApperanceEnemyCard\" },\r\n      };\r\n      return newState;\r\n    }\r\n\r\n    case isLastStepOfMove: {\r\n      /*  const changedPartState = switchToNextPlayer(); */\r\n      const newState: State = {\r\n        ...state,\r\n        dice: 0,\r\n        gameState: {\r\n          type: \"gameStarted.getPlayersOrder\",\r\n        },\r\n        doEffect: {\r\n          type: \"!getNextPlayer\",\r\n        },\r\n      };\r\n      return newState;\r\n    }\r\n\r\n    default: {\r\n      const newState: State = {\r\n        ...state,\r\n        dice: state.dice - 1,\r\n        gameState: {\r\n          type: \"gameStarted.playerMove\",\r\n        },\r\n        doEffect: { type: \"!checkAvailableNeighboringCell\" },\r\n      };\r\n      return newState;\r\n    }\r\n  }\r\n};\r\n","import { State } from \"../../../types\";\r\n\r\nexport const changePlayerCoord = (state: State, newPlayerCoord: string) => {\r\n  const { playerList, numberOfPlayer } = state;\r\n\r\n  const newPlayerList = {\r\n    ...playerList,\r\n    [numberOfPlayer]: {\r\n      ...playerList[numberOfPlayer],\r\n      coord: newPlayerCoord,\r\n    },\r\n  };\r\n  return newPlayerList;\r\n};\r\n","import {\r\n  State,\r\n  GameField,\r\n  PlayerListType,\r\n  InventoryType,\r\n} from \"../../../types\";\r\n\r\nimport { ActionType } from \"../../../reducer\";\r\nimport { openCard } from \"./openCard\";\r\nimport { deleteCard } from \"./deleteCard\";\r\n\r\nexport const takeCard = (state: State, action: ActionType): State => {\r\n  switch (action.type) {\r\n    case \"req-openCard\": {\r\n      return getStateOpenCard(state);\r\n    }\r\n\r\n    case \"req-takeCard\": {\r\n      return getStateCardTaken(state);\r\n    }\r\n\r\n    case \"req-deleteCard\": {\r\n      return getStateDeletedCard(state);\r\n    }\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst getStateOpenCard = (state: State): State => {\r\n  const { gameField, numberOfPlayer, playerList } = state;\r\n  const playerCoordIndex = playerList[numberOfPlayer].coord;\r\n  const currCell = gameField.values[playerCoordIndex];\r\n\r\n  const cellWithOpenCard = openCard(currCell);\r\n\r\n  const newGameField: GameField = {\r\n    ...gameField,\r\n    values: { ...gameField.values, [playerCoordIndex]: cellWithOpenCard },\r\n  };\r\n\r\n  return {\r\n    ...state,\r\n    gameField: newGameField,\r\n    doEffect: { type: \"!takeCard\" },\r\n  };\r\n};\r\n\r\nconst getStateCardTaken = (state: State): State => {\r\n  const { gameField, numberOfPlayer, playerList } = state;\r\n  const player = playerList[numberOfPlayer];\r\n\r\n  const cardItems = gameField.values[player.coord].cardItem;\r\n\r\n  const emptyInventory = {\r\n    boards: 0,\r\n    health: 0,\r\n    weapon: 0,\r\n    cardSelected: null,\r\n  };\r\n\r\n  let structuredCardItems: InventoryType = cardItems.reduce(\r\n    (prevItem, currentItem) => {\r\n      if (currentItem) {\r\n        const prevItemObj = prevItem[currentItem.name];\r\n\r\n        if (prevItemObj) {\r\n          return {\r\n            ...prevItem,\r\n            [currentItem.name]: prevItem[currentItem.name] + 1,\r\n          };\r\n        } else {\r\n          return { ...prevItem, [currentItem.name]: 1 };\r\n        }\r\n      } else return emptyInventory;\r\n    },\r\n    emptyInventory\r\n  );\r\n\r\n  const newInventory = {\r\n    ...player.inventory,\r\n    boards: player.inventory.boards + structuredCardItems.boards,\r\n    health: player.inventory.health + structuredCardItems.health,\r\n    weapon: player.inventory.weapon + structuredCardItems.weapon,\r\n  };\r\n\r\n  const newPlayer = {\r\n    ...player,\r\n    inventory: newInventory,\r\n  };\r\n\r\n  const newPlayerList: PlayerListType = {\r\n    ...playerList,\r\n    [numberOfPlayer]: newPlayer,\r\n  };\r\n\r\n  return {\r\n    ...state,\r\n    doEffect: { type: \"!deleteCard\" },\r\n    playerList: newPlayerList,\r\n  };\r\n};\r\n\r\nconst getStateDeletedCard = (state: State): State => {\r\n  const { gameField, numberOfPlayer, playerList } = state;\r\n  const playerCoordIndex = playerList[numberOfPlayer].coord;\r\n  const currCell = gameField.values[playerCoordIndex];\r\n  const cellWithoutCard = deleteCard(currCell);\r\n\r\n  const newGameField: GameField = {\r\n    ...gameField,\r\n    values: {\r\n      ...gameField.values,\r\n      [playerCoordIndex]: cellWithoutCard,\r\n    },\r\n  };\r\n\r\n  return {\r\n    ...state,\r\n    gameField: newGameField,\r\n    gameState: {\r\n      type: \"gameStarted.getPlayersOrder\",\r\n    },\r\n    doEffect: {\r\n      type: \"!getNextPlayer\",\r\n    },\r\n    dice: 0,\r\n  };\r\n};\r\n","import { CellType, CardItem } from \"../../../types\";\r\n\r\nexport const openCard = (cell: CellType): CellType => {\r\n  if (cell.name === \"commonCell\") {\r\n    /**\r\n     * When we open card we now for sure that in cell lying only one card\r\n     */\r\n    const cardItemWithOpenCard = cell.cardItem.map((cardItem) => {\r\n      if (cardItem) {\r\n        const openedCard: CardItem = {\r\n          ...cardItem,\r\n          apperance: \"open\",\r\n        };\r\n        return openedCard;\r\n      } else {\r\n        return null;\r\n      }\r\n    });\r\n\r\n    const openedItem: CellType = {\r\n      ...cell,\r\n      cardItem: cardItemWithOpenCard,\r\n    };\r\n\r\n    return openedItem;\r\n  } else {\r\n    return cell;\r\n  }\r\n};\r\n","import { CommonCell, CellType } from \"../../../types\";\r\n\r\nexport const deleteCard = (currCell: CellType): CellType => {\r\n  /**\r\n   * When we delete card we now for sure that in cell lying only one card\r\n   */\r\n  if (currCell.name === \"commonCell\") {\r\n    const cellWithoutHealth: CommonCell = {\r\n      ...currCell,\r\n      cardItem: [],\r\n    };\r\n    return cellWithoutHealth;\r\n  } else return currCell;\r\n};\r\n","import { State } from \"../../types\";\r\nimport { ActionType } from \"../../reducer\";\r\n\r\n\r\nexport const trownDice = ( state: State,action: ActionType): State => {\r\n  switch (action.type) {\r\n    case \"diceThrown\": {\r\n      return {\r\n        ...state,\r\n        dice: action.payload,\r\n        gameState: {\r\n          type: \"gameStarted.playerMove\",\r\n        },\r\n        doEffect: { type: \"!checkAvailableNeighboringCell\" },\r\n      };\r\n    }\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { State } from \"../../types\";\r\n\r\nexport const getBattleResult = (state: State): State => {\r\n  const { dice } = state;\r\n\r\n  switch (dice) {\r\n    case 1:\r\n    case 2: {\r\n      return getStatePlayerCanFight(state);\r\n    }\r\n\r\n    case 3: {\r\n      return getStatePlayetLoseHealth(state);\r\n    }\r\n\r\n    case 4: {\r\n      return getStatePlayerRunsAway(state);\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst getStatePlayerCanFight = (state: State): State => {\r\n  //Player can use weapon or rethrow dice\r\n  return {\r\n    ...state,\r\n    dice: 0,\r\n    gameState: { type: \"interactWithEnemy.makeBattleAction\" },\r\n  };\r\n};\r\n\r\nconst getStatePlayerRunsAway = (state: State): State => {\r\n  return {\r\n    ...state,\r\n    dice: 0,\r\n    gameState: {\r\n      type: \"gameStarted.trownDice\",\r\n    },\r\n  };\r\n};\r\n\r\nconst getStatePlayetLoseHealth = (state: State): State => {\r\n  const { playerList, numberOfPlayer } = state;\r\n  const newPlayerHealth = playerList[numberOfPlayer].health - 1;\r\n  const isPlayerAlive = newPlayerHealth > 0 ? true : false;\r\n\r\n  const newPlayerList = {\r\n    ...playerList,\r\n    [numberOfPlayer]: {\r\n      ...playerList[numberOfPlayer],\r\n      health: playerList[numberOfPlayer].health - 1,\r\n    },\r\n  };\r\n\r\n  if (isPlayerAlive) {\r\n    const newState: State = {\r\n      ...state,\r\n      dice: 0,\r\n      gameState: { type: \"interactWithEnemy.throwBattleDice\" },\r\n      playerList: newPlayerList,\r\n    };\r\n\r\n    return newState;\r\n  } else {\r\n    console.log(`–∏–≥—Ä–æ–∫ ‚Ññ${numberOfPlayer} –ø–æ–≥–∏–±`);\r\n\r\n    return {\r\n      ...state,\r\n      gameState: { type: \"endGame\" },\r\n      gameResult: \"–í—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏\",\r\n      doEffect: null,\r\n    };\r\n  }\r\n};\r\n","import { InventoryType, PlayerListType } from \"../../types\";\r\n\r\nexport const deleteSelectedCard = (\r\n  playerList: PlayerListType,\r\n  numberOfPlayer: number\r\n) => {\r\n  const indexCurrPlayer = numberOfPlayer;\r\n  const currInventory = playerList[indexCurrPlayer].inventory;\r\n\r\n  const removedCardType = playerList[indexCurrPlayer].inventory.cardSelected;\r\n\r\n  if (removedCardType) {\r\n    const newInventory: InventoryType = {\r\n      ...currInventory,\r\n      [removedCardType]: currInventory[removedCardType] - 1,\r\n      cardSelected: null,\r\n    };\r\n\r\n    return newInventory;\r\n  } else {\r\n    return currInventory;\r\n  }\r\n};\r\n","import { State } from \"../../types\";\r\nimport { ActionType } from \"../../reducer\";\r\n\r\nexport const trownBattleDice = (state: State, action: ActionType): State => {\r\n  switch (action.type) {\r\n    case \"diceThrown\": {\r\n      return {\r\n        ...state,\r\n        dice: action.payload,\r\n        gameState: { type: \"interactWithEnemy\" },\r\n        doEffect: { type: \"!getBattleResult\" },\r\n      };\r\n    }\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { State, PlayerListType, CardItem, EnemyCardType } from \"../../types\";\r\nimport { ActionType } from \"../../reducer\";\r\nimport { changeSelectedCard } from \"./changeSelectedCard\";\r\n\r\nexport const selectCard = (state: State, action: ActionType) => {\r\n  const { numberOfPlayer } = state;\r\n  switch (action.type) {\r\n    case \"cardChoosed\": {\r\n      const newPlayerList = changeSelectedCard(state, action.payload.type);\r\n\r\n      const hasAnyCardSelected = newPlayerList[numberOfPlayer].inventory\r\n        .cardSelected\r\n        ? true\r\n        : false;\r\n\r\n      // The difference between weaponCard and other card that weapon are used in the battle.\r\n      // Obviously we need other stateWithoutSelectedCard for weapon\r\n      const stateWithSelectedCard: State = {\r\n        ...state,\r\n        playerList: newPlayerList,\r\n        gameState: { type: \"interactWithEnemy.applyCard\" },\r\n      };\r\n\r\n      const stateWithoutSelectedCard: State = {\r\n        ...state,\r\n        playerList: newPlayerList,\r\n        gameState: { type: \"interactWithEnemy.makeBattleAction\" },\r\n      };\r\n\r\n      switch (hasAnyCardSelected) {\r\n        case true:\r\n          return stateWithSelectedCard;\r\n        case false:\r\n          return stateWithoutSelectedCard;\r\n      }\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n","import { State, PlayerListType, TypeOfCard } from \"../../types\";\r\n\r\nexport const changeSelectedCard = (state: State, typeOfSelect: TypeOfCard) => {\r\n  const { playerList, numberOfPlayer } = state;\r\n  const inventory = playerList[numberOfPlayer].inventory;\r\n\r\n  const newInventory = { ...inventory, cardSelected: typeOfSelect };\r\n\r\n  const newPlayerList: PlayerListType = {\r\n    ...playerList,\r\n    [numberOfPlayer]: {\r\n      ...playerList[numberOfPlayer],\r\n      inventory: newInventory,\r\n    },\r\n  };\r\n\r\n  return newPlayerList;\r\n};\r\n","import { State, PlayerListType, CardItem, EnemyCardType } from \"../../types\";\r\n\r\nimport { ActionType } from \"../../reducer\";\r\nimport { openEnemyCard } from \"./openEnemyCard\";\r\nimport { getBattleResult } from \"./getBattleResult\";\r\nimport { removeEnemyCard } from \"./removeEnemyCard\";\r\nimport { defeatEnemy } from \"./defeatEnemy\";\r\nimport { checkCardApperance } from \"./checkCardApperance\";\r\nimport { trownBattleDice } from \"./trownBattleDice\";\r\nimport { selectCard } from \"./selectCard\";\r\n\r\nexport const interactWithEnemy = (state: State, action: ActionType): State => {\r\n  const [, phaseInner] = state.gameState.type.split(\".\");\r\n\r\n  switch (phaseInner) {\r\n    case \"makeBattleAction\": {\r\n      switch (action.type) {\r\n        case \"diceThrown\": {\r\n          return trownBattleDice(state, action);\r\n        }\r\n\r\n        case \"cardChoosed\": {\r\n          return selectCard(state, action);\r\n        }\r\n\r\n        default: {\r\n          return state;\r\n        }\r\n      }\r\n    }\r\n\r\n    case \"applyCard\": {\r\n      switch (action.type) {\r\n        case \"cardChoosed\": {\r\n          return selectCard(state, action);\r\n        }\r\n\r\n        case \"req-defeatEnemy\": {\r\n          return defeatEnemy(state);\r\n        }\r\n        case \"req-removeEnemyCard\": {\r\n          return removeEnemyCard(state);\r\n        }\r\n\r\n        default: {\r\n          return state;\r\n        }\r\n      }\r\n    }\r\n\r\n    case \"throwBattleDice\": {\r\n      return trownBattleDice(state, action);\r\n    }\r\n\r\n    default: {\r\n      switch (action.type) {\r\n        case \"req-checkEnemyCard\": {\r\n          return checkCardApperance(state);\r\n        }\r\n\r\n        case \"req-openEnemyCard\": {\r\n          return openEnemyCard(state);\r\n        }\r\n\r\n        case \"req-getBattleResult\": {\r\n          return getBattleResult(state);\r\n        }\r\n\r\n        default: {\r\n          return state;\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\n","import { State, EnemyCardType } from \"../../types\";\r\nimport { deleteSelectedCard } from \"../common/deleteSelectedCard\";\r\n\r\nexport const defeatEnemy = (state: State): State => {\r\n  const { numberOfPlayer, playerList, enemyList } = state;\r\n  const currEnemyCoord = playerList[numberOfPlayer].coord;\r\n  const currEnemy = enemyList[currEnemyCoord];\r\n  const defeatedEnemy: EnemyCardType = { ...currEnemy, apperance: \"defeated\" };\r\n  const newEnemyList = {\r\n    ...state.enemyList,\r\n    [currEnemyCoord]: defeatedEnemy,\r\n  };\r\n\r\n  const newInventory = deleteSelectedCard(playerList, numberOfPlayer);\r\n\r\n  const newPlayerList = {\r\n    ...playerList,\r\n    [numberOfPlayer]: {\r\n      ...playerList[numberOfPlayer],\r\n      inventory: newInventory,\r\n    },\r\n  };\r\n\r\n  return {\r\n    ...state,\r\n    enemyList: newEnemyList,\r\n    playerList: newPlayerList,\r\n    doEffect: { type: \"!removeEnemyCard\" },\r\n  };\r\n};\r\n","import { State } from \"../../types\";\r\n\r\nexport const removeEnemyCard = (state: State): State => {\r\n  const { enemyList, numberOfPlayer, playerList } = state;\r\n  const currentCoord = playerList[numberOfPlayer].coord;\r\n  const newEnemyList = { ...enemyList };\r\n  delete newEnemyList[currentCoord];\r\n\r\n  return {\r\n    ...state,\r\n    enemyList: newEnemyList,\r\n    dice: 0,\r\n    gameState: {\r\n      type: \"gameStarted.getPlayersOrder\",\r\n    },\r\n    doEffect: {\r\n      type: \"!getNextPlayer\",\r\n    },\r\n  };\r\n};\r\n","import { State } from \"../../types\";\r\n\r\nexport const checkCardApperance = (state: State): State => {\r\n  const { enemyList, playerList, numberOfPlayer } = state;\r\n  const currentCoord = playerList[numberOfPlayer].coord;\r\n\r\n  const isNeedOpenEnemyCard =\r\n    enemyList[currentCoord].apperance === \"open\" ? false : true;\r\n\r\n  switch (true) {\r\n    case isNeedOpenEnemyCard: {\r\n      return {\r\n        ...state,\r\n        doEffect: { type: \"!openEnemyCard\" },\r\n      };\r\n    }\r\n\r\n    case !isNeedOpenEnemyCard: {\r\n      return {\r\n        ...state,\r\n        gameState: { type: \"interactWithEnemy.throwBattleDice\" },\r\n\r\n        dice: 0,\r\n      };\r\n    }\r\n\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n","import { EnemyCardType, EnemyListType, State } from \"../../types\";\r\n\r\n/**\r\n * Need separate method for open EnemyCard\r\n * Because it dont lying structurally on cell\r\n */\r\nexport const openEnemyCard = (state: State): State => {\r\n  const { enemyList, playerList, numberOfPlayer } = state;\r\n  const currentCoord = playerList[numberOfPlayer].coord;\r\n\r\n  const currEnemyCard = enemyList[currentCoord];\r\n  const openedEnemyCard: EnemyCardType = {\r\n    ...currEnemyCard,\r\n    apperance: \"open\",\r\n  };\r\n\r\n  const newEnemyList = { ...enemyList, [currentCoord]: openedEnemyCard };\r\n  return {\r\n    ...state,\r\n    enemyList: newEnemyList,\r\n    gameState: { type: \"interactWithEnemy.throwBattleDice\" },\r\n    dice: 0,\r\n  };\r\n};\r\n","import { PlayerListType } from \"../../../types\";\r\n\r\nexport const changeHealth = (\r\n  playerList: PlayerListType,\r\n  indexTarget: number\r\n) => {\r\n  return playerList[indexTarget].health + 1;\r\n};\r\n","import { State } from \"../../../types\";\r\nimport { ActionType } from \"../../../reducer\";\r\n\r\nimport { getStateCardSelected } from \"../../common/getStateCardSelected\";\r\nimport { getStateGiveCard } from \"./getStateGiveCard\";\r\nimport { getStateHealCurrPlayer } from \"./getStateHealCurrPlayer\";\r\nimport { getStateHealAnotherPlayer } from \"./getStateHealAnotherPlayer\";\r\nimport { getStateHoleFilled } from \"./getStateHoleFilled\";\r\n/**\r\n *  In payload get order number of chosen for interact player.\r\n * If this number = indexCurrPlayer we heal player.\r\n * If not - we give context menu: need heal or apply.\r\n */\r\nexport const applyCard = (state: State, action: ActionType): State => {\r\n  const { numberOfPlayer, playerList } = state;\r\n\r\n  const chosenCardType = playerList[numberOfPlayer].inventory.cardSelected;\r\n\r\n  switch (action.type) {\r\n    case \"req-shareCard\": {\r\n      const recipientPlayerNumber = action.payload;\r\n      return getStateGiveCard(state, recipientPlayerNumber);\r\n    }\r\n\r\n    case \"cardChoosed\": {\r\n      const typeOfSelect = action.payload.type;\r\n      return getStateCardSelected(state, typeOfSelect);\r\n    }\r\n\r\n    default: {\r\n      switch (chosenCardType) {\r\n        case \"health\": {\r\n          switch (action.type) {\r\n            case \"req-healPlayer\": {\r\n              /**\r\n               * Need to increase playerHealth\r\n               * Then remove card from inventory\r\n               * Can we do this simultaneously?\r\n               */\r\n\r\n              const indexChosenPlayer = action.payload;\r\n              const isCurrPlayer = indexChosenPlayer === numberOfPlayer;\r\n\r\n              switch (isCurrPlayer) {\r\n                case true:\r\n                  return getStateHealCurrPlayer(state);\r\n\r\n                case false: {\r\n                  return getStateHealAnotherPlayer(state, indexChosenPlayer);\r\n                }\r\n                default:\r\n                  return state;\r\n              }\r\n            }\r\n\r\n            default:\r\n              return state;\r\n          }\r\n        }\r\n\r\n        case \"boards\": {\r\n          switch (action.type) {\r\n            case \"req-fillHole\": {\r\n              const { coord, direction } = action.payload;\r\n              return getStateHoleFilled(state, coord, direction);\r\n            }\r\n\r\n            default:\r\n              return state;\r\n          }\r\n        }\r\n\r\n        default:\r\n          return state;\r\n      }\r\n    }\r\n  }\r\n};\r\n","import { State } from \"../../../types\";\r\n\r\nexport const getStateGiveCard = (\r\n  state: State,\r\n  recipientPlayerNumber: number\r\n): State => {\r\n  const { playerList, numberOfPlayer } = state;\r\n  const indexCurrPlayer = numberOfPlayer;\r\n\r\n  const currentPlayerInventory = playerList[indexCurrPlayer].inventory;\r\n  const recepientPlayerInventory = playerList[recipientPlayerNumber].inventory;\r\n\r\n  const sharedCardType = playerList[indexCurrPlayer].inventory.cardSelected;\r\n\r\n  if (sharedCardType) {\r\n    const newCurrentPlayerInventory = {\r\n      ...currentPlayerInventory,\r\n      [sharedCardType]: currentPlayerInventory[sharedCardType] - 1,\r\n      cardSelected: null,\r\n    };\r\n\r\n    const newRecepientPlayerInventory = {\r\n      ...recepientPlayerInventory,\r\n      [sharedCardType]: recepientPlayerInventory[sharedCardType] + 1,\r\n    };\r\n\r\n    const newPlayerList = {\r\n      ...playerList,\r\n      [indexCurrPlayer]: {\r\n        ...playerList[indexCurrPlayer],\r\n        inventory: newCurrentPlayerInventory,\r\n      },\r\n      [recipientPlayerNumber]: {\r\n        ...playerList[recipientPlayerNumber],\r\n        inventory: newRecepientPlayerInventory,\r\n      },\r\n    };\r\n\r\n    return {\r\n      ...state,\r\n      playerList: newPlayerList,\r\n      gameState: { type: \"gameStarted.playerMove\" },\r\n      doEffect: { type: \"!checkAvailableNeighboringCell\" },\r\n    };\r\n  } else {\r\n    return state;\r\n  }\r\n};\r\n","import { State, PlayerListType } from \"../../../types\";\r\n\r\nimport { deleteSelectedCard } from \"../../common/deleteSelectedCard\";\r\nimport { changeHealth } from \"./changeHealth\";\r\n\r\nexport const getStateHealCurrPlayer = (state: State): State => {\r\n  const { playerList, numberOfPlayer } = state;\r\n  const indexCurrPlayer = numberOfPlayer;\r\n  const newHealth = changeHealth(playerList, indexCurrPlayer);\r\n  const newInventory = deleteSelectedCard(playerList, numberOfPlayer);\r\n  const newPlayerList: PlayerListType = {\r\n    ...playerList,\r\n    [indexCurrPlayer]: {\r\n      ...playerList[indexCurrPlayer],\r\n      inventory: newInventory,\r\n      health: newHealth,\r\n    },\r\n  };\r\n\r\n  return {\r\n    ...state,\r\n    playerList: newPlayerList,\r\n    gameState: { type: \"gameStarted.playerMove\" },\r\n  };\r\n};\r\n","import { State, PlayerListType } from \"../../../types\";\r\n\r\nimport { deleteSelectedCard } from \"../../common/deleteSelectedCard\";\r\nimport { changeHealth } from \"./changeHealth\";\r\nexport const getStateHealAnotherPlayer = (\r\n  state: State,\r\n  indexChosenPlayer: number\r\n): State => {\r\n  const { playerList, numberOfPlayer } = state;\r\n  const indexCurrPlayer = numberOfPlayer;\r\n  const newInventory = deleteSelectedCard(playerList, numberOfPlayer);\r\n  const newHealth = changeHealth(playerList, indexChosenPlayer);\r\n\r\n  const newPlayerList: PlayerListType = {\r\n    ...playerList,\r\n    [indexChosenPlayer]: {\r\n      ...playerList[indexChosenPlayer],\r\n      health: newHealth,\r\n    },\r\n    [indexCurrPlayer]: {\r\n      ...playerList[indexCurrPlayer],\r\n      inventory: newInventory,\r\n    },\r\n  };\r\n\r\n  return {\r\n    ...state,\r\n    playerList: newPlayerList,\r\n    gameState: { type: \"gameStarted.playerMove\" },\r\n    doEffect: {\r\n      type: \"!checkAvailableNeighboringCell\",\r\n    },\r\n  };\r\n};\r\n","import { State, PlayerListType, MoveDirection } from \"../../../types\";\r\n\r\nimport { deleteSelectedCard } from \"../../common/deleteSelectedCard\";\r\n\r\nexport const getStateHoleFilled = (\r\n  state: State,\r\n  coord: number,\r\n  direction: MoveDirection\r\n) => {\r\n  const { gameField, playerList, numberOfPlayer } = state;\r\n  const indexCurrPlayer = numberOfPlayer;\r\n  const newInventory = deleteSelectedCard(playerList, numberOfPlayer);\r\n  const cellWithChosedHole = gameField.values[coord];\r\n\r\n  if (cellWithChosedHole.name === \"commonCell\") {\r\n    const barriersWithClosedHole = cellWithChosedHole.barrierList?.map(\r\n      (barrier) => {\r\n        if (barrier.direction === direction) {\r\n          return { ...barrier, isOpen: false };\r\n        } else return barrier;\r\n      }\r\n    );\r\n\r\n    const newGameField = {\r\n      ...gameField,\r\n      values: {\r\n        ...gameField.values,\r\n        [coord]: {\r\n          ...gameField.values[coord],\r\n          barrierList: barriersWithClosedHole,\r\n        },\r\n      },\r\n    };\r\n\r\n    const newPlayerList: PlayerListType = {\r\n      ...playerList,\r\n      [indexCurrPlayer]: {\r\n        ...playerList[indexCurrPlayer],\r\n        inventory: newInventory,\r\n      },\r\n    };\r\n    const newState: State = {\r\n      ...state,\r\n      gameField: newGameField,\r\n      playerList: newPlayerList,\r\n      gameState: { type: \"gameStarted.playerMove\" },\r\n      doEffect: { type: \"!checkAvailableNeighboringCell\" },\r\n    };\r\n    return newState;\r\n  } else {\r\n    return state;\r\n  }\r\n};\r\n","import { AMOUNT_PLAYERS } from \"../../../shared/config\";\r\nimport { State } from \"../../types\";\r\nimport { ActionType } from \"../../reducer\";\r\n\r\nexport const getPlayersOrder = (state: State, action: ActionType): State => {\r\n  const numberCurrPlayer = state.numberOfPlayer;\r\n  const playerList = Object.entries(state.playerList);\r\n  const maxPlayersNumber = playerList.length - 1;\r\n  const minPlayersNumber = 0;\r\n  const nextPlayersNumber =\r\n    numberCurrPlayer + 1 > maxPlayersNumber\r\n      ? minPlayersNumber\r\n      : numberCurrPlayer + 1;\r\n\r\n  switch (action.type) {\r\n    case \"req-getNextPlayer\": {\r\n      return {\r\n        ...state,\r\n        numberOfPlayer: nextPlayersNumber,\r\n        gameState: {\r\n          type: \"gameStarted.trownDice\",\r\n        },\r\n      };\r\n    }\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { State } from \"../../types\";\r\nimport { ActionType } from \"../../reducer\";\r\n\r\nexport const endGame = ( state: State,action: ActionType): State => {\r\n  switch (action.type) {\r\n    case \"req-getEndScreen\": {\r\n      return {\r\n        ...state,\r\n        gameState: { type: \"getEndScreen\" },\r\n      };\r\n    }\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { reducer } from \"./reducer\";\r\nimport { createStore} from \"redux\";\r\n\r\nexport const store = createStore(\r\n  reducer,\r\n  (window as any).__REDUX_DEVTOOLS_EXTENSION__ &&\r\n    (window as any).__REDUX_DEVTOOLS_EXTENSION__()\r\n);","import { initialState } from \"./initialState\";\r\nimport { waitingStart } from \"./phases/waitingStart\";\r\nimport {\r\n  trownDice,\r\n  playerMove,\r\n  takeCard,\r\n  interactWithEnemy,\r\n  applyCard,\r\n} from \"./phases/gameStarted\";\r\nimport { getPlayersOrder } from \"./phases/gameStarted\";\r\nimport { endGame } from \"./phases/endGame\";\r\nimport { MoveDirection, State, TypeOfCard } from \"./types\";\r\n\r\nexport type ActionType =\r\n  | { type: \"clickedStartButton\" }\r\n  | { type: \"diceThrown\"; payload: number }\r\n  | { type: \"playerMoved\"; payload: MoveDirection }\r\n  | { type: \"req-openCard\" }\r\n  | { type: \"req-changePlayerHealth\" }\r\n  | { type: \"req-deleteCard\" }\r\n  | { type: \"req-getNextPlayer\" }\r\n  | { type: \"req-checkEnemyCard\" }\r\n  | { type: \"req-openEnemyCard\" }\r\n  | { type: \"req-getBattleResult\" }\r\n  | { type: \"req-getEndScreen\" }\r\n  | { type: \"req-checkAvailableNeighboringCell\" }\r\n  | { type: \"req-cleanAvailableCells\" }\r\n  | { type: \"req-getPlayerMoveResult\" }\r\n  | { type: \"req-takeCard\" }\r\n  | {\r\n      type: \"cardChoosed\";\r\n      payload: { type: TypeOfCard };\r\n    }\r\n  | { type: \"req-choosePlayer\" }\r\n  | { type: \"req-healPlayer\"; payload: number }\r\n  | {\r\n      type: \"req-fillHole\";\r\n      payload: { coord: number; direction: MoveDirection };\r\n    }\r\n  | { type: \"req-shareCard\"; payload: number }\r\n  | { type: \"req-defeatEnemy\" }\r\n  | { type: \"req-removeEnemyCard\" };\r\n\r\nexport const reducer = (\r\n  state: State = initialState,\r\n  action: ActionType\r\n): State => {\r\n  const [phaseOuter, phaseInner] = state.gameState.type.split(\".\");\r\n\r\n  switch (phaseOuter) {\r\n    case \"waitingStart\": {\r\n      return waitingStart(state, action);\r\n    }\r\n\r\n    case \"gameStarted\": {\r\n      switch (phaseInner) {\r\n        case \"trownDice\": {\r\n          return trownDice(state, action);\r\n        }\r\n\r\n        case \"playerMove\": {\r\n          return playerMove(state, action);\r\n        }\r\n\r\n        case \"takeCard\": {\r\n          return takeCard(state, action);\r\n        }\r\n        case \"applyCard\": {\r\n          return applyCard(state, action);\r\n        }\r\n\r\n        case \"getPlayersOrder\": {\r\n          return getPlayersOrder(state, action);\r\n        }\r\n\r\n        default:\r\n          return state;\r\n      }\r\n    }\r\n    case \"interactWithEnemy\": {\r\n      return interactWithEnemy(state, action);\r\n    }\r\n\r\n    case \"endGame\": {\r\n      return endGame(state, action);\r\n    }\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { Provider, useSelector } from \"react-redux\";\r\n\r\nimport styled from \"styled-components\";\r\nimport \"./index.css\";\r\nimport {\r\n  PlayGrid,\r\n  MoveControls,\r\n  Dice,\r\n  StatusList,\r\n  PlayersStatusList,\r\n} from \"./features\";\r\nimport { StartScreen, EndScreen } from \"./pages\";\r\nimport { State } from \"./business/types\";\r\nimport { store } from \"./business/store\";\r\nimport {\r\n  useOpenCard,\r\n  useEndScreen,\r\n  usePlayerMove,\r\n  useInteractWithEnemy,\r\n} from \"./business/effects\";\r\nimport { PlayerStatus } from \"./features/PlayerStatus\";\r\n\r\nconst Field = styled.div`\r\n  margin: 0 auto;\r\n`;\r\n\r\nconst Game = styled.div`\r\n  width: 900px;\r\n  height: 600px;\r\n  margin: 40px auto;\r\n  display: flex;\r\n  justify-content: center;\r\n\r\n  cursor: default;\r\n  & > * {\r\n  }\r\n`;\r\n\r\nconst RightPanel = styled.div`\r\n  width: 300px;\r\n  height: 600px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  flex-grow: 0;\r\n  align-items: start;\r\n  margin: 0 30px;\r\n  padding: 50px 0;\r\n  box-sizing: border-box;\r\n  & > * {\r\n  }\r\n`;\r\n\r\nconst LeftPanel = styled.div`\r\n  display: flex;\r\n  align-self: start;\r\n  background-color: white;\r\n  height: 100px;\r\n  margin: 0 30px;\r\n  border-radius: 5px;\r\n  padding: 5px 0;\r\n`;\r\n\r\nconst GameControls = styled.div`\r\n  display: flex;\r\n  width: 100%;\r\n  justify-content: space-between;\r\n  padding: 0 15px;\r\n  box-sizing: border-box;\r\n`;\r\n\r\nconst Test = styled.div`\r\n  position: absolute;\r\n  z-index: 1;\r\n  width: 600px;\r\n  height: 600px;\r\n  background-color: rgb(218 222 201 / 77%);\r\n`;\r\n\r\nexport function GetApp() {\r\n  const { gameState } = useSelector((state: State) => ({ ...state }));\r\n\r\n  useOpenCard();\r\n  usePlayerMove();\r\n  useEndScreen();\r\n  useInteractWithEnemy();\r\n\r\n  const getGameScreen = () => {\r\n    switch (gameState.type) {\r\n      case \"waitingStart\":\r\n        return <StartScreen />;\r\n\r\n      case \"getEndScreen\":\r\n        return <EndScreen />;\r\n\r\n      default:\r\n        return (\r\n          <>\r\n            <LeftPanel>{/*  <PlayersStatusList /> */}</LeftPanel>\r\n            <Field id=\"field\">\r\n              {/*        <Test /> */}\r\n              <PlayGrid />\r\n            </Field>\r\n            <RightPanel>\r\n              <StatusList />\r\n              <GameControls>\r\n                <Dice />\r\n                <MoveControls />\r\n              </GameControls>\r\n              {/*  <PlayerStatus /> */}\r\n            </RightPanel>\r\n          </>\r\n        );\r\n    }\r\n  };\r\n\r\n  return <Game>{getGameScreen()}</Game>;\r\n}\r\n\r\nexport const App = () => {\r\n  return (\r\n    <Provider store={store}>\r\n      <GetApp />\r\n    </Provider>\r\n  );\r\n};\r\n","import { useEffect } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\n\r\nimport { State } from \"../types\";\r\n\r\nexport function useOpenCard() {\r\n  const [doEffect] = useSelector((state: State) => [state.doEffect]);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(\r\n    function openCard() {\r\n      switch (doEffect?.type) {\r\n        case \"!openCard\": {\r\n          const timerOpen = setTimeout(\r\n            () =>\r\n              dispatch({\r\n                type: \"req-openCard\",\r\n              }),\r\n            1000\r\n          );\r\n          return () => {\r\n            clearTimeout(timerOpen);\r\n          };\r\n        }\r\n\r\n        case \"!takeCard\": {\r\n          const timerTakeCard = setTimeout(\r\n            () =>\r\n              dispatch({\r\n                type: \"req-takeCard\",\r\n              }),\r\n            500\r\n          );\r\n          return () => {\r\n            clearTimeout(timerTakeCard);\r\n          };\r\n        }\r\n\r\n        case \"!changePlayerHealth\": {\r\n          const timerChangePlayerHealth = setTimeout(\r\n            () =>\r\n              dispatch({\r\n                type: \"req-changePlayerHealth\",\r\n              }),\r\n            500\r\n          );\r\n          return () => {\r\n            clearTimeout(timerChangePlayerHealth);\r\n          };\r\n        }\r\n\r\n        case \"!deleteCard\": {\r\n          const timerDeleteCard = setTimeout(\r\n            () =>\r\n              dispatch({\r\n                type: \"req-deleteCard\",\r\n              }),\r\n            500\r\n          );\r\n          return () => {\r\n            clearTimeout(timerDeleteCard);\r\n          };\r\n        }\r\n\r\n        case \"!getNextPlayer\": {\r\n          dispatch({ type: \"req-getNextPlayer\" });\r\n          break;\r\n        }\r\n\r\n        default: {\r\n          break;\r\n        }\r\n      }\r\n    },\r\n    [doEffect]\r\n  );\r\n}\r\n","import { useEffect } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\n\r\nimport { State } from \"../types\";\r\n\r\nexport function usePlayerMove() {\r\n  const [doEffect] = useSelector((state: State) => [state.doEffect]);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(\r\n    function playerMove() {\r\n      switch (doEffect?.type) {\r\n        case \"!checkAvailableNeighboringCell\": {\r\n          dispatch({\r\n            type: \"req-checkAvailableNeighboringCell\",\r\n          });\r\n          break;\r\n        }\r\n\r\n        case \"!cleanMarkedCell\": {\r\n          const timerMarkCell = setTimeout(\r\n            () =>\r\n              dispatch({\r\n                type: \"req-cleanAvailableCells\",\r\n              }),\r\n            0\r\n          );\r\n          return () => {\r\n            clearTimeout(timerMarkCell);\r\n          };\r\n        }\r\n        case \"!getPlayerMoveResult\": {\r\n          dispatch({\r\n            type: \"req-getPlayerMoveResult\",\r\n          });\r\n          break;\r\n        }\r\n\r\n        default:\r\n          break;\r\n      }\r\n    },\r\n    [doEffect]\r\n  );\r\n}\r\n","import { useEffect } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\n\r\nimport { State } from \"../types\";\r\n\r\nexport function useEndScreen() {\r\n  const dispatch = useDispatch();\r\n  const gameState = useSelector((state: State) => state.gameState);\r\n\r\n  useEffect(\r\n    function getEndScreen() {\r\n      switch (gameState.type) {\r\n        case \"endGame\":\r\n          const timer = setTimeout(\r\n            () => dispatch({ type: \"req-getEndScreen\" }),\r\n            1000\r\n          );\r\n\r\n          return () => clearTimeout(timer);\r\n\r\n        default:\r\n          break;\r\n      }\r\n    },\r\n    [gameState.type, dispatch]\r\n  );\r\n}\r\n","import { useEffect } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\n\r\nimport { State } from \"../types\";\r\n\r\nexport function useInteractWithEnemy() {\r\n  const [doEffect] = useSelector((state: State) => [state.doEffect]);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    switch (doEffect?.type) {\r\n      case \"!checkApperanceEnemyCard\": {\r\n        dispatch({\r\n          type: \"req-checkEnemyCard\",\r\n        });\r\n        break;\r\n      }\r\n\r\n      case \"!openEnemyCard\": {\r\n        const timerOpen = setTimeout(\r\n          () =>\r\n            dispatch({\r\n              type: \"req-openEnemyCard\",\r\n            }),\r\n          1000\r\n        );\r\n        return () => {\r\n          clearTimeout(timerOpen);\r\n        };\r\n      }\r\n\r\n      case \"!getBattleResult\": {\r\n        const timerGetResult = setTimeout(\r\n          () => dispatch({ type: \"req-getBattleResult\" }),\r\n          2000\r\n        );\r\n\r\n        return () => {\r\n          clearTimeout(timerGetResult);\r\n        };\r\n      }\r\n\r\n      case \"!removeEnemyCard\": {\r\n        const timerRemoveEnemy = setTimeout(\r\n          () => dispatch({ type: \"req-removeEnemyCard\" }),\r\n          1000\r\n        );\r\n        return () => {\r\n          clearTimeout(timerRemoveEnemy);\r\n        };\r\n      }\r\n      default: {\r\n        break;\r\n      }\r\n    }\r\n  }, [doEffect]);\r\n}\r\n","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport {App} from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}